import"./index.46cfd363.js";import{r as i}from"./index.8e45f264.js";import{r as v}from"./index.68bde87c.js";import{C as R}from"./mocks.f12dce43.js";import{a as A,j as l}from"./jsx-runtime.96752331.js";import{R as w}from"./textarea.e03cca18.js";import{c as D}from"./renderers.fa4620c3.js";import"./chunk-Y6TTZ4RO.672b857c.js";import"./iframe.047c3e6d.js";import"./selection.f2e9739e.js";const O={component:w},E={width:"400px",height:"300px"},C=8,h=/\B@([\-+\w]*)$/,M=new RegExp(`(${R.map(n=>`@${n}`).join("|")})`,"g"),S=D([[M,{background:"#EAF5F9",color:"#4276AA",borderRadius:"3px"}]]),T=({chars:n,index:s,top:p,left:t,complete:a})=>l("div",{style:{position:"fixed",top:p,left:t,fontSize:"12px",border:"solid 1px gray",borderRadius:"3px",background:"white",cursor:"pointer"},children:n.map((o,r)=>l("div",{style:{padding:"4px",...s===r&&{color:"white",background:"#2A6AD3"}},onMouseDown:d=>{d.preventDefault(),a(r)},children:o},o))}),P={render:()=>{var g;const n=i.exports.useRef(null),[s,p]=i.exports.useState(`Hi, @Captain Gregor and @Jaxxon . Please enter @ to show suggestions.

`),[t,a]=i.exports.useState(null),[o,r]=i.exports.useState(0),d=t?s.slice(0,t.caret):s,u=t&&d.match(h),x=(g=u==null?void 0:u[1])!=null?g:"",c=i.exports.useMemo(()=>R.filter(e=>e.toLowerCase().startsWith(x.toLowerCase())).slice(0,C),[x]),f=e=>{if(!n.current||!t)return;const m=c[e];n.current.setRangeText(`@${m} `,t.caret-x.length-1,t.caret,"end"),a(null),r(0)};return A("div",{children:[l(w,{ref:n,style:E,onChange:e=>p(e.target.value),value:s,onKeyDown:e=>{if(!(!t||!c.length))switch(e.code){case"ArrowUp":e.preventDefault();const m=o<=0?c.length-1:o-1;r(m);break;case"ArrowDown":e.preventDefault();const b=o>=c.length-1?0:o+1;r(b);break;case"Enter":e.preventDefault(),f(o);break;case"Escape":e.preventDefault(),a(null),r(0);break}},onSelectionChange:e=>{e.focused&&h.test(s.slice(0,e.selectionStart))?(a({top:e.top+e.height,left:e.left,caret:e.selectionStart}),r(0)):(a(null),r(0))},children:S}),t&&v.exports.createPortal(l(T,{top:t.top,left:t.left,chars:c,index:o,complete:f}),document.body)]})}},F=["Mention"];export{P as Mention,F as __namedExportsOrder,O as default};
//# sourceMappingURL=Mention.stories.3bb678c7.js.map
