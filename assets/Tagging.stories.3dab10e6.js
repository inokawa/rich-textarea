import"./index.46cfd363.js";import{r as d}from"./index.8e45f264.js";import{a as x,j as s}from"./jsx-runtime.96752331.js";import{R as m}from"./textarea.e03cca18.js";import"./chunk-Y6TTZ4RO.672b857c.js";import"./iframe.047c3e6d.js";import"./index.68bde87c.js";import"./selection.f2e9739e.js";const P={component:m},y=20,T=400,S={height:y,width:T,whiteSpace:"pre",overflowWrap:"normal",overflowX:"auto",overflowY:"hidden",resize:"none"},p=" ",b=({items:t,onSelect:a})=>x("div",{style:{position:"absolute",top:y+4,left:0,width:T,fontSize:"12px",border:"solid 1px gray",borderRadius:"3px"},children:[s("div",{style:{borderBottom:"solid 1px gray"},children:"Current tags"}),s("ul",{style:{listStyleType:"none",margin:0,padding:0,cursor:"pointer",background:"white"},children:t.map(r=>s("li",{onMouseDown:()=>a(r),children:r},r))})]}),k=({children:t,selected:a})=>s("span",{style:{background:a?"lightgray":"whitesmoke",color:"dimgray",borderRadius:"4px",outline:"solid 1px dimgray"},children:t}),H={render:()=>{const[t,a]=d.exports.useState(["Apple","Orange","Banana"]),[r,c]=d.exports.useState(""),[o,g]=d.exports.useState(null),[v,h]=d.exports.useState(!1),f=t.join(p)+(t.length?p:""),l=f.length,u=o==null?-1:t.reduce((e,n,i)=>{if(e[0]!==-1)return e;const w=e[1];return e[1]+=n.length+p.length,w<=o&&o<e[1]&&(e[0]=i),e},[-1,0])[0];return x("div",{style:{position:"relative",padding:0},children:[s(m,{rows:1,style:S,onChange:e=>c(e.target.value.slice(l)),value:f+r,onFocus:()=>h(!0),onBlur:()=>h(!1),onKeyDown:e=>{if(!!o)switch(e.code){case"Enter":if(e.preventDefault(),!o||!r||t.includes(r))return;a(n=>[...n,r]),c("");break;case"Backspace":if(l<o)return;e.preventDefault(),a(n=>{const i=[...n];return i.splice(u===-1?n.length-1:u,1),i});break;case"Delete":if(l<o)return;e.preventDefault();break}},onSelectionChange:e=>{e.focused?g(e.selectionStart):g(null)},children:()=>[...t.flatMap((e,n)=>[s(k,{selected:n==u,children:e},e),p]),r||o===l&&s("span",{style:{color:"darkgray"},children:"Type anything and press Enter key..."},"__placeholder")]}),v&&!!t.length&&s(b,{items:t,onSelect:e=>{a(n=>n.filter(i=>i!==e))}})]})}},M=["Tagging"];export{H as Tagging,M as __namedExportsOrder,P as default};
//# sourceMappingURL=Tagging.stories.3dab10e6.js.map
