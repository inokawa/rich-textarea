import{j as yr}from"./jsx-runtime-Dp96wDEE.js";import{c as Zr,r as jr}from"./iframe-e0PEXjEq.js";import{r as oo}from"./index-D2exhhyM.js";import{R as Pn}from"./textarea-B8ORlT-g.js";import"./preload-helper-D9Z9MdNV.js";import"./index-6PeX8Det.js";import"./observer-C1Yv_ZWd.js";var ke={},nr={},Ae,fn;function Un(){if(fn)return Ae;fn=1;function m(u){if(typeof u!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(u))}function g(u,n){for(var t="",f=0,l=-1,d=0,h,c=0;c<=u.length;++c){if(c<u.length)h=u.charCodeAt(c);else{if(h===47)break;h=47}if(h===47){if(!(l===c-1||d===1))if(l!==c-1&&d===2){if(t.length<2||f!==2||t.charCodeAt(t.length-1)!==46||t.charCodeAt(t.length-2)!==46){if(t.length>2){var y=t.lastIndexOf("/");if(y!==t.length-1){y===-1?(t="",f=0):(t=t.slice(0,y),f=t.length-1-t.lastIndexOf("/")),l=c,d=0;continue}}else if(t.length===2||t.length===1){t="",f=0,l=c,d=0;continue}}n&&(t.length>0?t+="/..":t="..",f=2)}else t.length>0?t+="/"+u.slice(l+1,c):t=u.slice(l+1,c),f=c-l-1;l=c,d=0}else h===46&&d!==-1?++d:d=-1}return t}function a(u,n){var t=n.dir||n.root,f=n.base||(n.name||"")+(n.ext||"");return t?t===n.root?t+f:t+u+f:f}var i={resolve:function(){for(var n="",t=!1,f,l=arguments.length-1;l>=-1&&!t;l--){var d;l>=0?d=arguments[l]:(f===void 0&&(f=process.cwd()),d=f),m(d),d.length!==0&&(n=d+"/"+n,t=d.charCodeAt(0)===47)}return n=g(n,!t),t?n.length>0?"/"+n:"/":n.length>0?n:"."},normalize:function(n){if(m(n),n.length===0)return".";var t=n.charCodeAt(0)===47,f=n.charCodeAt(n.length-1)===47;return n=g(n,!t),n.length===0&&!t&&(n="."),n.length>0&&f&&(n+="/"),t?"/"+n:n},isAbsolute:function(n){return m(n),n.length>0&&n.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var n,t=0;t<arguments.length;++t){var f=arguments[t];m(f),f.length>0&&(n===void 0?n=f:n+="/"+f)}return n===void 0?".":i.normalize(n)},relative:function(n,t){if(m(n),m(t),n===t||(n=i.resolve(n),t=i.resolve(t),n===t))return"";for(var f=1;f<n.length&&n.charCodeAt(f)===47;++f);for(var l=n.length,d=l-f,h=1;h<t.length&&t.charCodeAt(h)===47;++h);for(var c=t.length,y=c-h,k=d<y?d:y,x=-1,E=0;E<=k;++E){if(E===k){if(y>k){if(t.charCodeAt(h+E)===47)return t.slice(h+E+1);if(E===0)return t.slice(h+E)}else d>k&&(n.charCodeAt(f+E)===47?x=E:E===0&&(x=0));break}var $=n.charCodeAt(f+E),H=t.charCodeAt(h+E);if($!==H)break;$===47&&(x=E)}var b="";for(E=f+x+1;E<=l;++E)(E===l||n.charCodeAt(E)===47)&&(b.length===0?b+="..":b+="/..");return b.length>0?b+t.slice(h+x):(h+=x,t.charCodeAt(h)===47&&++h,t.slice(h))},_makeLong:function(n){return n},dirname:function(n){if(m(n),n.length===0)return".";for(var t=n.charCodeAt(0),f=t===47,l=-1,d=!0,h=n.length-1;h>=1;--h)if(t=n.charCodeAt(h),t===47){if(!d){l=h;break}}else d=!1;return l===-1?f?"/":".":f&&l===1?"//":n.slice(0,l)},basename:function(n,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');m(n);var f=0,l=-1,d=!0,h;if(t!==void 0&&t.length>0&&t.length<=n.length){if(t.length===n.length&&t===n)return"";var c=t.length-1,y=-1;for(h=n.length-1;h>=0;--h){var k=n.charCodeAt(h);if(k===47){if(!d){f=h+1;break}}else y===-1&&(d=!1,y=h+1),c>=0&&(k===t.charCodeAt(c)?--c===-1&&(l=h):(c=-1,l=y))}return f===l?l=y:l===-1&&(l=n.length),n.slice(f,l)}else{for(h=n.length-1;h>=0;--h)if(n.charCodeAt(h)===47){if(!d){f=h+1;break}}else l===-1&&(d=!1,l=h+1);return l===-1?"":n.slice(f,l)}},extname:function(n){m(n);for(var t=-1,f=0,l=-1,d=!0,h=0,c=n.length-1;c>=0;--c){var y=n.charCodeAt(c);if(y===47){if(!d){f=c+1;break}continue}l===-1&&(d=!1,l=c+1),y===46?t===-1?t=c:h!==1&&(h=1):t!==-1&&(h=-1)}return t===-1||l===-1||h===0||h===1&&t===l-1&&t===f+1?"":n.slice(t,l)},format:function(n){if(n===null||typeof n!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof n);return a("/",n)},parse:function(n){m(n);var t={root:"",dir:"",base:"",ext:"",name:""};if(n.length===0)return t;var f=n.charCodeAt(0),l=f===47,d;l?(t.root="/",d=1):d=0;for(var h=-1,c=0,y=-1,k=!0,x=n.length-1,E=0;x>=d;--x){if(f=n.charCodeAt(x),f===47){if(!k){c=x+1;break}continue}y===-1&&(k=!1,y=x+1),f===46?h===-1?h=x:E!==1&&(E=1):h!==-1&&(E=-1)}return h===-1||y===-1||E===0||E===1&&h===y-1&&h===c+1?y!==-1&&(c===0&&l?t.base=t.name=n.slice(1,y):t.base=t.name=n.slice(c,y)):(c===0&&l?(t.name=n.slice(1,h),t.base=n.slice(1,y)):(t.name=n.slice(c,h),t.base=n.slice(c,y)),t.ext=n.slice(h,y)),c>0?t.dir=n.slice(0,c-1):l&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};return i.posix=i,Ae=i,Ae}var Tr={exports:{}},uo=Tr.exports,cn;function so(){return cn||(cn=1,(function(m,g){(function(a,i){i(g)})(uo,function(a){const i=Symbol("newer"),u=Symbol("older");class n{constructor(c,y){typeof c!="number"&&(y=c,c=0),this.size=0,this.limit=c,this.oldest=this.newest=void 0,this._keymap=new Map,y&&(this.assign(y),c<1&&(this.limit=this.size))}_markEntryAsUsed(c){c!==this.newest&&(c[i]&&(c===this.oldest&&(this.oldest=c[i]),c[i][u]=c[u]),c[u]&&(c[u][i]=c[i]),c[i]=void 0,c[u]=this.newest,this.newest&&(this.newest[i]=c),this.newest=c)}assign(c){let y,k=this.limit||Number.MAX_VALUE;this._keymap.clear();let x=c[Symbol.iterator]();for(let E=x.next();!E.done;E=x.next()){let $=new t(E.value[0],E.value[1]);if(this._keymap.set($.key,$),y?(y[i]=$,$[u]=y):this.oldest=$,y=$,k--==0)throw new Error("overflow")}this.newest=y,this.size=this._keymap.size}get(c){var y=this._keymap.get(c);return y?(this._markEntryAsUsed(y),y.value):void 0}set(c,y){var k=this._keymap.get(c);return k?(k.value=y,this._markEntryAsUsed(k),this):(this._keymap.set(c,k=new t(c,y)),this.newest?(this.newest[i]=k,k[u]=this.newest):this.oldest=k,this.newest=k,++this.size,this.size>this.limit&&this.shift(),this)}shift(){var c=this.oldest;if(c)return this.oldest[i]?(this.oldest=this.oldest[i],this.oldest[u]=void 0):(this.oldest=void 0,this.newest=void 0),c[i]=c[u]=void 0,this._keymap.delete(c.key),--this.size,[c.key,c.value]}find(c){let y=this._keymap.get(c);return y?y.value:void 0}has(c){return this._keymap.has(c)}delete(c){var y=this._keymap.get(c);return y?(this._keymap.delete(y.key),y[i]&&y[u]?(y[u][i]=y[i],y[i][u]=y[u]):y[i]?(y[i][u]=void 0,this.oldest=y[i]):y[u]?(y[u][i]=void 0,this.newest=y[u]):this.oldest=this.newest=void 0,this.size--,y.value):void 0}clear(){this.oldest=this.newest=void 0,this.size=0,this._keymap.clear()}keys(){return new l(this.oldest)}values(){return new d(this.oldest)}entries(){return this}[Symbol.iterator](){return new f(this.oldest)}forEach(c,y){typeof y!="object"&&(y=this);let k=this.oldest;for(;k;)c.call(y,k.value,k.key,this),k=k[i]}toJSON(){for(var c=new Array(this.size),y=0,k=this.oldest;k;)c[y++]={key:k.key,value:k.value},k=k[i];return c}toString(){for(var c="",y=this.oldest;y;)c+=String(y.key)+":"+y.value,y=y[i],y&&(c+=" < ");return c}}a.LRUMap=n;function t(h,c){this.key=h,this.value=c,this[i]=void 0,this[u]=void 0}function f(h){this.entry=h}f.prototype[Symbol.iterator]=function(){return this},f.prototype.next=function(){let h=this.entry;return h?(this.entry=h[i],{done:!1,value:[h.key,h.value]}):{done:!0,value:void 0}};function l(h){this.entry=h}l.prototype[Symbol.iterator]=function(){return this},l.prototype.next=function(){let h=this.entry;return h?(this.entry=h[i],{done:!1,value:h.key}):{done:!0,value:void 0}};function d(h){this.entry=h}d.prototype[Symbol.iterator]=function(){return this},d.prototype.next=function(){let h=this.entry;return h?(this.entry=h[i],{done:!1,value:h.value}):{done:!0,value:void 0}}})})(Tr,Tr.exports)),Tr.exports}var re={},ln;function fo(){if(ln)return re;ln=1,Object.defineProperty(re,"__esModule",{value:!0});var m=(function(){function g(){var a=this;this.promise=new Promise(function(i,u){a.resolve=i,a.reject=u})}return g})();return re.default=m,re}var Ce,hn;function qn(){if(hn)return Ce;hn=1;function m(g,a,i,u,n,t,f,l){this.name=g,this.cost=a,this.start_pos=i,this.length=u,this.left_id=t,this.right_id=f,this.prev=null,this.surface_form=l,n==="BOS"?this.shortest_cost=0:this.shortest_cost=Number.MAX_VALUE,this.type=n}return Ce=m,Ce}var Se,vn;function co(){if(vn)return Se;vn=1;var m=qn();function g(){this.nodes_end_at=[],this.nodes_end_at[0]=[new m(-1,0,0,0,"BOS",0,0,"")],this.eos_pos=1}return g.prototype.append=function(a){var i=a.start_pos+a.length-1;this.eos_pos<i&&(this.eos_pos=i);var u=this.nodes_end_at[i];u==null&&(u=[]),u.push(a),this.nodes_end_at[i]=u},g.prototype.appendEos=function(){var a=this.nodes_end_at.length;this.eos_pos++,this.nodes_end_at[a]=[new m(-1,0,this.eos_pos,0,"EOS",0,0,"")]},Se=g,Se}var Te,pn;function Mn(){if(pn)return Te;pn=1;function m(g){this.str=g,this.index_mapping=[];for(var a=0;a<g.length;a++){var i=g.charAt(a);this.index_mapping.push(a),m.isSurrogatePair(i)&&a++}this.length=this.index_mapping.length}return m.prototype.slice=function(g){if(this.index_mapping.length<=g)return"";var a=this.index_mapping[g];return this.str.slice(a)},m.prototype.charAt=function(g){if(this.str.length<=g)return"";var a=this.index_mapping[g],i=this.index_mapping[g+1];return i==null?this.str.slice(a):this.str.slice(a,i)},m.prototype.charCodeAt=function(g){if(this.index_mapping.length<=g)return NaN;var a=this.index_mapping[g],i=this.str.charCodeAt(a),u;return i>=55296&&i<=56319&&a<this.str.length&&(u=this.str.charCodeAt(a+1),u>=56320&&u<=57343)?(i-55296)*1024+u-56320+65536:i},m.prototype.toString=function(){return this.str},m.isSurrogatePair=function(g){var a=g.charCodeAt(0);return a>=55296&&a<=56319},Te=m,Te}var De,yn;function lo(){if(yn)return De;yn=1;var m=qn(),g=co(),a=Mn();function i(u){this.trie=u.trie,this.token_info_dictionary=u.token_info_dictionary,this.unknown_dictionary=u.unknown_dictionary}return i.prototype.build=function(u){for(var n=new g,t=new a(u),f,l,d,h,c,y=0;y<t.length;y++){for(var k=t.slice(y),x=this.trie.commonPrefixSearch(k),E=0;E<x.length;E++){l=x[E].v,f=x[E].k;for(var $=this.token_info_dictionary.target_map[l],H=0;H<$.length;H++){var b=parseInt($[H]);d=this.token_info_dictionary.dictionary.getShort(b),h=this.token_info_dictionary.dictionary.getShort(b+2),c=this.token_info_dictionary.dictionary.getShort(b+4),n.append(new m(b,c,y+1,f.length,"KNOWN",d,h,f))}}var F=new a(k),I=new a(F.charAt(0)),D=this.unknown_dictionary.lookup(I.toString());if(x==null||x.length===0||D.is_always_invoke===1){if(f=I,D.is_grouping===1&&1<F.length)for(var T=1;T<F.length;T++){var A=F.charAt(T),j=this.unknown_dictionary.lookup(A);if(D.class_name!==j.class_name)break;f+=A}for(var B=this.unknown_dictionary.target_map[D.class_id],O=0;O<B.length;O++){var R=parseInt(B[O]);d=this.unknown_dictionary.dictionary.getShort(R),h=this.unknown_dictionary.dictionary.getShort(R+2),c=this.unknown_dictionary.dictionary.getShort(R+4),n.append(new m(R,c,y+1,f.length,"UNKNOWN",d,h,f.toString()))}}}return n.appendEos(),n},De=i,De}var je,dn;function ho(){if(dn)return je;dn=1;function m(g){this.connection_costs=g}return m.prototype.search=function(g){return g=this.forward(g),this.backward(g)},m.prototype.forward=function(g){var a,i,u;for(a=1;a<=g.eos_pos;a++){var n=g.nodes_end_at[a];if(n!=null)for(i=0;i<n.length;i++){var t=n[i],f=Number.MAX_VALUE,l,d=g.nodes_end_at[t.start_pos-1];if(d!=null){for(u=0;u<d.length;u++){var h=d[u],c;t.left_id==null||h.right_id==null?(console.log("Left or right is null"),c=0):c=this.connection_costs.get(h.right_id,t.left_id);var y=h.shortest_cost+c+t.cost;y<f&&(l=h,f=y)}t.prev=l,t.shortest_cost=f}}}return g},m.prototype.backward=function(g){var a=[],i=g.nodes_end_at[g.nodes_end_at.length-1][0],u=i.prev;if(u==null)return[];for(;u.type!=="BOS";){if(a.push(u),u.prev==null)return[];u=u.prev}return a.reverse()},je=m,je}var Be,gn;function vo(){if(gn)return Be;gn=1;function m(){}return m.prototype.formatEntry=function(g,a,i,u){var n={};return n.word_id=g,n.word_type=i,n.word_position=a,n.surface_form=u[0],n.pos=u[1],n.pos_detail_1=u[2],n.pos_detail_2=u[3],n.pos_detail_3=u[4],n.conjugated_type=u[5],n.conjugated_form=u[6],n.basic_form=u[7],n.reading=u[8],n.pronunciation=u[9],n},m.prototype.formatUnknownEntry=function(g,a,i,u,n){var t={};return t.word_id=g,t.word_type=i,t.word_position=a,t.surface_form=n,t.pos=u[1],t.pos_detail_1=u[2],t.pos_detail_2=u[3],t.pos_detail_3=u[4],t.conjugated_type=u[5],t.conjugated_form=u[6],t.basic_form=u[7],t},Be=m,Be}var Fe,mn;function po(){if(mn)return Fe;mn=1;var m=lo(),g=ho(),a=vo(),i=/、|。/;function u(n){this.token_info_dictionary=n.token_info_dictionary,this.unknown_dictionary=n.unknown_dictionary,this.viterbi_builder=new m(n),this.viterbi_searcher=new g(n.connection_costs),this.formatter=new a}return u.splitByPunctuation=function(n){for(var t=[],f=n;f!=="";){var l=f.search(i);if(l<0){t.push(f);break}t.push(f.substring(0,l+1)),f=f.substring(l+1)}return t},u.prototype.tokenize=function(n){for(var t=u.splitByPunctuation(n),f=[],l=0;l<t.length;l++){var d=t[l];this.tokenizeForSentence(d,f)}return f},u.prototype.tokenizeForSentence=function(n,t){t==null&&(t=[]);var f=this.getLattice(n),l=this.viterbi_searcher.search(f),d=0;t.length>0&&(d=t[t.length-1].word_position);for(var h=0;h<l.length;h++){var c=l[h],y,k,x;c.type==="KNOWN"?(x=this.token_info_dictionary.getFeatures(c.name),x==null?k=[]:k=x.split(","),y=this.formatter.formatEntry(c.name,d+c.start_pos,c.type,k)):c.type==="UNKNOWN"?(x=this.unknown_dictionary.getFeatures(c.name),x==null?k=[]:k=x.split(","),y=this.formatter.formatUnknownEntry(c.name,d+c.start_pos,c.type,k,c.surface_form)):y=this.formatter.formatEntry(c.name,d+c.start_pos,c.type,[]),t.push(y)}return t},u.prototype.getLattice=function(n){return this.viterbi_builder.build(n)},Fe=u,Fe}var Dr={exports:{}},yo=Dr.exports,_n;function go(){return _n||(_n=1,(function(m,g){(function(a,i){i(g)})(yo,(function(a){function i(r,e){e=e|0;for(var o=Math.max(r.length-e,0),s=Array(o),v=0;v<o;v++)s[v]=r[e+v];return s}var u=function(r){var e=i(arguments,1);return function(){var o=i(arguments);return r.apply(null,e.concat(o))}},n=function(r){return function(){var e=i(arguments),o=e.pop();r.call(this,e,o)}};function t(r){var e=typeof r;return r!=null&&(e=="object"||e=="function")}var f=typeof setImmediate=="function"&&setImmediate,l=typeof process=="object"&&typeof process.nextTick=="function";function d(r){setTimeout(r,0)}function h(r){return function(e){var o=i(arguments,1);r(function(){e.apply(null,o)})}}var c;f?c=setImmediate:l?c=process.nextTick:c=d;var y=h(c);function k(r){return n(function(e,o){var s;try{s=r.apply(this,e)}catch(v){return o(v)}t(s)&&typeof s.then=="function"?s.then(function(v){x(o,null,v)},function(v){x(o,v.message?v:new Error(v))}):o(null,s)})}function x(r,e,o){try{r(e,o)}catch(s){y(E,s)}}function E(r){throw r}var $=typeof Symbol=="function";function H(r){return $&&r[Symbol.toStringTag]==="AsyncFunction"}function b(r){return H(r)?k(r):r}function F(r){return function(e){var o=i(arguments,1),s=n(function(v,p){var _=this;return r(e,function(w,C){b(w).apply(_,v.concat(C))},p)});return o.length?s.apply(this,o):s}}var I=typeof Zr=="object"&&Zr&&Zr.Object===Object&&Zr,D=typeof self=="object"&&self&&self.Object===Object&&self,T=I||D||Function("return this")(),A=T.Symbol,j=Object.prototype,B=j.hasOwnProperty,O=j.toString,R=A?A.toStringTag:void 0;function V(r){var e=B.call(r,R),o=r[R];try{r[R]=void 0;var s=!0}catch{}var v=O.call(r);return s&&(e?r[R]=o:delete r[R]),v}var er=Object.prototype,te=er.toString;function Yn(r){return te.call(r)}var Jn="[object Null]",Xn="[object Undefined]",Ye=A?A.toStringTag:void 0;function Br(r){return r==null?r===void 0?Xn:Jn:Ye&&Ye in Object(r)?V(r):Yn(r)}var Qn="[object AsyncFunction]",Zn="[object Function]",ri="[object GeneratorFunction]",ei="[object Proxy]";function ti(r){if(!t(r))return!1;var e=Br(r);return e==Zn||e==ri||e==Qn||e==ei}var ni=9007199254740991;function Je(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=ni}function dr(r){return r!=null&&Je(r.length)&&!ti(r)}var ne={};function P(){}function ir(r){return function(){if(r!==null){var e=r;r=null,e.apply(this,arguments)}}}var ie=typeof Symbol=="function"&&Symbol.iterator,ii=function(r){return ie&&r[ie]&&r[ie]()};function ai(r,e){for(var o=-1,s=Array(r);++o<r;)s[o]=e(o);return s}function Fr(r){return r!=null&&typeof r=="object"}var oi="[object Arguments]";function Xe(r){return Fr(r)&&Br(r)==oi}var Qe=Object.prototype,ui=Qe.hasOwnProperty,si=Qe.propertyIsEnumerable,fi=Xe((function(){return arguments})())?Xe:function(r){return Fr(r)&&ui.call(r,"callee")&&!si.call(r,"callee")},J=Array.isArray;function ci(){return!1}var Ze=typeof a=="object"&&a&&!a.nodeType&&a,rt=Ze&&!0&&m&&!m.nodeType&&m,li=rt&&rt.exports===Ze,et=li?T.Buffer:void 0,hi=et?et.isBuffer:void 0,vi=hi||ci,pi=9007199254740991,yi=/^(?:0|[1-9]\d*)$/;function di(r,e){var o=typeof r;return e=e??pi,!!e&&(o=="number"||o!="symbol"&&yi.test(r))&&r>-1&&r%1==0&&r<e}var gi="[object Arguments]",mi="[object Array]",_i="[object Boolean]",bi="[object Date]",wi="[object Error]",ki="[object Function]",Ai="[object Map]",Ci="[object Number]",Si="[object Object]",Ti="[object RegExp]",Di="[object Set]",ji="[object String]",Bi="[object WeakMap]",Fi="[object ArrayBuffer]",Ii="[object DataView]",Li="[object Float32Array]",Ei="[object Float64Array]",Oi="[object Int8Array]",xi="[object Int16Array]",Ri="[object Int32Array]",zi="[object Uint8Array]",Pi="[object Uint8ClampedArray]",Ui="[object Uint16Array]",qi="[object Uint32Array]",U={};U[Li]=U[Ei]=U[Oi]=U[xi]=U[Ri]=U[zi]=U[Pi]=U[Ui]=U[qi]=!0,U[gi]=U[mi]=U[Fi]=U[_i]=U[Ii]=U[bi]=U[wi]=U[ki]=U[Ai]=U[Ci]=U[Si]=U[Ti]=U[Di]=U[ji]=U[Bi]=!1;function Mi(r){return Fr(r)&&Je(r.length)&&!!U[Br(r)]}function Ni(r){return function(e){return r(e)}}var tt=typeof a=="object"&&a&&!a.nodeType&&a,gr=tt&&!0&&m&&!m.nodeType&&m,$i=gr&&gr.exports===tt,ae=$i&&I.process,nt=(function(){try{var r=gr&&gr.require&&gr.require("util").types;return r||ae&&ae.binding&&ae.binding("util")}catch{}})(),it=nt&&nt.isTypedArray,Vi=it?Ni(it):Mi,Gi=Object.prototype,Ki=Gi.hasOwnProperty;function Wi(r,e){var o=J(r),s=!o&&fi(r),v=!o&&!s&&vi(r),p=!o&&!s&&!v&&Vi(r),_=o||s||v||p,w=_?ai(r.length,String):[],C=w.length;for(var L in r)Ki.call(r,L)&&!(_&&(L=="length"||v&&(L=="offset"||L=="parent")||p&&(L=="buffer"||L=="byteLength"||L=="byteOffset")||di(L,C)))&&w.push(L);return w}var Hi=Object.prototype;function Yi(r){var e=r&&r.constructor,o=typeof e=="function"&&e.prototype||Hi;return r===o}function Ji(r,e){return function(o){return r(e(o))}}var Xi=Ji(Object.keys,Object),Qi=Object.prototype,Zi=Qi.hasOwnProperty;function ra(r){if(!Yi(r))return Xi(r);var e=[];for(var o in Object(r))Zi.call(r,o)&&o!="constructor"&&e.push(o);return e}function oe(r){return dr(r)?Wi(r):ra(r)}function ea(r){var e=-1,o=r.length;return function(){return++e<o?{value:r[e],key:e}:null}}function ta(r){var e=-1;return function(){var s=r.next();return s.done?null:(e++,{value:s.value,key:e})}}function na(r){var e=oe(r),o=-1,s=e.length;return function v(){var p=e[++o];return p==="__proto__"?v():o<s?{value:r[p],key:p}:null}}function ia(r){if(dr(r))return ea(r);var e=ii(r);return e?ta(e):na(r)}function Q(r){return function(){if(r===null)throw new Error("Callback was already called.");var e=r;r=null,e.apply(this,arguments)}}function Ir(r){return function(e,o,s){if(s=ir(s||P),r<=0||!e)return s(null);var v=ia(e),p=!1,_=0,w=!1;function C(S,z){if(_-=1,S)p=!0,s(S);else{if(z===ne||p&&_<=0)return p=!0,s(null);w||L()}}function L(){for(w=!0;_<r&&!p;){var S=v();if(S===null){p=!0,_<=0&&s(null);return}_+=1,o(S.value,S.key,Q(C))}w=!1}L()}}function ur(r,e,o,s){Ir(e)(r,b(o),s)}function K(r,e){return function(o,s,v){return r(o,e,s,v)}}function aa(r,e,o){o=ir(o||P);var s=0,v=0,p=r.length;p===0&&o(null);function _(w,C){w?o(w):(++v===p||C===ne)&&o(null)}for(;s<p;s++)e(r[s],s,Q(_))}var oa=K(ur,1/0),ar=function(r,e,o){var s=dr(r)?aa:oa;s(r,b(e),o)};function sr(r){return function(e,o,s){return r(ar,e,b(o),s)}}function at(r,e,o,s){s=s||P,e=e||[];var v=[],p=0,_=b(o);r(e,function(w,C,L){var S=p++;_(w,function(z,q){v[S]=q,L(z)})},function(w){s(w,v)})}var Lr=sr(at),ot=F(Lr);function fr(r){return function(e,o,s,v){return r(Ir(o),e,b(s),v)}}var cr=fr(at),ue=K(cr,1),ut=F(ue);function Er(r,e){for(var o=-1,s=r==null?0:r.length;++o<s&&e(r[o],o,r)!==!1;);return r}function ua(r){return function(e,o,s){for(var v=-1,p=Object(e),_=s(e),w=_.length;w--;){var C=_[++v];if(o(p[C],C,p)===!1)break}return e}}var sa=ua();function mr(r,e){return r&&sa(r,e,oe)}function fa(r,e,o,s){for(var v=r.length,p=o+-1;++p<v;)if(e(r[p],p,r))return p;return-1}function ca(r){return r!==r}function la(r,e,o){for(var s=o-1,v=r.length;++s<v;)if(r[s]===e)return s;return-1}function Or(r,e,o){return e===e?la(r,e,o):fa(r,ca,o)}var se=function(r,e,o){typeof e=="function"&&(o=e,e=null),o=ir(o||P);var s=oe(r),v=s.length;if(!v)return o(null);e||(e=v);var p={},_=0,w=!1,C=Object.create(null),L=[],S=[],z={};mr(r,function(M,N){if(!J(M)){q(N,[M]),S.push(N);return}var G=M.slice(0,M.length-1),tr=G.length;if(tr===0){q(N,M),S.push(N);return}z[N]=tr,Er(G,function(pr){if(!r[pr])throw new Error("async.auto task `"+N+"` has a non-existent dependency `"+pr+"` in "+G.join(", "));Z(pr,function(){tr--,tr===0&&q(N,M)})})}),to(),W();function q(M,N){L.push(function(){rr(M,N)})}function W(){if(L.length===0&&_===0)return o(null,p);for(;L.length&&_<e;){var M=L.shift();M()}}function Z(M,N){var G=C[M];G||(G=C[M]=[]),G.push(N)}function Y(M){var N=C[M]||[];Er(N,function(G){G()}),W()}function rr(M,N){if(!w){var G=Q(function(pr,be){if(_--,arguments.length>2&&(be=i(arguments,1)),pr){var we={};mr(p,function(io,ao){we[ao]=io}),we[M]=be,w=!0,C=Object.create(null),o(pr,we)}else p[M]=be,Y(M)});_++;var tr=b(N[N.length-1]);N.length>1?tr(p,G):tr(G)}}function to(){for(var M,N=0;S.length;)M=S.pop(),N++,Er(no(M),function(G){--z[G]===0&&S.push(G)});if(N!==v)throw new Error("async.auto cannot execute tasks due to a recursive dependency")}function no(M){var N=[];return mr(r,function(G,tr){J(G)&&Or(G,M,0)>=0&&N.push(tr)}),N}};function lr(r,e){for(var o=-1,s=r==null?0:r.length,v=Array(s);++o<s;)v[o]=e(r[o],o,r);return v}var ha="[object Symbol]";function va(r){return typeof r=="symbol"||Fr(r)&&Br(r)==ha}var st=A?A.prototype:void 0,ft=st?st.toString:void 0;function fe(r){if(typeof r=="string")return r;if(J(r))return lr(r,fe)+"";if(va(r))return ft?ft.call(r):"";var e=r+"";return e=="0"&&1/r==-1/0?"-0":e}function pa(r,e,o){var s=-1,v=r.length;e<0&&(e=-e>v?0:v+e),o=o>v?v:o,o<0&&(o+=v),v=e>o?0:o-e>>>0,e>>>=0;for(var p=Array(v);++s<v;)p[s]=r[s+e];return p}function ya(r,e,o){var s=r.length;return o=o===void 0?s:o,!e&&o>=s?r:pa(r,e,o)}function da(r,e){for(var o=r.length;o--&&Or(e,r[o],0)>-1;);return o}function ga(r,e){for(var o=-1,s=r.length;++o<s&&Or(e,r[o],0)>-1;);return o}function ma(r){return r.split("")}var _a="\\ud800-\\udfff",ba="\\u0300-\\u036f",wa="\\ufe20-\\ufe2f",ka="\\u20d0-\\u20ff",Aa=ba+wa+ka,Ca="\\ufe0e\\ufe0f",Sa="\\u200d",Ta=RegExp("["+Sa+_a+Aa+Ca+"]");function Da(r){return Ta.test(r)}var ct="\\ud800-\\udfff",ja="\\u0300-\\u036f",Ba="\\ufe20-\\ufe2f",Fa="\\u20d0-\\u20ff",Ia=ja+Ba+Fa,La="\\ufe0e\\ufe0f",Ea="["+ct+"]",ce="["+Ia+"]",le="\\ud83c[\\udffb-\\udfff]",Oa="(?:"+ce+"|"+le+")",lt="[^"+ct+"]",ht="(?:\\ud83c[\\udde6-\\uddff]){2}",vt="[\\ud800-\\udbff][\\udc00-\\udfff]",xa="\\u200d",pt=Oa+"?",yt="["+La+"]?",Ra="(?:"+xa+"(?:"+[lt,ht,vt].join("|")+")"+yt+pt+")*",za=yt+pt+Ra,Pa="(?:"+[lt+ce+"?",ce,ht,vt,Ea].join("|")+")",Ua=RegExp(le+"(?="+le+")|"+Pa+za,"g");function qa(r){return r.match(Ua)||[]}function dt(r){return Da(r)?qa(r):ma(r)}function Ma(r){return r==null?"":fe(r)}var Na=/^\s+|\s+$/g;function $a(r,e,o){if(r=Ma(r),r&&e===void 0)return r.replace(Na,"");if(!r||!(e=fe(e)))return r;var s=dt(r),v=dt(e),p=ga(s,v),_=da(s,v)+1;return ya(s,p,_).join("")}var Va=/^(?:async\s+)?(function)?\s*[^\(]*\(\s*([^\)]*)\)/m,Ga=/,/,Ka=/(=.+)?(\s*)$/,Wa=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/mg;function Ha(r){return r=r.toString().replace(Wa,""),r=r.match(Va)[2].replace(" ",""),r=r?r.split(Ga):[],r=r.map(function(e){return $a(e.replace(Ka,""))}),r}function gt(r,e){var o={};mr(r,function(s,v){var p,_=H(s),w=!_&&s.length===1||_&&s.length===0;if(J(s))p=s.slice(0,-1),s=s[s.length-1],o[v]=p.concat(p.length>0?C:s);else if(w)o[v]=s;else{if(p=Ha(s),s.length===0&&!_&&p.length===0)throw new Error("autoInject task functions require explicit parameters.");_||p.pop(),o[v]=p.concat(C)}function C(L,S){var z=lr(p,function(q){return L[q]});z.push(S),b(s).apply(null,z)}}),se(o,e)}function X(){this.head=this.tail=null,this.length=0}function mt(r,e){r.length=1,r.head=r.tail=e}X.prototype.removeLink=function(r){return r.prev?r.prev.next=r.next:this.head=r.next,r.next?r.next.prev=r.prev:this.tail=r.prev,r.prev=r.next=null,this.length-=1,r},X.prototype.empty=function(){for(;this.head;)this.shift();return this},X.prototype.insertAfter=function(r,e){e.prev=r,e.next=r.next,r.next?r.next.prev=e:this.tail=e,r.next=e,this.length+=1},X.prototype.insertBefore=function(r,e){e.prev=r.prev,e.next=r,r.prev?r.prev.next=e:this.head=e,r.prev=e,this.length+=1},X.prototype.unshift=function(r){this.head?this.insertBefore(this.head,r):mt(this,r)},X.prototype.push=function(r){this.tail?this.insertAfter(this.tail,r):mt(this,r)},X.prototype.shift=function(){return this.head&&this.removeLink(this.head)},X.prototype.pop=function(){return this.tail&&this.removeLink(this.tail)},X.prototype.toArray=function(){for(var r=Array(this.length),e=this.head,o=0;o<this.length;o++)r[o]=e.data,e=e.next;return r},X.prototype.remove=function(r){for(var e=this.head;e;){var o=e.next;r(e)&&this.removeLink(e),e=o}return this};function _t(r,e,o){if(e==null)e=1;else if(e===0)throw new Error("Concurrency must not be zero");var s=b(r),v=0,p=[],_=!1;function w(z,q,W){if(W!=null&&typeof W!="function")throw new Error("task callback must be a function");if(S.started=!0,J(z)||(z=[z]),z.length===0&&S.idle())return y(function(){S.drain()});for(var Z=0,Y=z.length;Z<Y;Z++){var rr={data:z[Z],callback:W||P};q?S._tasks.unshift(rr):S._tasks.push(rr)}_||(_=!0,y(function(){_=!1,S.process()}))}function C(z){return function(q){v-=1;for(var W=0,Z=z.length;W<Z;W++){var Y=z[W],rr=Or(p,Y,0);rr===0?p.shift():rr>0&&p.splice(rr,1),Y.callback.apply(Y,arguments),q!=null&&S.error(q,Y.data)}v<=S.concurrency-S.buffer&&S.unsaturated(),S.idle()&&S.drain(),S.process()}}var L=!1,S={_tasks:new X,concurrency:e,payload:o,saturated:P,unsaturated:P,buffer:e/4,empty:P,drain:P,error:P,started:!1,paused:!1,push:function(z,q){w(z,!1,q)},kill:function(){S.drain=P,S._tasks.empty()},unshift:function(z,q){w(z,!0,q)},remove:function(z){S._tasks.remove(z)},process:function(){if(!L){for(L=!0;!S.paused&&v<S.concurrency&&S._tasks.length;){var z=[],q=[],W=S._tasks.length;S.payload&&(W=Math.min(W,S.payload));for(var Z=0;Z<W;Z++){var Y=S._tasks.shift();z.push(Y),p.push(Y),q.push(Y.data)}v+=1,S._tasks.length===0&&S.empty(),v===S.concurrency&&S.saturated();var rr=Q(C(z));s(q,rr)}L=!1}},length:function(){return S._tasks.length},running:function(){return v},workersList:function(){return p},idle:function(){return S._tasks.length+v===0},pause:function(){S.paused=!0},resume:function(){S.paused!==!1&&(S.paused=!1,y(S.process))}};return S}function bt(r,e){return _t(r,1,e)}var hr=K(ur,1);function or(r,e,o,s){s=ir(s||P);var v=b(o);hr(r,function(p,_,w){v(e,p,function(C,L){e=L,w(C)})},function(p){s(p,e)})}function he(){var r=lr(arguments,b);return function(){var e=i(arguments),o=this,s=e[e.length-1];typeof s=="function"?e.pop():s=P,or(r,e,function(v,p,_){p.apply(o,v.concat(function(w){var C=i(arguments,1);_(w,C)}))},function(v,p){s.apply(o,[v].concat(p))})}}var wt=function(){return he.apply(null,i(arguments).reverse())},Ya=Array.prototype.concat,xr=function(r,e,o,s){s=s||P;var v=b(o);cr(r,e,function(p,_){v(p,function(w){return w?_(w):_(null,i(arguments,1))})},function(p,_){for(var w=[],C=0;C<_.length;C++)_[C]&&(w=Ya.apply(w,_[C]));return s(p,w)})},kt=K(xr,1/0),At=K(xr,1),Ct=function(){var r=i(arguments),e=[null].concat(r);return function(){var o=arguments[arguments.length-1];return o.apply(this,e)}};function _r(r){return r}function vr(r,e){return function(o,s,v,p){p=p||P;var _=!1,w;o(s,function(C,L,S){v(C,function(z,q){z?S(z):r(q)&&!w?(_=!0,w=e(!0,C),S(null,ne)):S()})},function(C){C?p(C):p(null,_?w:e(!1))})}}function St(r,e){return e}var Rr=sr(vr(_r,St)),br=fr(vr(_r,St)),zr=K(br,1);function Tt(r){return function(e){var o=i(arguments,1);o.push(function(s){var v=i(arguments,1);typeof console=="object"&&(s?console.error&&console.error(s):console[r]&&Er(v,function(p){console[r](p)}))}),b(e).apply(null,o)}}var Dt=Tt("dir");function jt(r,e,o){o=Q(o||P);var s=b(r),v=b(e);function p(w){if(w)return o(w);var C=i(arguments,1);C.push(_),v.apply(this,C)}function _(w,C){if(w)return o(w);if(!C)return o(null);s(p)}_(null,!0)}function ve(r,e,o){o=Q(o||P);var s=b(r),v=function(p){if(p)return o(p);var _=i(arguments,1);if(e.apply(this,_))return s(v);o.apply(null,[null].concat(_))};s(v)}function Bt(r,e,o){ve(r,function(){return!e.apply(this,arguments)},o)}function Ft(r,e,o){o=Q(o||P);var s=b(e),v=b(r);function p(w){if(w)return o(w);v(_)}function _(w,C){if(w)return o(w);if(!C)return o(null);s(p)}v(_)}function It(r){return function(e,o,s){return r(e,s)}}function Pr(r,e,o){ar(r,It(b(e)),o)}function wr(r,e,o,s){Ir(e)(r,It(b(o)),s)}var kr=K(wr,1);function pe(r){return H(r)?r:n(function(e,o){var s=!0;e.push(function(){var v=arguments;s?y(function(){o.apply(null,v)}):o.apply(null,v)}),r.apply(this,e),s=!1})}function Ur(r){return!r}var qr=sr(vr(Ur,Ur)),Ar=fr(vr(Ur,Ur)),Mr=K(Ar,1);function Lt(r){return function(e){return e?.[r]}}function Ja(r,e,o,s){var v=new Array(e.length);r(e,function(p,_,w){o(p,function(C,L){v[_]=!!L,w(C)})},function(p){if(p)return s(p);for(var _=[],w=0;w<e.length;w++)v[w]&&_.push(e[w]);s(null,_)})}function Xa(r,e,o,s){var v=[];r(e,function(p,_,w){o(p,function(C,L){C?w(C):(L&&v.push({index:_,value:p}),w())})},function(p){p?s(p):s(null,lr(v.sort(function(_,w){return _.index-w.index}),Lt("value")))})}function ye(r,e,o,s){var v=dr(e)?Ja:Xa;v(r,e,b(o),s||P)}var Nr=sr(ye),Cr=fr(ye),$r=K(Cr,1);function Et(r,e){var o=Q(e||P),s=b(pe(r));function v(p){if(p)return o(p);s(v)}v()}var Vr=function(r,e,o,s){s=s||P;var v=b(o);cr(r,e,function(p,_){v(p,function(w,C){return w?_(w):_(null,{key:C,val:p})})},function(p,_){for(var w={},C=Object.prototype.hasOwnProperty,L=0;L<_.length;L++)if(_[L]){var S=_[L].key,z=_[L].val;C.call(w,S)?w[S].push(z):w[S]=[z]}return s(p,w)})},Ot=K(Vr,1/0),xt=K(Vr,1),Rt=Tt("log");function Gr(r,e,o,s){s=ir(s||P);var v={},p=b(o);ur(r,e,function(_,w,C){p(_,w,function(L,S){if(L)return C(L);v[w]=S,C()})},function(_){s(_,v)})}var zt=K(Gr,1/0),Pt=K(Gr,1);function Ut(r,e){return e in r}function qt(r,e){var o=Object.create(null),s=Object.create(null);e=e||_r;var v=b(r),p=n(function(w,C){var L=e.apply(null,w);Ut(o,L)?y(function(){C.apply(null,o[L])}):Ut(s,L)?s[L].push(C):(s[L]=[C],v.apply(null,w.concat(function(){var S=i(arguments);o[L]=S;var z=s[L];delete s[L];for(var q=0,W=z.length;q<W;q++)z[q].apply(null,S)})))});return p.memo=o,p.unmemoized=r,p}var Kr;l?Kr=process.nextTick:f?Kr=setImmediate:Kr=d;var Mt=h(Kr);function de(r,e,o){o=o||P;var s=dr(e)?[]:{};r(e,function(v,p,_){b(v)(function(w,C){arguments.length>2&&(C=i(arguments,1)),s[p]=C,_(w)})},function(v){o(v,s)})}function Nt(r,e){de(ar,r,e)}function $t(r,e,o){de(Ir(e),r,o)}var ge=function(r,e){var o=b(r);return _t(function(s,v){o(s[0],v)},e,1)},Vt=function(r,e){var o=ge(r,e);return o.push=function(s,v,p){if(p==null&&(p=P),typeof p!="function")throw new Error("task callback must be a function");if(o.started=!0,J(s)||(s=[s]),s.length===0)return y(function(){o.drain()});v=v||0;for(var _=o._tasks.head;_&&v>=_.priority;)_=_.next;for(var w=0,C=s.length;w<C;w++){var L={data:s[w],priority:v,callback:p};_?o._tasks.insertBefore(_,L):o._tasks.push(L)}y(o.process)},delete o.unshift,o};function Gt(r,e){if(e=ir(e||P),!J(r))return e(new TypeError("First argument to race must be an array of functions"));if(!r.length)return e();for(var o=0,s=r.length;o<s;o++)b(r[o])(e)}function Wr(r,e,o,s){var v=i(r).reverse();or(v,e,o,s)}function Hr(r){var e=b(r);return n(function(s,v){return s.push(function(_,w){if(_)v(null,{error:_});else{var C;arguments.length<=2?C=w:C=i(arguments,1),v(null,{value:C})}}),e.apply(this,s)})}function Kt(r){var e;return J(r)?e=lr(r,Hr):(e={},mr(r,function(o,s){e[s]=Hr.call(this,o)})),e}function Wt(r,e,o,s){ye(r,e,function(v,p){o(v,function(_,w){p(_,!w)})},s)}var Ht=sr(Wt),me=fr(Wt),Yt=K(me,1);function Jt(r){return function(){return r}}function Yr(r,e,o){var s=5,v=0,p={times:s,intervalFunc:Jt(v)};function _(S,z){if(typeof z=="object")S.times=+z.times||s,S.intervalFunc=typeof z.interval=="function"?z.interval:Jt(+z.interval||v),S.errorFilter=z.errorFilter;else if(typeof z=="number"||typeof z=="string")S.times=+z||s;else throw new Error("Invalid arguments for async.retry")}if(arguments.length<3&&typeof r=="function"?(o=e||P,e=r):(_(p,r),o=o||P),typeof e!="function")throw new Error("Invalid arguments for async.retry");var w=b(e),C=1;function L(){w(function(S){S&&C++<p.times&&(typeof p.errorFilter!="function"||p.errorFilter(S))?setTimeout(L,p.intervalFunc(C)):o.apply(null,arguments)})}L()}var Xt=function(r,e){e||(e=r,r=null);var o=b(e);return n(function(s,v){function p(_){o.apply(null,s.concat(_))}r?Yr(r,p,v):Yr(p,v)})};function Qt(r,e){de(hr,r,e)}var Jr=sr(vr(Boolean,_r)),Sr=fr(vr(Boolean,_r)),Xr=K(Sr,1);function Zt(r,e,o){var s=b(e);Lr(r,function(p,_){s(p,function(w,C){if(w)return _(w);_(null,{value:p,criteria:C})})},function(p,_){if(p)return o(p);o(null,lr(_.sort(v),Lt("value")))});function v(p,_){var w=p.criteria,C=_.criteria;return w<C?-1:w>C?1:0}}function rn(r,e,o){var s=b(r);return n(function(v,p){var _=!1,w;function C(){var L=r.name||"anonymous",S=new Error('Callback function "'+L+'" timed out.');S.code="ETIMEDOUT",o&&(S.info=o),_=!0,p(S)}v.push(function(){_||(p.apply(null,arguments),clearTimeout(w))}),w=setTimeout(C,e),s.apply(null,v)})}var Qa=Math.ceil,Za=Math.max;function ro(r,e,o,s){for(var v=-1,p=Za(Qa((e-r)/o),0),_=Array(p);p--;)_[++v]=r,r+=o;return _}function Qr(r,e,o,s){var v=b(o);cr(ro(0,r,1),e,v,s)}var en=K(Qr,1/0),tn=K(Qr,1);function nn(r,e,o,s){arguments.length<=3&&(s=o,o=e,e=J(r)?[]:{}),s=ir(s||P);var v=b(o);ar(r,function(p,_,w){v(e,p,_,w)},function(p){s(p,e)})}function an(r,e){var o=null,s;e=e||P,kr(r,function(v,p){b(v)(function(_,w){arguments.length>2?s=i(arguments,1):s=w,o=_,p(!_)})},function(){e(o,s)})}function on(r){return function(){return(r.unmemoized||r).apply(null,arguments)}}function _e(r,e,o){o=Q(o||P);var s=b(e);if(!r())return o(null);var v=function(p){if(p)return o(p);if(r())return s(v);var _=i(arguments,1);o.apply(null,[null].concat(_))};s(v)}function un(r,e,o){_e(function(){return!r.apply(this,arguments)},e,o)}var sn=function(r,e){if(e=ir(e||P),!J(r))return e(new Error("First argument to waterfall must be an array of functions"));if(!r.length)return e();var o=0;function s(p){var _=b(r[o++]);p.push(Q(v)),_.apply(null,p)}function v(p){if(p||o===r.length)return e.apply(null,arguments);s(i(arguments,1))}s([])},eo={apply:u,applyEach:ot,applyEachSeries:ut,asyncify:k,auto:se,autoInject:gt,cargo:bt,compose:wt,concat:kt,concatLimit:xr,concatSeries:At,constant:Ct,detect:Rr,detectLimit:br,detectSeries:zr,dir:Dt,doDuring:jt,doUntil:Bt,doWhilst:ve,during:Ft,each:Pr,eachLimit:wr,eachOf:ar,eachOfLimit:ur,eachOfSeries:hr,eachSeries:kr,ensureAsync:pe,every:qr,everyLimit:Ar,everySeries:Mr,filter:Nr,filterLimit:Cr,filterSeries:$r,forever:Et,groupBy:Ot,groupByLimit:Vr,groupBySeries:xt,log:Rt,map:Lr,mapLimit:cr,mapSeries:ue,mapValues:zt,mapValuesLimit:Gr,mapValuesSeries:Pt,memoize:qt,nextTick:Mt,parallel:Nt,parallelLimit:$t,priorityQueue:Vt,queue:ge,race:Gt,reduce:or,reduceRight:Wr,reflect:Hr,reflectAll:Kt,reject:Ht,rejectLimit:me,rejectSeries:Yt,retry:Yr,retryable:Xt,seq:he,series:Qt,setImmediate:y,some:Jr,someLimit:Sr,someSeries:Xr,sortBy:Zt,timeout:rn,times:en,timesLimit:Qr,timesSeries:tn,transform:nn,tryEach:an,unmemoize:on,until:un,waterfall:sn,whilst:_e,all:qr,allLimit:Ar,allSeries:Mr,any:Jr,anyLimit:Sr,anySeries:Xr,find:Rr,findLimit:br,findSeries:zr,forEach:Pr,forEachSeries:kr,forEachLimit:wr,forEachOf:ar,forEachOfSeries:hr,forEachOfLimit:ur,inject:or,foldl:or,foldr:Wr,select:Nr,selectLimit:Cr,selectSeries:$r,wrapSync:k};a.default=eo,a.apply=u,a.applyEach=ot,a.applyEachSeries=ut,a.asyncify=k,a.auto=se,a.autoInject=gt,a.cargo=bt,a.compose=wt,a.concat=kt,a.concatLimit=xr,a.concatSeries=At,a.constant=Ct,a.detect=Rr,a.detectLimit=br,a.detectSeries=zr,a.dir=Dt,a.doDuring=jt,a.doUntil=Bt,a.doWhilst=ve,a.during=Ft,a.each=Pr,a.eachLimit=wr,a.eachOf=ar,a.eachOfLimit=ur,a.eachOfSeries=hr,a.eachSeries=kr,a.ensureAsync=pe,a.every=qr,a.everyLimit=Ar,a.everySeries=Mr,a.filter=Nr,a.filterLimit=Cr,a.filterSeries=$r,a.forever=Et,a.groupBy=Ot,a.groupByLimit=Vr,a.groupBySeries=xt,a.log=Rt,a.map=Lr,a.mapLimit=cr,a.mapSeries=ue,a.mapValues=zt,a.mapValuesLimit=Gr,a.mapValuesSeries=Pt,a.memoize=qt,a.nextTick=Mt,a.parallel=Nt,a.parallelLimit=$t,a.priorityQueue=Vt,a.queue=ge,a.race=Gt,a.reduce=or,a.reduceRight=Wr,a.reflect=Hr,a.reflectAll=Kt,a.reject=Ht,a.rejectLimit=me,a.rejectSeries=Yt,a.retry=Yr,a.retryable=Xt,a.seq=he,a.series=Qt,a.setImmediate=y,a.some=Jr,a.someLimit=Sr,a.someSeries=Xr,a.sortBy=Zt,a.timeout=rn,a.times=en,a.timesLimit=Qr,a.timesSeries=tn,a.transform=nn,a.tryEach=an,a.unmemoize=on,a.until=un,a.waterfall=sn,a.whilst=_e,a.all=qr,a.allLimit=Ar,a.allSeries=Mr,a.any=Jr,a.anyLimit=Sr,a.anySeries=Xr,a.find=Rr,a.findLimit=br,a.findSeries=zr,a.forEach=Pr,a.forEachSeries=kr,a.forEachLimit=wr,a.forEachOf=ar,a.forEachOfSeries=hr,a.forEachOfLimit=ur,a.inject=or,a.foldl=or,a.foldr=Wr,a.select=Nr,a.selectLimit=Cr,a.selectSeries=$r,a.wrapSync=k,Object.defineProperty(a,"__esModule",{value:!0})}))})(Dr,Dr.exports)),Dr.exports}var Ie={exports:{}},bn;function Nn(){return bn||(bn=1,(function(m){(function(){var g="\0",a=0,i=0,u=-1,n=!0,t=!0,f=4,l=4,d=2,h=function(b){b==null&&(b=1024);var F=function(B,O,R){for(var V=O;V<R;V++)B[V]=-V+1;if(0<j.array[j.array.length-1]){for(var er=j.array.length-2;0<j.array[er];)er--;B[O]=-er}},I=function(B,O,R){for(var V=O;V<R;V++)B[V]=-V-1},D=function(B){var O=B*d,R=k(A.signed,A.bytes,O);F(R,A.array.length,O),R.set(A.array),A.array=null,A.array=R;var V=k(j.signed,j.bytes,O);I(V,j.array.length,O),V.set(j.array),j.array=null,j.array=V},T=i+1,A={signed:n,bytes:f,array:k(n,f,b)},j={signed:t,bytes:l,array:k(t,l,b)};return A.array[i]=1,j.array[i]=i,F(A.array,i+1,A.array.length),I(j.array,i+1,j.array.length),{getBaseBuffer:function(){return A.array},getCheckBuffer:function(){return j.array},loadBaseBuffer:function(B){return A.array=B,this},loadCheckBuffer:function(B){return j.array=B,this},size:function(){return Math.max(A.array.length,j.array.length)},getBase:function(B){return A.array.length-1<B?-B+1:A.array[B]},getCheck:function(B){return j.array.length-1<B?-B-1:j.array[B]},setBase:function(B,O){A.array.length-1<B&&D(B),A.array[B]=O},setCheck:function(B,O){j.array.length-1<B&&D(B),j.array[B]=O},setFirstUnusedNode:function(B){T=B},getFirstUnusedNode:function(){return T},shrink:function(){for(var B=this.size()-1;!(0<=j.array[B]);)B--;A.array=A.array.subarray(0,B+2),j.array=j.array.subarray(0,B+2)},calc:function(){for(var B=0,O=j.array.length,R=0;R<O;R++)j.array[R]<0&&B++;return{all:O,unused:B,efficiency:(O-B)/O}},dump:function(){var B="",O="",R;for(R=0;R<A.array.length;R++)B=B+" "+this.getBase(R);for(R=0;R<j.array.length;R++)O=O+" "+this.getCheck(R);return console.log("base:"+B),console.log("chck:"+O),"base:"+B+" chck:"+O}}};function c(b){this.bc=h(b),this.keys=[]}c.prototype.append=function(b,F){return this.keys.push({k:b,v:F}),this},c.prototype.build=function(b,F){if(b==null&&(b=this.keys),b==null)return new y(this.bc);F==null&&(F=!1);var I=b.map(function(D){return{k:E(D.k+g),v:D.v}});return F?this.keys=I:this.keys=I.sort(function(D,T){for(var A=D.k,j=T.k,B=Math.min(A.length,j.length),O=0;O<B;O++)if(A[O]!==j[O])return A[O]-j[O];return A.length-j.length}),I=null,this._build(i,0,0,this.keys.length),new y(this.bc)},c.prototype._build=function(b,F,I,D){var T=this.getChildrenInfo(F,I,D),A=this.findAllocatableBase(T);this.setBC(b,T,A);for(var j=0;j<T.length;j=j+3){var B=T[j];if(B!==a){var O=T[j+1],R=T[j+2],V=A+B;this._build(V,F+1,O,R)}}},c.prototype.getChildrenInfo=function(b,F,I){var D=this.keys[F].k[b],T=0,A=new Int32Array(I*3);A[T++]=D,A[T++]=F;for(var j=F,B=F;j<F+I;j++){var O=this.keys[j].k[b];D!==O&&(A[T++]=j-B,A[T++]=O,A[T++]=j,D=O,B=j)}return A[T++]=j-B,A=A.subarray(0,T),A},c.prototype.setBC=function(b,F,I){var D=this.bc;D.setBase(b,I);var T;for(T=0;T<F.length;T=T+3){var A=F[T],j=I+A,B=-D.getBase(j),O=-D.getCheck(j);j!==D.getFirstUnusedNode()?D.setCheck(B,-O):D.setFirstUnusedNode(O),D.setBase(O,-B);var R=b;if(D.setCheck(j,R),A===a){var V=F[T+1],er=this.keys[V].v;er==null&&(er=0);var te=-er-1;D.setBase(j,te)}}},c.prototype.findAllocatableBase=function(b){for(var F=this.bc,I,D=F.getFirstUnusedNode();;){if(I=D-b[0],I<0){D=-F.getCheck(D);continue}for(var T=!0,A=0;A<b.length;A=A+3){var j=b[A],B=I+j;if(!this.isUnusedNode(B)){D=-F.getCheck(D),T=!1;break}}if(T)return I}},c.prototype.isUnusedNode=function(b){var F=this.bc,I=F.getCheck(b);return b===i?!1:I<0};function y(b){this.bc=b,this.bc.shrink()}y.prototype.contain=function(b){var F=this.bc;b+=g;for(var I=E(b),D=i,T=u,A=0;A<I.length;A++){var j=I[A];if(T=this.traverse(D,j),T===u)return!1;if(F.getBase(T)<=0)return!0;D=T}return!1},y.prototype.lookup=function(b){b+=g;for(var F=E(b),I=i,D=u,T=0;T<F.length;T++){var A=F[T];if(D=this.traverse(I,A),D===u)return u;I=D}var j=this.bc.getBase(D);return j<=0?-j-1:u},y.prototype.commonPrefixSearch=function(b){for(var F=E(b),I=i,D=u,T=[],A=0;A<F.length;A++){var j=F[A];if(D=this.traverse(I,j),D!==u){I=D;var B=this.traverse(D,a);if(B!==u){var O=this.bc.getBase(B),R={};O<=0&&(R.v=-O-1),R.k=$(x(F,0,A+1)),T.push(R)}continue}else break}return T},y.prototype.traverse=function(b,F){var I=this.bc.getBase(b)+F;return this.bc.getCheck(I)===b?I:u},y.prototype.size=function(){return this.bc.size()},y.prototype.calc=function(){return this.bc.calc()},y.prototype.dump=function(){return this.bc.dump()};var k=function(b,F,I){switch(F){case 1:return new Int8Array(I);case 2:return new Int16Array(I);case 4:return new Int32Array(I);default:throw new RangeError("Invalid newArray parameter element_bytes:"+F)}},x=function(b,F,I){var D=new ArrayBuffer(I),T=new Uint8Array(D,0,I),A=b.subarray(F,I);return T.set(A),T},E=function(b){for(var F=new Uint8Array(new ArrayBuffer(b.length*4)),I=0,D=0;I<b.length;){var T,A=b.charCodeAt(I++);if(A>=55296&&A<=56319){var j=A,B=b.charCodeAt(I++);if(B>=56320&&B<=57343)T=(j-55296)*1024+65536+(B-56320);else return null}else T=A;T<128?F[D++]=T:T<2048?(F[D++]=T>>>6|192,F[D++]=T&63|128):T<65536?(F[D++]=T>>>12|224,F[D++]=T>>6&63|128,F[D++]=T&63|128):T<1<<21&&(F[D++]=T>>>18|240,F[D++]=T>>12&63|128,F[D++]=T>>6&63|128,F[D++]=T&63|128)}return F.subarray(0,D)},$=function(b){for(var F="",I,D,T,A,j,B,O,R=0;R<b.length;)D=b[R++],D<128?I=D:D>>5===6?(T=b[R++],I=(D&31)<<6|T&63):D>>4===14?(T=b[R++],A=b[R++],I=(D&15)<<12|(T&63)<<6|A&63):(T=b[R++],A=b[R++],j=b[R++],I=(D&7)<<18|(T&63)<<12|(A&63)<<6|j&63),I<65536?F+=String.fromCharCode(I):(I-=65536,B=55296|I>>10,O=56320|I&1023,F+=String.fromCharCode(B,O));return F},H={builder:function(b){return new c(b)},load:function(b,F){var I=h(0);return I.loadBaseBuffer(b),I.loadCheckBuffer(F),new y(I)}};m.exports=H})()})(Ie)),Ie.exports}var Le,wn;function We(){if(wn)return Le;wn=1;var m=function(i){for(var u=new Uint8Array(i.length*4),n=0,t=0;n<i.length;){var f,l=i.charCodeAt(n++);if(l>=55296&&l<=56319){var d=l,h=i.charCodeAt(n++);if(h>=56320&&h<=57343)f=(d-55296)*1024+65536+(h-56320);else return null}else f=l;f<128?u[t++]=f:f<2048?(u[t++]=f>>>6|192,u[t++]=f&63|128):f<65536?(u[t++]=f>>>12|224,u[t++]=f>>6&63|128,u[t++]=f&63|128):f<1<<21&&(u[t++]=f>>>18|240,u[t++]=f>>12&63|128,u[t++]=f>>6&63|128,u[t++]=f&63|128)}return u.subarray(0,t)},g=function(i){for(var u="",n,t,f,l,d,h,c,y=0;y<i.length;)t=i[y++],t<128?n=t:t>>5===6?(f=i[y++],n=(t&31)<<6|f&63):t>>4===14?(f=i[y++],l=i[y++],n=(t&15)<<12|(f&63)<<6|l&63):(f=i[y++],l=i[y++],d=i[y++],n=(t&7)<<18|(f&63)<<12|(l&63)<<6|d&63),n<65536?u+=String.fromCharCode(n):(n-=65536,h=55296|n>>10,c=56320|n&1023,u+=String.fromCharCode(h,c));return u};function a(i){var u;if(i==null)u=1024*1024;else if(typeof i=="number")u=i;else if(i instanceof Uint8Array){this.buffer=i,this.position=0;return}else throw typeof i+" is invalid parameter type for ByteBuffer constructor";this.buffer=new Uint8Array(u),this.position=0}return a.prototype.size=function(){return this.buffer.length},a.prototype.reallocate=function(){var i=new Uint8Array(this.buffer.length*2);i.set(this.buffer),this.buffer=i},a.prototype.shrink=function(){return this.buffer=this.buffer.subarray(0,this.position),this.buffer},a.prototype.put=function(i){this.buffer.length<this.position+1&&this.reallocate(),this.buffer[this.position++]=i},a.prototype.get=function(i){return i==null&&(i=this.position,this.position+=1),this.buffer.length<i+1?0:this.buffer[i]},a.prototype.putShort=function(i){if(65535<i)throw i+" is over short value";var u=255&i,n=(65280&i)>>8;this.put(u),this.put(n)},a.prototype.getShort=function(i){if(i==null&&(i=this.position,this.position+=2),this.buffer.length<i+2)return 0;var u=this.buffer[i],n=this.buffer[i+1],t=(n<<8)+u;return t&32768&&(t=-(t-1^65535)),t},a.prototype.putInt=function(i){if(4294967295<i)throw i+" is over integer value";var u=255&i,n=(65280&i)>>8,t=(16711680&i)>>16,f=(4278190080&i)>>24;this.put(u),this.put(n),this.put(t),this.put(f)},a.prototype.getInt=function(i){if(i==null&&(i=this.position,this.position+=4),this.buffer.length<i+4)return 0;var u=this.buffer[i],n=this.buffer[i+1],t=this.buffer[i+2],f=this.buffer[i+3];return(f<<24)+(t<<16)+(n<<8)+u},a.prototype.readInt=function(){var i=this.position;return this.position+=4,this.getInt(i)},a.prototype.putString=function(i){for(var u=m(i),n=0;n<u.length;n++)this.put(u[n]);this.put(0)},a.prototype.getString=function(i){var u=[],n;for(i==null&&(i=this.position);!(this.buffer.length<i+1||(n=this.get(i++),n===0));)u.push(n);return this.position=i,g(u)},Le=a,Le}var Ee,kn;function He(){if(kn)return Ee;kn=1;var m=We();function g(){this.dictionary=new m(10*1024*1024),this.target_map={},this.pos_buffer=new m(10*1024*1024)}return g.prototype.buildDictionary=function(a){for(var i={},u=0;u<a.length;u++){var n=a[u];if(!(n.length<4)){var t=n[0],f=n[1],l=n[2],d=n[3],h=n.slice(4).join(",");(!isFinite(f)||!isFinite(l)||!isFinite(d))&&console.log(n);var c=this.put(f,l,d,t,h);i[c]=t}}return this.dictionary.shrink(),this.pos_buffer.shrink(),i},g.prototype.put=function(a,i,u,n,t){var f=this.dictionary.position,l=this.pos_buffer.position;return this.dictionary.putShort(a),this.dictionary.putShort(i),this.dictionary.putShort(u),this.dictionary.putInt(l),this.pos_buffer.putString(n+","+t),f},g.prototype.addMapping=function(a,i){var u=this.target_map[a];u==null&&(u=[]),u.push(i),this.target_map[a]=u},g.prototype.targetMapToBuffer=function(){var a=new m,i=Object.keys(this.target_map).length;a.putInt(i);for(var u in this.target_map){var n=this.target_map[u],t=n.length;a.putInt(parseInt(u)),a.putInt(t);for(var f=0;f<n.length;f++)a.putInt(n[f])}return a.shrink()},g.prototype.loadDictionary=function(a){return this.dictionary=new m(a),this},g.prototype.loadPosVector=function(a){return this.pos_buffer=new m(a),this},g.prototype.loadTargetMap=function(a){var i=new m(a);for(i.position=0,this.target_map={},i.readInt();!(i.buffer.length<i.position+1);)for(var u=i.readInt(),n=i.readInt(),t=0;t<n;t++){var f=i.readInt();this.addMapping(u,f)}return this},g.prototype.getFeatures=function(a){var i=parseInt(a);if(isNaN(i))return"";var u=this.dictionary.getInt(i+6);return this.pos_buffer.getString(u)},Ee=g,Ee}var Oe,An;function $n(){if(An)return Oe;An=1;function m(g,a){this.forward_dimension=g,this.backward_dimension=a,this.buffer=new Int16Array(g*a+2),this.buffer[0]=g,this.buffer[1]=a}return m.prototype.put=function(g,a,i){var u=g*this.backward_dimension+a+2;if(this.buffer.length<u+1)throw"ConnectionCosts buffer overflow";this.buffer[u]=i},m.prototype.get=function(g,a){var i=g*this.backward_dimension+a+2;if(this.buffer.length<i+1)throw"ConnectionCosts buffer overflow";return this.buffer[i]},m.prototype.loadConnectionCosts=function(g){this.forward_dimension=g[0],this.backward_dimension=g[1],this.buffer=g},Oe=m,Oe}var xe,Cn;function Vn(){if(Cn)return xe;Cn=1;function m(g,a,i,u,n){this.class_id=g,this.class_name=a,this.is_always_invoke=i,this.is_grouping=u,this.max_length=n}return xe=m,xe}var Re,Sn;function Gn(){if(Sn)return Re;Sn=1;var m=We(),g=Vn();function a(){this.map=[],this.lookup_table={}}return a.load=function(i){for(var u=new a,n=[],t=new m(i);t.position+1<t.size();){var f=n.length,l=t.get(),d=t.get(),h=t.getInt(),c=t.getString();n.push(new g(f,c,l,d,h))}return u.init(n),u},a.prototype.init=function(i){if(i!=null)for(var u=0;u<i.length;u++){var n=i[u];this.map[u]=n,this.lookup_table[n.class_name]=u}},a.prototype.getCharacterClass=function(i){return this.map[i]},a.prototype.lookup=function(i){var u=this.lookup_table[i];return u??null},a.prototype.toBuffer=function(){for(var i=new m,u=0;u<this.map.length;u++){var n=this.map[u];i.put(n.is_always_invoke),i.put(n.is_grouping),i.putInt(n.max_length),i.putString(n.class_name)}return i.shrink(),i.buffer},Re=a,Re}var ze,Tn;function Kn(){if(Tn)return ze;Tn=1;var m=Gn(),g=Vn(),a=Mn(),i="DEFAULT";function u(){this.character_category_map=new Uint8Array(65536),this.compatible_category_map=new Uint32Array(65536),this.invoke_definition_map=null}return u.load=function(n,t,f){var l=new u;return l.character_category_map=n,l.compatible_category_map=t,l.invoke_definition_map=m.load(f),l},u.parseCharCategory=function(n,t){var f=t[1],l=parseInt(t[2]),d=parseInt(t[3]),h=parseInt(t[4]);if(!isFinite(l)||l!==0&&l!==1)return console.log("char.def parse error. INVOKE is 0 or 1 in:"+l),null;if(!isFinite(d)||d!==0&&d!==1)return console.log("char.def parse error. GROUP is 0 or 1 in:"+d),null;if(!isFinite(h)||h<0)return console.log("char.def parse error. LENGTH is 1 to n:"+h),null;var c=l===1,y=d===1;return new g(n,f,c,y,h)},u.parseCategoryMapping=function(n){var t=parseInt(n[1]),f=n[2],l=3<n.length?n.slice(3):[];return(!isFinite(t)||t<0||t>65535)&&console.log("char.def parse error. CODE is invalid:"+t),{start:t,default:f,compatible:l}},u.parseRangeCategoryMapping=function(n){var t=parseInt(n[1]),f=parseInt(n[2]),l=n[3],d=4<n.length?n.slice(4):[];return(!isFinite(t)||t<0||t>65535)&&console.log("char.def parse error. CODE is invalid:"+t),(!isFinite(f)||f<0||f>65535)&&console.log("char.def parse error. CODE is invalid:"+f),{start:t,end:f,default:l,compatible:d}},u.prototype.initCategoryMappings=function(n){var t;if(n!=null)for(var f=0;f<n.length;f++){var l=n[f],d=l.end||l.start;for(t=l.start;t<=d;t++){this.character_category_map[t]=this.invoke_definition_map.lookup(l.default);for(var h=0;h<l.compatible.length;h++){var c=this.compatible_category_map[t],y=l.compatible[h];if(y!=null){var k=this.invoke_definition_map.lookup(y);if(k!=null){var x=1<<k;c=c|x,this.compatible_category_map[t]=c}}}}}var E=this.invoke_definition_map.lookup(i);if(E!=null)for(t=0;t<this.character_category_map.length;t++)this.character_category_map[t]===0&&(this.character_category_map[t]=1<<E)},u.prototype.lookupCompatibleCategory=function(n){var t=[],f=n.charCodeAt(0),l;if(f<this.compatible_category_map.length&&(l=this.compatible_category_map[f]),l==null||l===0)return t;for(var d=0;d<32;d++)if(l<<31-d>>>31===1){var h=this.invoke_definition_map.getCharacterClass(d);if(h==null)continue;t.push(h)}return t},u.prototype.lookup=function(n){var t,f=n.charCodeAt(0);return a.isSurrogatePair(n)?t=this.invoke_definition_map.lookup(i):f<this.character_category_map.length&&(t=this.character_category_map[f]),t==null&&(t=this.invoke_definition_map.lookup(i)),this.invoke_definition_map.getCharacterClass(t)},ze=u,ze}var Pe,Dn;function Wn(){if(Dn)return Pe;Dn=1;var m=He(),g=Kn(),a=We();function i(){this.dictionary=new a(10*1024*1024),this.target_map={},this.pos_buffer=new a(10*1024*1024),this.character_definition=null}return i.prototype=Object.create(m.prototype),i.prototype.characterDefinition=function(u){return this.character_definition=u,this},i.prototype.lookup=function(u){return this.character_definition.lookup(u)},i.prototype.lookupCompatibleCategory=function(u){return this.character_definition.lookupCompatibleCategory(u)},i.prototype.loadUnknownDictionaries=function(u,n,t,f,l,d){this.loadDictionary(u),this.loadPosVector(n),this.loadTargetMap(t),this.character_definition=g.load(f,l,d)},Pe=i,Pe}var Ue,jn;function Hn(){if(jn)return Ue;jn=1;var m=Nn(),g=He(),a=$n(),i=Wn();function u(n,t,f,l){n!=null?this.trie=n:this.trie=m.builder(0).build([{k:"",v:1}]),t!=null?this.token_info_dictionary=t:this.token_info_dictionary=new g,f!=null?this.connection_costs=f:this.connection_costs=new a(0,0),l!=null?this.unknown_dictionary=l:this.unknown_dictionary=new i}return u.prototype.loadTrie=function(n,t){return this.trie=m.load(n,t),this},u.prototype.loadTokenInfoDictionaries=function(n,t,f){return this.token_info_dictionary.loadDictionary(n),this.token_info_dictionary.loadPosVector(t),this.token_info_dictionary.loadTargetMap(f),this},u.prototype.loadConnectionCosts=function(n){return this.connection_costs.loadConnectionCosts(n),this},u.prototype.loadUnknownDictionaries=function(n,t,f,l,d,h){return this.unknown_dictionary.loadUnknownDictionaries(n,t,f,l,d,h),this},Ue=u,Ue}var qe,Bn;function mo(){if(Bn)return qe;Bn=1;var m=Un(),g=go(),a=Hn();function i(u){this.dic=new a,this.dic_path=u}return i.prototype.loadArrayBuffer=function(u,n){throw new Error("DictionaryLoader#loadArrayBuffer should be overwrite")},i.prototype.load=function(u){var n=this.dic,t=this.dic_path,f=this.loadArrayBuffer;g.parallel([function(l){g.map(["base.dat.gz","check.dat.gz"],function(d,h){f(m.join(t,d),function(c,y){if(c)return h(c);h(null,y)})},function(d,h){if(d)return l(d);var c=new Int32Array(h[0]),y=new Int32Array(h[1]);n.loadTrie(c,y),l(null)})},function(l){g.map(["tid.dat.gz","tid_pos.dat.gz","tid_map.dat.gz"],function(d,h){f(m.join(t,d),function(c,y){if(c)return h(c);h(null,y)})},function(d,h){if(d)return l(d);var c=new Uint8Array(h[0]),y=new Uint8Array(h[1]),k=new Uint8Array(h[2]);n.loadTokenInfoDictionaries(c,y,k),l(null)})},function(l){f(m.join(t,"cc.dat.gz"),function(d,h){if(d)return l(d);var c=new Int16Array(h);n.loadConnectionCosts(c),l(null)})},function(l){g.map(["unk.dat.gz","unk_pos.dat.gz","unk_map.dat.gz","unk_char.dat.gz","unk_compat.dat.gz","unk_invoke.dat.gz"],function(d,h){f(m.join(t,d),function(c,y){if(c)return h(c);h(null,y)})},function(d,h){if(d)return l(d);var c=new Uint8Array(h[0]),y=new Uint8Array(h[1]),k=new Uint8Array(h[2]),x=new Uint8Array(h[3]),E=new Uint32Array(h[4]),$=new Uint8Array(h[5]);n.loadUnknownDictionaries(c,y,k,x,E,$),l(null)})}],function(l){u(l,n)})},qe=i,qe}var Me,Fn;function _o(){if(Fn)return Me;Fn=1;var m=mo();function g(a){m.apply(this,[a])}return g.prototype=Object.create(m.prototype),g.prototype.loadArrayBuffer=function(a,i){var u=new XMLHttpRequest;u.open("GET",a,!0),u.responseType="arraybuffer",u.onload=function(){if(this.status>0&&this.status!==200){i(u.statusText,null);return}var n=this.response;const t=new DecompressionStream("gzip"),l=new Blob([n]).stream().pipeThrough(t);new Response(l).arrayBuffer().then(d=>{i(null,d)})},u.onerror=function(n){i(n,null)},u.send()},Me=g,Me}var Ne,In;function bo(){if(In)return Ne;In=1;var m=po(),g=_o();function a(i){i.dicPath==null?this.dic_path="dict/":this.dic_path=i.dicPath}return a.prototype.build=function(i){var u=new g(this.dic_path);u.load(function(n,t){i(n,new m(t))})},Ne=a,Ne}var $e,Ln;function wo(){if(Ln)return $e;Ln=1;var m=$n();function g(){this.lines=0,this.connection_cost=null}return g.prototype.putLine=function(a){if(this.lines===0){var i=a.split(" "),u=i[0],n=i[1];if(u<0||n<0)throw"Parse error of matrix.def";return this.connection_cost=new m(u,n),this.lines++,this}var t=a.split(" ");if(t.length!==3)return this;var f=parseInt(t[0]),l=parseInt(t[1]),d=parseInt(t[2]);if(f<0||l<0||!isFinite(f)||!isFinite(l)||this.connection_cost.forward_dimension<=f||this.connection_cost.backward_dimension<=l)throw"Parse error of matrix.def";return this.connection_cost.put(f,l,d),this.lines++,this},g.prototype.build=function(){return this.connection_cost},$e=g,$e}var Ve,En;function ko(){if(En)return Ve;En=1;var m=Kn(),g=Gn(),a=/^(\w+)\s+(\d)\s+(\d)\s+(\d)/,i=/^(0x[0-9A-F]{4})(?:\s+([^#\s]+))(?:\s+([^#\s]+))*/,u=/^(0x[0-9A-F]{4})\.\.(0x[0-9A-F]{4})(?:\s+([^#\s]+))(?:\s+([^#\s]+))*/;function n(){this.char_def=new m,this.char_def.invoke_definition_map=new g,this.character_category_definition=[],this.category_mapping=[]}return n.prototype.putLine=function(t){var f=a.exec(t);if(f!=null){var l=this.character_category_definition.length,d=m.parseCharCategory(l,f);if(d==null)return;this.character_category_definition.push(d);return}var h=i.exec(t);if(h!=null){var c=m.parseCategoryMapping(h);this.category_mapping.push(c)}var y=u.exec(t);if(y!=null){var k=m.parseRangeCategoryMapping(y);this.category_mapping.push(k)}},n.prototype.build=function(){return this.char_def.invoke_definition_map.init(this.character_category_definition),this.char_def.initCategoryMappings(this.category_mapping),this.char_def},Ve=n,Ve}var Ge,On;function Ao(){if(On)return Ge;On=1;var m=Nn(),g=Hn(),a=He(),i=wo(),u=ko(),n=Wn();function t(){this.tid_entries=[],this.unk_entries=[],this.cc_builder=new i,this.cd_builder=new u}return t.prototype.addTokenInfoDictionary=function(f){var l=f.split(",");return this.tid_entries.push(l),this},t.prototype.putCostMatrixLine=function(f){return this.cc_builder.putLine(f),this},t.prototype.putCharDefLine=function(f){return this.cd_builder.putLine(f),this},t.prototype.putUnkDefLine=function(f){return this.unk_entries.push(f.split(",")),this},t.prototype.build=function(){var f=this.buildTokenInfoDictionary(),l=this.buildUnknownDictionary();return new g(f.trie,f.token_info_dictionary,this.cc_builder.build(),l)},t.prototype.buildTokenInfoDictionary=function(){var f=new a,l=f.buildDictionary(this.tid_entries),d=this.buildDoubleArray();for(var h in l){var c=l[h],y=d.lookup(c);f.addMapping(y,h)}return{trie:d,token_info_dictionary:f}},t.prototype.buildUnknownDictionary=function(){var f=new n,l=f.buildDictionary(this.unk_entries),d=this.cd_builder.build();f.characterDefinition(d);for(var h in l){var c=l[h],y=d.invoke_definition_map.lookup(c);f.addMapping(y,h)}return f},t.prototype.buildDoubleArray=function(){var f=0,l=this.tid_entries.map(function(h){var c=h[0];return{k:c,v:f++}}),d=m.builder(1024*1024);return d.build(l)},Ge=t,Ge}var Ke,xn;function Co(){if(xn)return Ke;xn=1;var m=bo(),g=Ao(),a={builder:function(i){return new m(i)},dictionaryBuilder:function(){return new g}};return Ke=a,Ke}var Rn;function So(){if(Rn)return nr;Rn=1;var m={},g=nr&&nr.__importDefault||function(k){return k&&k.__esModule?k:{default:k}};Object.defineProperty(nr,"__esModule",{value:!0}),nr.tokenize=nr.getTokenizer=void 0;var a=g(Un()),i=so(),u=g(fo()),n=g(Co()),t=new u.default,f=function(){if(typeof process<"u"&&typeof m=="object"&&m.KUROMOJIN_DIC_PATH)return m.KUROMOJIN_DIC_PATH;var k=typeof window<"u"?window:void 0;if(typeof k<"u"&&typeof k.kuromojin=="object"&&typeof k.kuromojin.dicPath=="string")return k.kuromojin.dicPath;var x=a.default.dirname(require.resolve("kuromoji"));return a.default.join(x,"..","dict")},l=null,d=!1,h=new i.LRUMap(1e4);function c(k){return k===void 0&&(k={dicPath:f()}),l?Promise.resolve(l):(d||(d=!0,n.default.builder(k).build(function(x,E){if(x)return t.reject(x);l=E,t.resolve(E)})),t.promise)}nr.getTokenizer=c;function y(k,x){return c(x).then(function(E){if(x?.noCacheTokenize)return E.tokenizeForSentence(k);var $=h.get(k);if($)return $;var H=E.tokenizeForSentence(k);return h.set(k,H),H})}return nr.tokenize=y,nr}var zn;function To(){return zn||(zn=1,(function(m){Object.defineProperty(m,"__esModule",{value:!0}),m.tokenize=m.getTokenizer=void 0;var g=So();Object.defineProperty(m,"getTokenizer",{enumerable:!0,get:function(){return g.getTokenizer}}),Object.defineProperty(m,"tokenize",{enumerable:!0,get:function(){return g.tokenize}})})(ke)),ke}var Do=To();const zo={component:Pn},jo={width:"400px",height:"400px"},Bo=({token:{pos:m,pos_detail_1:g,pos_detail_2:a,pos_detail_3:i,surface_form:u},children:n})=>{const t=jr.useRef(null),[f,l]=jr.useState(null),d=m==="名詞"?"rgba(255, 0, 0, 0.2)":m==="動詞"?"rgba(0, 255, 0, 0.2)":m==="形容詞"?"rgba(0, 0, 255, 0.2)":m==="副詞"?"rgba(255, 0, 255, 0.2)":m==="助詞"?"rgba(0, 255, 255, 0.2)":m==="助動詞"?"rgba(255, 255, 0, 0.2)":void 0;return yr.jsxs("span",{ref:t,style:{position:"relative",background:d,outline:"solid 1px lightgray"},onMouseOver:h=>{if(!t.current)return;const c=t.current.getBoundingClientRect();l({top:c.top-c.height*2,left:c.left,description:`${u}: ${m} | ${g} | ${a} | ${i}`})},onMouseOut:()=>l(null),children:[n,f&&oo.createPortal(yr.jsx("div",{style:{position:"fixed",top:f.top,left:f.left,background:"white",fontSize:16,padding:2,border:"solid 1px gray"},children:f.description}),document.body)]})},ee={render:()=>{const[m,g]=jr.useState(`すもももももももものうち。

吾輩 （ わがはい ） は猫である。名前はまだ無い。

あのイーハトーヴォのすきとおった風、夏でも底に冷たさをもつ青いそら、うつくしい森で飾られたモリーオ市、郊外のぎらぎらひかる草の波。

山路を登りながら、こう考えた。智に働けば角が立つ。情に棹させば流される。意地を通せば窮屈だ。とかくに人の世は住みにくい。住みにくさが高じると、安い所へ引き越したくなる。どこへ越しても住みにくいと悟った時、詩が生れて、画が出来る。`),[a,i]=jr.useState(null);return jr.useEffect(()=>{(async()=>{const u=await Do.getTokenizer({dicPath:"/rich-textarea/dict"});i(u)})()},[]),yr.jsxs("div",{style:{marginTop:16},children:[!a&&yr.jsx("div",{children:"Loading dictionaries"}),yr.jsx(Pn,{style:jo,onChange:u=>g(u.target.value),value:m,children:u=>a?a.tokenize(m).map(t=>yr.jsx(Bo,{token:t,children:t.surface_form},t.word_position)):u})]})}};ee.parameters={...ee.parameters,docs:{...ee.parameters?.docs,source:{originalSource:`{
  render: () => {
    const [text, setText] = useState("すもももももももものうち。\\n\\n吾輩 （ わがはい ） は猫である。名前はまだ無い。\\n\\nあのイーハトーヴォのすきとおった風、夏でも底に冷たさをもつ青いそら、うつくしい森で飾られたモリーオ市、郊外のぎらぎらひかる草の波。\\n\\n山路を登りながら、こう考えた。智に働けば角が立つ。情に棹させば流される。意地を通せば窮屈だ。とかくに人の世は住みにくい。住みにくさが高じると、安い所へ引き越したくなる。どこへ越しても住みにくいと悟った時、詩が生れて、画が出来る。");
    const [tokenizer, setTokenizer] = useState<Tokenizer | null>(null);
    useEffect(() => {
      (async () => {
        const tokenizer = await getTokenizer({
          dicPath: (import.meta as any).env.STORYBOOK_DEPLOY ? "/rich-textarea/dict" : "/dict"
        });
        setTokenizer(tokenizer);
      })();
    }, []);
    return <div style={{
      marginTop: 16
    }}>
        {!tokenizer && <div>{"Loading dictionaries"}</div>}
        <RichTextarea style={style} onChange={e => setText(e.target.value)} value={text}>
          {v => {
          if (!tokenizer) return v;
          const tokens = tokenizer.tokenize(text);
          return tokens.map(token => {
            return <Mark key={token.word_position} token={token}>
                  {token.surface_form}
                </Mark>;
          });
        }}
        </RichTextarea>
      </div>;
  }
}`,...ee.parameters?.docs?.source}}};const Po=["Kuromoji"];export{ee as Kuromoji,Po as __namedExportsOrder,zo as default};
