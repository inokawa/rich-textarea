import{j as b}from"./observer-Djkfms2H.js";import{r as S}from"./index-RYns6xqu.js";import{R as H}from"./textarea-zpBFEpjA.js";class J{constructor(r,s){this.listeners=new Set,this._batching=!1,this._flushing=0,this.subscribe=t=>{var e,i;this.listeners.add(t);const a=(i=(e=this.options)==null?void 0:e.onSubscribe)==null?void 0:i.call(e,t,this);return()=>{this.listeners.delete(t),a==null||a()}},this.setState=t=>{var e,i,a;const o=this.state;this.state=(e=this.options)!=null&&e.updateFn?this.options.updateFn(o)(t):t(o),(a=(i=this.options)==null?void 0:i.onUpdate)==null||a.call(i),this._flush()},this._flush=()=>{if(this._batching)return;const t=++this._flushing;this.listeners.forEach(e=>{this._flushing===t&&e()})},this.batch=t=>{if(this._batching)return t();this._batching=!0,t(),this._batching=!1,this._flush()},this.state=r,this.options=s}}function P(n,r){return typeof n=="function"?n(r):n}function G(n,r){return U(r).reduce((t,e)=>{if(t===null)return null;if(typeof t<"u")return t[e]},n)}function I(n,r,s){const t=U(r);function e(i){if(!t.length)return P(s,i);const a=t.shift();if(typeof a=="string")return typeof i=="object"?(i===null&&(i={}),{...i,[a]:e(i[a])}):{[a]:e()};if(Array.isArray(i)&&a!==void 0){const o=i.slice(0,a);return[...o.length?o:new Array(a),e(i[a]),...i.slice(a+1)]}return[...new Array(a),e()]}return e(n)}function at(n,r){const s=U(r);function t(e){if(!e)return;if(s.length===1){const a=s[0];if(Array.isArray(e)&&typeof a=="number")return e.filter((c,l)=>l!==a);const{[a]:o,...d}=e;return d}const i=s.shift();if(typeof i=="string"&&typeof e=="object")return{...e,[i]:t(e[i])};if(typeof i=="number"&&Array.isArray(e)){if(i>=e.length)return e;const a=e.slice(0,i);return[...a.length?a:new Array(i),t(e[i]),...e.slice(i+1)]}throw new Error("It seems we have created an infinite loop in deleteBy. ")}return t(n)}const nt=/^(\d*)$/gm,ot=/\.(\d*)\./gm,lt=/^(\d*)\./gm,ut=/\.(\d*$)/gm,dt=/\.{2,}/gm,B="__int__",_=`${B}$1`;function U(n){if(Array.isArray(n))return[...n];if(typeof n!="string")throw new Error("Path must be a string.");return n.replaceAll("[",".").replaceAll("]","").replace(nt,_).replace(ot,`.${_}.`).replace(lt,`${_}.`).replace(ut,`.${_}`).replace(dt,".").split(".").map(r=>r.indexOf(B)===0?parseInt(r.substring(B.length),10):r)}function ct(n){return!(Array.isArray(n)&&n.length===0)}function C(n,r){const{asyncDebounceMs:s}=r,{onChangeAsync:t,onBlurAsync:e,onSubmitAsync:i,onBlurAsyncDebounceMs:a,onChangeAsyncDebounceMs:o}=r.validators||{},d=s??0,c={cause:"change",validate:t,debounceMs:o??d},l={cause:"blur",validate:e,debounceMs:a??d},m={cause:"submit",validate:i,debounceMs:0},u=h=>({...h,debounceMs:0});switch(n){case"submit":return[u(c),u(l),m];case"blur":return[l];case"change":return[c];case"server":default:return[]}}function D(n,r){const{onChange:s,onBlur:t,onSubmit:e}=r.validators||{},i={cause:"change",validate:s},a={cause:"blur",validate:t},o={cause:"submit",validate:e},d={cause:"server",validate:()=>{}};switch(n){case"submit":return[i,a,o,d];case"server":return[d];case"blur":return[a,d];case"change":default:return[i,d]}}function $(n){return{values:n.values??{},errors:n.errors??[],errorMap:n.errorMap??{},fieldMeta:n.fieldMeta??{},canSubmit:n.canSubmit??!0,isFieldsValid:n.isFieldsValid??!1,isFieldsValidating:n.isFieldsValidating??!1,isFormValid:n.isFormValid??!1,isFormValidating:n.isFormValidating??!1,isSubmitted:n.isSubmitted??!1,isSubmitting:n.isSubmitting??!1,isTouched:n.isTouched??!1,isBlurred:n.isBlurred??!1,isPristine:n.isPristine??!0,isDirty:n.isDirty??!1,isValid:n.isValid??!1,isValidating:n.isValidating??!1,submissionAttempts:n.submissionAttempts??0,validationMetaMap:n.validationMetaMap??{onChange:void 0,onBlur:void 0,onSubmit:void 0,onMount:void 0,onServer:void 0}}}const ht=n=>typeof n=="object";class ft{constructor(r){var s;this.options={},this.fieldInfo={},this.prevTransformArray=[],this.mount=()=>{const{onMount:t}=this.options.validators||{};if(!t)return;const e=this.runValidator({validate:t,value:{value:this.state.values,formApi:this,validationSource:"form"},type:"validate"});e&&this.store.setState(i=>({...i,errorMap:{...i.errorMap,onMount:e}}))},this.update=t=>{if(!t)return;const e=this.options;this.options=t,this.store.batch(()=>{const i=t.defaultValues&&t.defaultValues!==e.defaultValues&&!this.state.isTouched,a=t.defaultState!==e.defaultState&&!this.state.isTouched;this.store.setState(()=>$(Object.assign({},this.state,a?t.defaultState:{},i?{values:t.defaultValues}:{})))})},this.reset=()=>{const{fieldMeta:t}=this.state,e=this.resetFieldMeta(t);this.store.setState(()=>{var i;return $({...this.options.defaultState,values:this.options.defaultValues??((i=this.options.defaultState)==null?void 0:i.values),fieldMeta:e})})},this.validateAllFields=async t=>{const e=[];return this.store.batch(()=>{Object.values(this.fieldInfo).forEach(a=>{if(!a.instance)return;const o=a.instance;e.push(Promise.resolve().then(()=>o.validate(t))),a.instance.state.meta.isTouched||a.instance.setMeta(d=>({...d,isTouched:!0})),a.instance.state.meta.isBlurred||a.instance.setMeta(d=>({...d,isBlurred:!0}))})}),(await Promise.all(e)).flat()},this.validateArrayFieldsStartingFrom=async(t,e,i)=>{const a=this.getFieldValue(t),o=Array.isArray(a)?Math.max(a.length-1,0):null,d=[`${t}[${e}]`];for(let u=e+1;u<=(o??0);u++)d.push(`${t}[${u}]`);const c=Object.keys(this.fieldInfo).filter(u=>d.some(h=>u.startsWith(h))),l=[];return this.store.batch(()=>{c.forEach(u=>{l.push(Promise.resolve().then(()=>this.validateField(u,i)))})}),(await Promise.all(l)).flat()},this.validateField=(t,e)=>{var i;const a=(i=this.fieldInfo[t])==null?void 0:i.instance;return a?(a.state.meta.isTouched||a.setMeta(o=>({...o,isTouched:!0})),a.state.meta.isBlurred||a.setMeta(o=>({...o,isBlurred:!0})),a.validate(e)):[]},this.validateSync=t=>{const e=D(t,this.options);let i=!1;const a={};this.store.batch(()=>{for(const d of e){if(!d.validate)continue;const c=this.runValidator({validate:d.validate,value:{value:this.state.values,formApi:this,validationSource:"form"},type:"validate"}),{formError:l,fieldErrors:m}=L(c),u=T(d.cause);if(m)for(const[h,v]of Object.entries(m)){const V={...a[h]||{},[u]:v};a[h]=V;const g=this.getFieldMeta(h);g&&g.errorMap[u]!==v&&this.setFieldMeta(h,p=>({...p,errorMap:{...p.errorMap,[u]:v}}))}this.state.errorMap[u]!==l&&this.store.setState(h=>({...h,errorMap:{...h.errorMap,[u]:l}})),(l||m)&&(i=!0)}});const o=T("submit");return this.state.errorMap[o]&&t!=="submit"&&!i&&this.store.setState(d=>({...d,errorMap:{...d.errorMap,[o]:void 0}})),{hasErrored:i,fieldsErrorMap:a}},this.validateAsync=async t=>{const e=C(t,this.options);this.state.isFormValidating||this.store.setState(c=>({...c,isFormValidating:!0}));const i=[];let a;for(const c of e){if(!c.validate)continue;const l=T(c.cause),m=this.state.validationMetaMap[l];m==null||m.lastAbortController.abort();const u=new AbortController;this.state.validationMetaMap[l]={lastAbortController:u},i.push(new Promise(async h=>{let v;try{v=await new Promise((p,f)=>{setTimeout(async()=>{if(u.signal.aborted)return p(void 0);try{p(await this.runValidator({validate:c.validate,value:{value:this.state.values,formApi:this,validationSource:"form",signal:u.signal},type:"validateAsync"}))}catch(y){f(y)}},c.debounceMs)})}catch(p){v=p}const{formError:M,fieldErrors:V}=L(v);V&&(a=a?{...a,...V}:V);const g=T(c.cause);if(a)for(const[p,f]of Object.entries(a)){const y=this.getFieldMeta(p);y&&y.errorMap[g]!==f&&this.setFieldMeta(p,w=>({...w,errorMap:{...w.errorMap,[g]:f}}))}this.store.setState(p=>({...p,errorMap:{...p.errorMap,[g]:M}})),h(a?{fieldErrors:a,errorMapKey:g}:void 0)}))}let o=[];const d={};if(i.length){o=await Promise.all(i);for(const c of o)if(c!=null&&c.fieldErrors){const{errorMapKey:l}=c;for(const[m,u]of Object.entries(c.fieldErrors)){const v={...d[m]||{},[l]:u};d[m]=v}}}return this.store.setState(c=>({...c,isFormValidating:!1})),d},this.validate=t=>{const{hasErrored:e,fieldsErrorMap:i}=this.validateSync(t);return e&&!this.options.asyncAlways?i:this.validateAsync(t)},this.handleSubmit=async()=>{var t,e,i,a,o,d;if(this.store.setState(l=>({...l,isSubmitted:!1,submissionAttempts:l.submissionAttempts+1})),!this.state.canSubmit)return;this.store.setState(l=>({...l,isSubmitting:!0}));const c=()=>{this.store.setState(l=>({...l,isSubmitting:!1}))};if(await this.validateAllFields("submit"),!this.state.isFieldsValid){c(),(e=(t=this.options).onSubmitInvalid)==null||e.call(t,{value:this.state.values,formApi:this});return}if(await this.validate("submit"),!this.state.isValid){c(),(a=(i=this.options).onSubmitInvalid)==null||a.call(i,{value:this.state.values,formApi:this});return}try{await((d=(o=this.options).onSubmit)==null?void 0:d.call(o,{value:this.state.values,formApi:this})),this.store.batch(()=>{this.store.setState(l=>({...l,isSubmitted:!0})),c()})}catch(l){throw c(),l}},this.getFieldValue=t=>G(this.state.values,t),this.getFieldMeta=t=>this.state.fieldMeta[t],this.getFieldInfo=t=>{var e;return(e=this.fieldInfo)[t]||(e[t]={instance:null,validationMetaMap:{onChange:void 0,onBlur:void 0,onSubmit:void 0,onMount:void 0,onServer:void 0}})},this.setFieldMeta=(t,e)=>{this.store.setState(i=>({...i,fieldMeta:{...i.fieldMeta,[t]:P(e,i.fieldMeta[t])}}))},this.resetFieldMeta=t=>Object.keys(t).reduce((e,i)=>{const a=i;return e[a]={isValidating:!1,isTouched:!1,isBlurred:!1,isDirty:!1,isPristine:!0,errors:[],errorMap:{}},e},{}),this.setFieldValue=(t,e,i)=>{const a=(i==null?void 0:i.dontUpdateMeta)??!1;this.store.batch(()=>{a||this.setFieldMeta(t,o=>({...o,isTouched:!0,isBlurred:!0,isDirty:!0})),this.store.setState(o=>({...o,values:I(o.values,t,e)}))})},this.deleteField=t=>{this.store.setState(e=>{const i={...e};return i.values=at(i.values,t),delete i.fieldMeta[t],i}),delete this.fieldInfo[t]},this.pushFieldValue=(t,e,i)=>{this.setFieldValue(t,a=>[...Array.isArray(a)?a:[],e],i),this.validateField(t,"change")},this.insertFieldValue=async(t,e,i,a)=>{this.setFieldValue(t,o=>[...o.slice(0,e),i,...o.slice(e)],a),await this.validateField(t,"change")},this.replaceFieldValue=async(t,e,i,a)=>{this.setFieldValue(t,o=>o.map((d,c)=>c===e?i:d),a),await this.validateField(t,"change"),await this.validateArrayFieldsStartingFrom(t,e,"change")},this.removeFieldValue=async(t,e,i)=>{const a=this.getFieldValue(t),o=Array.isArray(a)?Math.max(a.length-1,0):null;if(this.setFieldValue(t,d=>d.filter((c,l)=>l!==e),i),o!==null){const d=`${t}[${o}]`;Object.keys(this.fieldInfo).filter(l=>l.startsWith(d)).forEach(l=>this.deleteField(l))}await this.validateField(t,"change"),await this.validateArrayFieldsStartingFrom(t,e,"change")},this.swapFieldValues=(t,e,i,a)=>{this.setFieldValue(t,o=>{const d=o[e],c=o[i];return I(I(o,`${e}`,c),`${i}`,d)},a),this.validateField(t,"change"),this.validateField(`${t}[${e}]`,"change"),this.validateField(`${t}[${i}]`,"change")},this.moveFieldValues=(t,e,i,a)=>{this.setFieldValue(t,o=>(o.splice(i,0,o.splice(e,1)[0]),o),a),this.validateField(t,"change"),this.validateField(`${t}[${e}]`,"change"),this.validateField(`${t}[${i}]`,"change")},this.store=new J($({...r==null?void 0:r.defaultState,values:(r==null?void 0:r.defaultValues)??((s=r==null?void 0:r.defaultState)==null?void 0:s.values),isFormValid:!0}),{onUpdate:()=>{var t,e;let{state:i}=this.store;const a=Object.values(i.fieldMeta),o=a.some(f=>f==null?void 0:f.isValidating),d=!a.some(f=>(f==null?void 0:f.errorMap)&&ct(Object.values(f.errorMap).filter(Boolean))),c=a.some(f=>f==null?void 0:f.isTouched),l=a.some(f=>f==null?void 0:f.isBlurred),m=a.some(f=>f==null?void 0:f.isDirty),u=!m,h=o||i.isFormValidating;i.errors=Object.values(i.errorMap).reduce((f,y)=>y===void 0?f:typeof y=="string"?(f.push(y),f):(y&&ht(y)&&f.push(y.form),f),[]);const v=i.errors.length===0,M=d&&v,V=i.submissionAttempts===0&&!c||!h&&!i.isSubmitting&&M;i={...i,isFieldsValidating:o,isFieldsValid:d,isFormValid:v,isValid:M,canSubmit:V,isTouched:c,isBlurred:l,isPristine:u,isDirty:m},this.state=i,this.store.state=this.state;const g=((t=this.options.transform)==null?void 0:t.deps)??[];(g.length!==this.prevTransformArray.length||g.some((f,y)=>f!==this.prevTransformArray[y]))&&((e=this.options.transform)==null||e.fn(this),this.store.state=this.state,this.prevTransformArray=g)}}),this.state=this.store.state,this.update(r||{})}runValidator(r){const s=this.options.validatorAdapter;return s&&typeof r.validate!="function"?s()[r.type](r.value,r.validate):r.validate(r.value)}setErrorMap(r){this.store.setState(s=>({...s,errorMap:{...s.errorMap,...r}}))}}function L(n){if(n){if(typeof n=="object"){const r=L(n.form).formError,s=n.fields;return{formError:r,fieldErrors:s}}return typeof n!="string"?{formError:"Invalid Form Values"}:{formError:n}}return{formError:void 0}}function T(n){switch(n){case"submit":return"onSubmit";case"blur":return"onBlur";case"mount":return"onMount";case"server":return"onServer";case"change":default:return"onChange"}}class mt{constructor(r){this.options={},this.mount=()=>{const s=this.getInfo();s.instance=this;const t=this.form.store.subscribe(()=>{this.store.batch(()=>{const i=this.getValue(),a=this.getMeta();i!==this.state.value&&this.store.setState(o=>({...o,value:i})),a!==this.state.meta&&this.store.setState(o=>({...o,meta:a}))})});this.update(this.options);const{onMount:e}=this.options.validators||{};if(e){const i=this.runValidator({validate:e,value:{value:this.state.value,fieldApi:this,validationSource:"field"},type:"validate"});i&&this.setMeta(a=>({...a,errorMap:{...a==null?void 0:a.errorMap,onMount:i}}))}return()=>{t()}},this.update=s=>{if(this.state.value===void 0){const t=G(s.form.options.defaultValues,s.name);s.defaultValue!==void 0?this.setValue(s.defaultValue,{dontUpdateMeta:!0}):t!==void 0&&this.setValue(t,{dontUpdateMeta:!0})}this._getMeta()===void 0&&this.setMeta(this.state.meta),this.options=s},this.getValue=()=>this.form.getFieldValue(this.name),this.setValue=(s,t)=>{this.form.setFieldValue(this.name,s,t),this.validate("change")},this._getMeta=()=>this.form.getFieldMeta(this.name),this.getMeta=()=>this._getMeta()??{isValidating:!1,isTouched:!1,isBlurred:!1,isDirty:!1,isPristine:!0,errors:[],errorMap:{},...this.options.defaultMeta},this.setMeta=s=>this.form.setFieldMeta(this.name,s),this.getInfo=()=>this.form.getFieldInfo(this.name),this.pushValue=(s,t)=>this.form.pushFieldValue(this.name,s,t),this.insertValue=(s,t,e)=>this.form.insertFieldValue(this.name,s,t,e),this.replaceValue=(s,t,e)=>this.form.replaceFieldValue(this.name,s,t,e),this.removeValue=(s,t)=>this.form.removeFieldValue(this.name,s,t),this.swapValues=(s,t,e)=>this.form.swapFieldValues(this.name,s,t,e),this.moveValue=(s,t,e)=>this.form.moveFieldValues(this.name,s,t,e),this.getLinkedFields=s=>{const t=Object.values(this.form.fieldInfo),e=[];for(const i of t){if(!i.instance)continue;const{onChangeListenTo:a,onBlurListenTo:o}=i.instance.options.validators||{};s==="change"&&(a!=null&&a.includes(this.name))&&e.push(i.instance),s==="blur"&&(o!=null&&o.includes(this.name))&&e.push(i.instance)}return e},this.validateSync=(s,t)=>{const e=D(s,this.options),a=this.getLinkedFields(s).reduce((c,l)=>{const m=D(s,l.options);return m.forEach(u=>{u.field=l}),c.concat(m)},[]);let o=!1;this.form.store.batch(()=>{const c=(l,m)=>{const u=E(m.cause),h=m.validate?N(l.runValidator({validate:m.validate,value:{value:l.getValue(),validationSource:"field",fieldApi:l},type:"validate"})):t[u];l.state.meta.errorMap[u]!==h&&l.setMeta(v=>({...v,errorMap:{...v.errorMap,[E(m.cause)]:h||t[u]}})),(h||t[u])&&(o=!0)};for(const l of e)c(this,l);for(const l of a)l.validate&&c(l.field,l)});const d=E("submit");return this.state.meta.errorMap[d]&&s!=="submit"&&!o&&this.setMeta(c=>({...c,errorMap:{...c.errorMap,[d]:void 0}})),{hasErrored:o}},this.validateAsync=async(s,t)=>{const e=C(s,this.options),i=await t,a=this.getLinkedFields(s),o=a.reduce((u,h)=>{const v=C(s,h.options);return v.forEach(M=>{M.field=h}),u.concat(v)},[]);this.state.meta.isValidating||this.setMeta(u=>({...u,isValidating:!0}));for(const u of a)u.setMeta(h=>({...h,isValidating:!0}));const d=[],c=[],l=(u,h,v)=>{const M=E(h.cause),V=u.getInfo().validationMetaMap[M];V==null||V.lastAbortController.abort();const g=new AbortController;this.getInfo().validationMetaMap[M]={lastAbortController:g},v.push(new Promise(async p=>{var f;let y;try{y=await new Promise((F,st)=>{this.timeoutIds[h.cause]&&clearTimeout(this.timeoutIds[h.cause]),this.timeoutIds[h.cause]=setTimeout(async()=>{if(g.signal.aborted)return F(void 0);try{F(await this.runValidator({validate:h.validate,value:{value:u.getValue(),fieldApi:u,signal:g.signal,validationSource:"field"},type:"validateAsync"}))}catch(rt){st(rt)}},h.debounceMs)})}catch(F){y=F}if(g.signal.aborted)return p(void 0);const w=N(y),it=(f=i[this.name])==null?void 0:f[M],R=w||it;u.setMeta(F=>({...F,errorMap:{...F==null?void 0:F.errorMap,[M]:R}})),p(R)}))};for(const u of e)u.validate&&l(this,u,d);for(const u of o)u.validate&&l(u.field,u,c);let m=[];(d.length||c.length)&&(m=await Promise.all(d),await Promise.all(c)),this.setMeta(u=>({...u,isValidating:!1}));for(const u of a)u.setMeta(h=>({...h,isValidating:!1}));return m.filter(Boolean)},this.validate=s=>{var t;if(!this.state.meta.isTouched)return[];let e={},i=Promise.resolve({});try{const o=this.form.validate(s);if(o instanceof Promise)i=o;else{const d=o[this.name];d&&(e=d)}}catch{}const{hasErrored:a}=this.validateSync(s,e);return a&&!this.options.asyncAlways?((t=this.getInfo().validationMetaMap[E(s)])==null||t.lastAbortController.abort(),this.state.meta.errors):this.validateAsync(s,i)},this.handleChange=s=>{this.setValue(s)},this.handleBlur=()=>{this.state.meta.isTouched||(this.setMeta(t=>({...t,isTouched:!0})),this.validate("change")),this.state.meta.isBlurred||this.setMeta(t=>({...t,isBlurred:!0})),this.validate("blur")},this.form=r.form,this.name=r.name,this.timeoutIds={},r.defaultValue!==void 0&&this.form.setFieldValue(this.name,r.defaultValue,{dontUpdateMeta:!0}),this.store=new J({value:this.getValue(),meta:this._getMeta()??{isValidating:!1,isTouched:!1,isBlurred:!1,isDirty:!1,isPristine:!0,errors:[],errorMap:{},...r.defaultMeta}},{onUpdate:()=>{const s=this.store.state;s.meta.errors=Object.values(s.meta.errorMap).filter(t=>t!==void 0),s.meta.isPristine=!s.meta.isDirty,this.prevState=s,this.state=s}}),this.state=this.store.state,this.prevState=this.state,this.options=r}runValidator(r){const s=[this.form.options.validatorAdapter,this.options.validatorAdapter];for(const t of s)if(t&&typeof r.validate!="function")return t()[r.type](r.value,r.validate);return r.validate(r.value)}setErrorMap(r){this.setMeta(s=>({...s,errorMap:{...s.errorMap,...r}}))}}function N(n){if(n)return typeof n!="string"?"Invalid Form Values":n}function E(n){switch(n){case"submit":return"onSubmit";case"blur":return"onBlur";case"mount":return"onMount";case"server":return"onServer";case"change":default:return"onChange"}}var Q={exports:{}},X={},Y={exports:{}},Z={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A=S;function vt(n,r){return n===r&&(n!==0||1/n===1/r)||n!==n&&r!==r}var pt=typeof Object.is=="function"?Object.is:vt,yt=A.useState,gt=A.useEffect,Mt=A.useLayoutEffect,bt=A.useDebugValue;function Vt(n,r){var s=r(),t=yt({inst:{value:s,getSnapshot:r}}),e=t[0].inst,i=t[1];return Mt(function(){e.value=s,e.getSnapshot=r,O(e)&&i({inst:e})},[n,s,r]),gt(function(){return O(e)&&i({inst:e}),n(function(){O(e)&&i({inst:e})})},[n]),bt(s),s}function O(n){var r=n.getSnapshot;n=n.value;try{var s=r();return!pt(n,s)}catch{return!0}}function Ft(n,r){return r()}var St=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Ft:Vt;Z.useSyncExternalStore=A.useSyncExternalStore!==void 0?A.useSyncExternalStore:St;Y.exports=Z;var At=Y.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j=S,Et=At;function wt(n,r){return n===r&&(n!==0||1/n===1/r)||n!==n&&r!==r}var _t=typeof Object.is=="function"?Object.is:wt,Tt=Et.useSyncExternalStore,xt=j.useRef,kt=j.useEffect,Pt=j.useMemo,jt=j.useDebugValue;X.useSyncExternalStoreWithSelector=function(n,r,s,t,e){var i=xt(null);if(i.current===null){var a={hasValue:!1,value:null};i.current=a}else a=i.current;i=Pt(function(){function d(h){if(!c){if(c=!0,l=h,h=t(h),e!==void 0&&a.hasValue){var v=a.value;if(e(v,h))return m=v}return m=h}if(v=m,_t(l,h))return v;var M=t(h);return e!==void 0&&e(v,M)?v:(l=h,m=M)}var c=!1,l,m,u=s===void 0?null:s;return[function(){return d(r())},u===null?void 0:function(){return d(u())}]},[r,s,t,e]);var o=Tt(n,i[0],i[1]);return kt(function(){a.hasValue=!0,a.value=o},[o]),jt(o),o};Q.exports=X;var It=Q.exports;function K(n,r=s=>s){return It.useSyncExternalStoreWithSelector(n.subscribe,()=>n.state,()=>n.state,r,$t)}function $t(n,r){if(Object.is(n,r))return!0;if(typeof n!="object"||n===null||typeof r!="object"||r===null)return!1;const s=Object.keys(n);if(s.length!==Object.keys(r).length)return!1;for(let t=0;t<s.length;t++)if(!Object.prototype.hasOwnProperty.call(r,s[t])||!Object.is(n[s[t]],r[s[t]]))return!1;return!0}const k=typeof window<"u"?S.useLayoutEffect:S.useEffect;function tt(n){const[r]=S.useState(()=>{const t=new mt({...n,form:n.form,name:n.name});return t.Field=et,t});return k(r.mount,[r]),k(()=>{r.update(n)}),K(r.store,n.mode==="array"?s=>[s.meta,Object.keys(s.value??[]).length]:void 0),r}const et=({children:n,...r})=>{const s=tt(r);return b.jsx(b.Fragment,{children:P(n,s)})};function Ot(n){const[r]=S.useState(()=>{const s=new ft(n),t=s;return t.Field=function(i){return b.jsx(et,{...i,form:s})},t.useField=e=>tt({...e,form:s}),t.useStore=e=>K(s.store,e),t.Subscribe=e=>P(e.children,K(s.store,e.selector)),t});return k(r.mount,[]),r.useStore(s=>s.isSubmitting),k(()=>{r.update(n)}),r}const Kt={component:H},Bt={width:"600px",height:"400px"},x={name:"With Tanstack Form",render:()=>{const n=Ot({defaultValues:{text:"Hello tanstack"},onSubmit:r=>alert(JSON.stringify(r.value))});return b.jsxs("form",{onSubmit:r=>{r.preventDefault(),r.stopPropagation(),n.handleSubmit()},children:[b.jsx(n.Field,{name:"text",validators:{onChange:({value:r})=>{if(!r)return"This field is required";if(!r.toLowerCase().includes("tanstack"))return"Text must include tanstack"}},children:r=>b.jsxs(b.Fragment,{children:[b.jsx(H,{style:Bt,name:r.name,value:r.state.value,onChange:s=>r.handleChange(s.target.value),onBlur:r.handleBlur,children:s=>s.split("").map((t,e)=>b.jsx("span",{style:{color:"tanstack".includes(t.toLowerCase())?"tan":void 0},children:t},e))}),r.state.meta.errors&&b.jsx("span",{style:{color:"red"},children:r.state.meta.errors.join(", ")})]})}),b.jsx("button",{type:"submit",children:"submit"})]})}};var W,q,z;x.parameters={...x.parameters,docs:{...(W=x.parameters)==null?void 0:W.docs,source:{originalSource:`{
  name: "With Tanstack Form",
  render: () => {
    const form = useForm({
      defaultValues: {
        text: "Hello tanstack"
      },
      onSubmit: data => alert(JSON.stringify(data.value))
    });
    return <form onSubmit={e => {
      e.preventDefault();
      e.stopPropagation();
      form.handleSubmit();
    }}>
        <form.Field name="text" validators={{
        onChange: ({
          value
        }) => {
          if (!value) {
            return "This field is required";
          }
          if (!value.toLowerCase().includes("tanstack")) {
            return "Text must include tanstack";
          }
        }
      }}>
          {field => <>
              <RichTextarea style={style} name={field.name} value={field.state.value} onChange={e => field.handleChange(e.target.value)} onBlur={field.handleBlur}>
                {v => {
              return v.split("").map((t, i) => <span key={i} style={{
                color: "tanstack".includes(t.toLowerCase()) ? "tan" : undefined
              }}>
                      {t}
                    </span>);
            }}
              </RichTextarea>
              {field.state.meta.errors && <span style={{
            color: "red"
          }}>
                  {field.state.meta.errors.join(", ")}
                </span>}
            </>}
        </form.Field>
        <button type="submit">submit</button>
      </form>;
  }
}`,...(z=(q=x.parameters)==null?void 0:q.docs)==null?void 0:z.source}}};const Ut=["Default"];export{x as Default,Ut as __namedExportsOrder,Kt as default};
