import{j as kr}from"./observer-Djkfms2H.js";import{c as cr,r as Pr}from"./index-RYns6xqu.js";import{r as ro}from"./index-CXU7o9CY.js";import{R as wn}from"./textarea-CUwguxoB.js";var kn={},Sr={};function er(n){if(typeof n!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(n))}function hn(n,e){for(var t="",i=0,u=-1,c=0,h,p=0;p<=n.length;++p){if(p<n.length)h=n.charCodeAt(p);else{if(h===47)break;h=47}if(h===47){if(!(u===p-1||c===1))if(u!==p-1&&c===2){if(t.length<2||i!==2||t.charCodeAt(t.length-1)!==46||t.charCodeAt(t.length-2)!==46){if(t.length>2){var _=t.lastIndexOf("/");if(_!==t.length-1){_===-1?(t="",i=0):(t=t.slice(0,_),i=t.length-1-t.lastIndexOf("/")),u=p,c=0;continue}}else if(t.length===2||t.length===1){t="",i=0,u=p,c=0;continue}}e&&(t.length>0?t+="/..":t="..",i=2)}else t.length>0?t+="/"+n.slice(u+1,p):t=n.slice(u+1,p),i=p-u-1;u=p,c=0}else h===46&&c!==-1?++c:c=-1}return t}function to(n,e){var t=e.dir||e.root,i=e.base||(e.name||"")+(e.ext||"");return t?t===e.root?t+i:t+n+i:i}var Ar={resolve:function(){for(var e="",t=!1,i,u=arguments.length-1;u>=-1&&!t;u--){var c;u>=0?c=arguments[u]:(i===void 0&&(i=process.cwd()),c=i),er(c),c.length!==0&&(e=c+"/"+e,t=c.charCodeAt(0)===47)}return e=hn(e,!t),t?e.length>0?"/"+e:"/":e.length>0?e:"."},normalize:function(e){if(er(e),e.length===0)return".";var t=e.charCodeAt(0)===47,i=e.charCodeAt(e.length-1)===47;return e=hn(e,!t),e.length===0&&!t&&(e="."),e.length>0&&i&&(e+="/"),t?"/"+e:e},isAbsolute:function(e){return er(e),e.length>0&&e.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var e,t=0;t<arguments.length;++t){var i=arguments[t];er(i),i.length>0&&(e===void 0?e=i:e+="/"+i)}return e===void 0?".":Ar.normalize(e)},relative:function(e,t){if(er(e),er(t),e===t||(e=Ar.resolve(e),t=Ar.resolve(t),e===t))return"";for(var i=1;i<e.length&&e.charCodeAt(i)===47;++i);for(var u=e.length,c=u-i,h=1;h<t.length&&t.charCodeAt(h)===47;++h);for(var p=t.length,_=p-h,I=c<_?c:_,E=-1,g=0;g<=I;++g){if(g===I){if(_>I){if(t.charCodeAt(h+g)===47)return t.slice(h+g+1);if(g===0)return t.slice(h+g)}else c>I&&(e.charCodeAt(i+g)===47?E=g:g===0&&(E=0));break}var b=e.charCodeAt(i+g),x=t.charCodeAt(h+g);if(b!==x)break;b===47&&(E=g)}var N="";for(g=i+E+1;g<=u;++g)(g===u||e.charCodeAt(g)===47)&&(N.length===0?N+="..":N+="/..");return N.length>0?N+t.slice(h+E):(h+=E,t.charCodeAt(h)===47&&++h,t.slice(h))},_makeLong:function(e){return e},dirname:function(e){if(er(e),e.length===0)return".";for(var t=e.charCodeAt(0),i=t===47,u=-1,c=!0,h=e.length-1;h>=1;--h)if(t=e.charCodeAt(h),t===47){if(!c){u=h;break}}else c=!1;return u===-1?i?"/":".":i&&u===1?"//":e.slice(0,u)},basename:function(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');er(e);var i=0,u=-1,c=!0,h;if(t!==void 0&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";var p=t.length-1,_=-1;for(h=e.length-1;h>=0;--h){var I=e.charCodeAt(h);if(I===47){if(!c){i=h+1;break}}else _===-1&&(c=!1,_=h+1),p>=0&&(I===t.charCodeAt(p)?--p===-1&&(u=h):(p=-1,u=_))}return i===u?u=_:u===-1&&(u=e.length),e.slice(i,u)}else{for(h=e.length-1;h>=0;--h)if(e.charCodeAt(h)===47){if(!c){i=h+1;break}}else u===-1&&(c=!1,u=h+1);return u===-1?"":e.slice(i,u)}},extname:function(e){er(e);for(var t=-1,i=0,u=-1,c=!0,h=0,p=e.length-1;p>=0;--p){var _=e.charCodeAt(p);if(_===47){if(!c){i=p+1;break}continue}u===-1&&(c=!1,u=p+1),_===46?t===-1?t=p:h!==1&&(h=1):t!==-1&&(h=-1)}return t===-1||u===-1||h===0||h===1&&t===u-1&&t===i+1?"":e.slice(t,u)},format:function(e){if(e===null||typeof e!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return to("/",e)},parse:function(e){er(e);var t={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return t;var i=e.charCodeAt(0),u=i===47,c;u?(t.root="/",c=1):c=0;for(var h=-1,p=0,_=-1,I=!0,E=e.length-1,g=0;E>=c;--E){if(i=e.charCodeAt(E),i===47){if(!I){p=E+1;break}continue}_===-1&&(I=!1,_=E+1),i===46?h===-1?h=E:g!==1&&(g=1):h!==-1&&(g=-1)}return h===-1||_===-1||g===0||g===1&&h===_-1&&h===p+1?_!==-1&&(p===0&&u?t.base=t.name=e.slice(1,_):t.base=t.name=e.slice(p,_)):(p===0&&u?(t.name=e.slice(1,h),t.base=e.slice(1,_)):(t.name=e.slice(p,h),t.base=e.slice(p,_)),t.ext=e.slice(h,_)),p>0?t.dir=e.slice(0,p-1):u&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};Ar.posix=Ar;var An=Ar,Rt={exports:{}};(function(n,e){(function(t,i){i(e)})(cr,function(t){const i=Symbol("newer"),u=Symbol("older");class c{constructor(g,b){typeof g!="number"&&(b=g,g=0),this.size=0,this.limit=g,this.oldest=this.newest=void 0,this._keymap=new Map,b&&(this.assign(b),g<1&&(this.limit=this.size))}_markEntryAsUsed(g){g!==this.newest&&(g[i]&&(g===this.oldest&&(this.oldest=g[i]),g[i][u]=g[u]),g[u]&&(g[u][i]=g[i]),g[i]=void 0,g[u]=this.newest,this.newest&&(this.newest[i]=g),this.newest=g)}assign(g){let b,x=this.limit||Number.MAX_VALUE;this._keymap.clear();let N=g[Symbol.iterator]();for(let q=N.next();!q.done;q=N.next()){let W=new h(q.value[0],q.value[1]);if(this._keymap.set(W.key,W),b?(b[i]=W,W[u]=b):this.oldest=W,b=W,x--==0)throw new Error("overflow")}this.newest=b,this.size=this._keymap.size}get(g){var b=this._keymap.get(g);return b?(this._markEntryAsUsed(b),b.value):void 0}set(g,b){var x=this._keymap.get(g);return x?(x.value=b,this._markEntryAsUsed(x),this):(this._keymap.set(g,x=new h(g,b)),this.newest?(this.newest[i]=x,x[u]=this.newest):this.oldest=x,this.newest=x,++this.size,this.size>this.limit&&this.shift(),this)}shift(){var g=this.oldest;if(g)return this.oldest[i]?(this.oldest=this.oldest[i],this.oldest[u]=void 0):(this.oldest=void 0,this.newest=void 0),g[i]=g[u]=void 0,this._keymap.delete(g.key),--this.size,[g.key,g.value]}find(g){let b=this._keymap.get(g);return b?b.value:void 0}has(g){return this._keymap.has(g)}delete(g){var b=this._keymap.get(g);return b?(this._keymap.delete(b.key),b[i]&&b[u]?(b[u][i]=b[i],b[i][u]=b[u]):b[i]?(b[i][u]=void 0,this.oldest=b[i]):b[u]?(b[u][i]=void 0,this.newest=b[u]):this.oldest=this.newest=void 0,this.size--,b.value):void 0}clear(){this.oldest=this.newest=void 0,this.size=0,this._keymap.clear()}keys(){return new _(this.oldest)}values(){return new I(this.oldest)}entries(){return this}[Symbol.iterator](){return new p(this.oldest)}forEach(g,b){typeof b!="object"&&(b=this);let x=this.oldest;for(;x;)g.call(b,x.value,x.key,this),x=x[i]}toJSON(){for(var g=new Array(this.size),b=0,x=this.oldest;x;)g[b++]={key:x.key,value:x.value},x=x[i];return g}toString(){for(var g="",b=this.oldest;b;)g+=String(b.key)+":"+b.value,b=b[i],b&&(g+=" < ");return g}}t.LRUMap=c;function h(E,g){this.key=E,this.value=g,this[i]=void 0,this[u]=void 0}function p(E){this.entry=E}p.prototype[Symbol.iterator]=function(){return this},p.prototype.next=function(){let E=this.entry;return E?(this.entry=E[i],{done:!1,value:[E.key,E.value]}):{done:!0,value:void 0}};function _(E){this.entry=E}_.prototype[Symbol.iterator]=function(){return this},_.prototype.next=function(){let E=this.entry;return E?(this.entry=E[i],{done:!1,value:E.key}):{done:!0,value:void 0}};function I(E){this.entry=E}I.prototype[Symbol.iterator]=function(){return this},I.prototype.next=function(){let E=this.entry;return E?(this.entry=E[i],{done:!1,value:E.value}):{done:!0,value:void 0}}})})(Rt,Rt.exports);var eo=Rt.exports,Vt={};Object.defineProperty(Vt,"__esModule",{value:!0});var no=function(){function n(){var e=this;this.promise=new Promise(function(t,i){e.resolve=t,e.reject=i})}return n}();Vt.default=no;function io(n,e,t,i,u,c,h,p){this.name=n,this.cost=e,this.start_pos=t,this.length=i,this.left_id=c,this.right_id=h,this.prev=null,this.surface_form=p,u==="BOS"?this.shortest_cost=0:this.shortest_cost=Number.MAX_VALUE,this.type=u}var Sn=io,Cn=Sn;function Gt(){this.nodes_end_at=[],this.nodes_end_at[0]=[new Cn(-1,0,0,0,"BOS",0,0,"")],this.eos_pos=1}Gt.prototype.append=function(n){var e=n.start_pos+n.length-1;this.eos_pos<e&&(this.eos_pos=e);var t=this.nodes_end_at[e];t==null&&(t=[]),t.push(n),this.nodes_end_at[e]=t};Gt.prototype.appendEos=function(){var n=this.nodes_end_at.length;this.eos_pos++,this.nodes_end_at[n]=[new Cn(-1,0,this.eos_pos,0,"EOS",0,0,"")]};var ao=Gt;function pr(n){this.str=n,this.index_mapping=[];for(var e=0;e<n.length;e++){var t=n.charAt(e);this.index_mapping.push(e),pr.isSurrogatePair(t)&&e++}this.length=this.index_mapping.length}pr.prototype.slice=function(n){if(this.index_mapping.length<=n)return"";var e=this.index_mapping[n];return this.str.slice(e)};pr.prototype.charAt=function(n){if(this.str.length<=n)return"";var e=this.index_mapping[n],t=this.index_mapping[n+1];return t==null?this.str.slice(e):this.str.slice(e,t)};pr.prototype.charCodeAt=function(n){if(this.index_mapping.length<=n)return NaN;var e=this.index_mapping[n],t=this.str.charCodeAt(e),i;return t>=55296&&t<=56319&&e<this.str.length&&(i=this.str.charCodeAt(e+1),i>=56320&&i<=57343)?(t-55296)*1024+i-56320+65536:t};pr.prototype.toString=function(){return this.str};pr.isSurrogatePair=function(n){var e=n.charCodeAt(0);return e>=55296&&e<=56319};var Tn=pr,vn=Sn,oo=ao,Pt=Tn;function jn(n){this.trie=n.trie,this.token_info_dictionary=n.token_info_dictionary,this.unknown_dictionary=n.unknown_dictionary}jn.prototype.build=function(n){for(var e=new oo,t=new Pt(n),i,u,c,h,p,_=0;_<t.length;_++){for(var I=t.slice(_),E=this.trie.commonPrefixSearch(I),g=0;g<E.length;g++){u=E[g].v,i=E[g].k;for(var b=this.token_info_dictionary.target_map[u],x=0;x<b.length;x++){var N=parseInt(b[x]);c=this.token_info_dictionary.dictionary.getShort(N),h=this.token_info_dictionary.dictionary.getShort(N+2),p=this.token_info_dictionary.dictionary.getShort(N+4),e.append(new vn(N,p,_+1,i.length,"KNOWN",c,h,i))}}var q=new Pt(I),W=new Pt(q.charAt(0)),Q=this.unknown_dictionary.lookup(W.toString());if(E==null||E.length===0||Q.is_always_invoke===1){if(i=W,Q.is_grouping===1&&1<q.length)for(var y=1;y<q.length;y++){var j=q.charAt(y),D=this.unknown_dictionary.lookup(j);if(Q.class_name!==D.class_name)break;i+=j}for(var S=this.unknown_dictionary.target_map[Q.class_id],A=0;A<S.length;A++){var m=parseInt(S[A]);c=this.unknown_dictionary.dictionary.getShort(m),h=this.unknown_dictionary.dictionary.getShort(m+2),p=this.unknown_dictionary.dictionary.getShort(m+4),e.append(new vn(m,p,_+1,i.length,"UNKNOWN",c,h,i.toString()))}}}return e.appendEos(),e};var uo=jn;function gt(n){this.connection_costs=n}gt.prototype.search=function(n){return n=this.forward(n),this.backward(n)};gt.prototype.forward=function(n){var e,t,i;for(e=1;e<=n.eos_pos;e++){var u=n.nodes_end_at[e];if(u!=null)for(t=0;t<u.length;t++){var c=u[t],h=Number.MAX_VALUE,p,_=n.nodes_end_at[c.start_pos-1];if(_!=null){for(i=0;i<_.length;i++){var I=_[i],E;c.left_id==null||I.right_id==null?(console.log("Left or right is null"),E=0):E=this.connection_costs.get(I.right_id,c.left_id);var g=I.shortest_cost+E+c.cost;g<h&&(p=I,h=g)}c.prev=p,c.shortest_cost=h}}}return n};gt.prototype.backward=function(n){var e=[],t=n.nodes_end_at[n.nodes_end_at.length-1][0],i=t.prev;if(i==null)return[];for(;i.type!=="BOS";){if(e.push(i),i.prev==null)return[];i=i.prev}return e.reverse()};var so=gt;function qt(){}qt.prototype.formatEntry=function(n,e,t,i){var u={};return u.word_id=n,u.word_type=t,u.word_position=e,u.surface_form=i[0],u.pos=i[1],u.pos_detail_1=i[2],u.pos_detail_2=i[3],u.pos_detail_3=i[4],u.conjugated_type=i[5],u.conjugated_form=i[6],u.basic_form=i[7],u.reading=i[8],u.pronunciation=i[9],u};qt.prototype.formatUnknownEntry=function(n,e,t,i,u){var c={};return c.word_id=n,c.word_type=t,c.word_position=e,c.surface_form=u,c.pos=i[1],c.pos_detail_1=i[2],c.pos_detail_2=i[3],c.pos_detail_3=i[4],c.conjugated_type=i[5],c.conjugated_form=i[6],c.basic_form=i[7],c};var fo=qt,lo=uo,co=so,ho=fo,vo=/、|。/;function Cr(n){this.token_info_dictionary=n.token_info_dictionary,this.unknown_dictionary=n.unknown_dictionary,this.viterbi_builder=new lo(n),this.viterbi_searcher=new co(n.connection_costs),this.formatter=new ho}Cr.splitByPunctuation=function(n){for(var e=[],t=n;t!=="";){var i=t.search(vo);if(i<0){e.push(t);break}e.push(t.substring(0,i+1)),t=t.substring(i+1)}return e};Cr.prototype.tokenize=function(n){for(var e=Cr.splitByPunctuation(n),t=[],i=0;i<e.length;i++){var u=e[i];this.tokenizeForSentence(u,t)}return t};Cr.prototype.tokenizeForSentence=function(n,e){e==null&&(e=[]);var t=this.getLattice(n),i=this.viterbi_searcher.search(t),u=0;e.length>0&&(u=e[e.length-1].word_position);for(var c=0;c<i.length;c++){var h=i[c],p,_,I;h.type==="KNOWN"?(I=this.token_info_dictionary.getFeatures(h.name),I==null?_=[]:_=I.split(","),p=this.formatter.formatEntry(h.name,u+h.start_pos,h.type,_)):h.type==="UNKNOWN"?(I=this.unknown_dictionary.getFeatures(h.name),I==null?_=[]:_=I.split(","),p=this.formatter.formatUnknownEntry(h.name,u+h.start_pos,h.type,_,h.surface_form)):p=this.formatter.formatEntry(h.name,u+h.start_pos,h.type,[]),e.push(p)}return e};Cr.prototype.getLattice=function(n){return this.viterbi_builder.build(n)};var po=Cr,yt={exports:{}};yt.exports;(function(n,e){(function(t,i){i(e)})(cr,function(t){function i(r,a){a=a|0;for(var o=Math.max(r.length-a,0),s=Array(o),f=0;f<o;f++)s[f]=r[a+f];return s}var u=function(r){var a=i(arguments,1);return function(){var o=i(arguments);return r.apply(null,a.concat(o))}},c=function(r){return function(){var a=i(arguments),o=a.pop();r.call(this,a,o)}};function h(r){var a=typeof r;return r!=null&&(a=="object"||a=="function")}var p=typeof setImmediate=="function"&&setImmediate,_=typeof process=="object"&&typeof process.nextTick=="function";function I(r){setTimeout(r,0)}function E(r){return function(a){var o=i(arguments,1);r(function(){a.apply(null,o)})}}var g;p?g=setImmediate:_?g=process.nextTick:g=I;var b=E(g);function x(r){return c(function(a,o){var s;try{s=r.apply(this,a)}catch(f){return o(f)}h(s)&&typeof s.then=="function"?s.then(function(f){N(o,null,f)},function(f){N(o,f.message?f:new Error(f))}):o(null,s)})}function N(r,a,o){try{r(a,o)}catch(s){b(q,s)}}function q(r){throw r}var W=typeof Symbol=="function";function Q(r){return W&&r[Symbol.toStringTag]==="AsyncFunction"}function y(r){return Q(r)?x(r):r}function j(r){return function(a){var o=i(arguments,1),s=c(function(f,l){var v=this;return r(a,function(d,w){y(d).apply(v,f.concat(w))},l)});return o.length?s.apply(this,o):s}}var D=typeof cr=="object"&&cr&&cr.Object===Object&&cr,S=typeof self=="object"&&self&&self.Object===Object&&self,A=D||S||Function("return this")(),m=A.Symbol,C=Object.prototype,T=C.hasOwnProperty,B=C.toString,O=m?m.toStringTag:void 0;function R(r){var a=T.call(r,O),o=r[O];try{r[O]=void 0;var s=!0}catch{}var f=B.call(r);return s&&(a?r[O]=o:delete r[O]),f}var nr=Object.prototype,mt=nr.toString;function Nn(r){return mt.call(r)}var Vn="[object Null]",Gn="[object Undefined]",Qt=m?m.toStringTag:void 0;function Mr(r){return r==null?r===void 0?Gn:Vn:Qt&&Qt in Object(r)?R(r):Nn(r)}var qn="[object AsyncFunction]",Kn="[object Function]",Wn="[object GeneratorFunction]",Hn="[object Proxy]";function Yn(r){if(!h(r))return!1;var a=Mr(r);return a==Kn||a==Wn||a==qn||a==Hn}var Jn=9007199254740991;function Zt(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=Jn}function Dr(r){return r!=null&&Zt(r.length)&&!Yn(r)}var _t={};function z(){}function sr(r){return function(){if(r!==null){var a=r;r=null,a.apply(this,arguments)}}}var bt=typeof Symbol=="function"&&Symbol.iterator,Xn=function(r){return bt&&r[bt]&&r[bt]()};function Qn(r,a){for(var o=-1,s=Array(r);++o<r;)s[o]=a(o);return s}function Rr(r){return r!=null&&typeof r=="object"}var Zn="[object Arguments]";function re(r){return Rr(r)&&Mr(r)==Zn}var te=Object.prototype,ri=te.hasOwnProperty,ti=te.propertyIsEnumerable,ei=re(function(){return arguments}())?re:function(r){return Rr(r)&&ri.call(r,"callee")&&!ti.call(r,"callee")},J=Array.isArray;function ni(){return!1}var ee=typeof t=="object"&&t&&!t.nodeType&&t,ne=ee&&!0&&n&&!n.nodeType&&n,ii=ne&&ne.exports===ee,ie=ii?A.Buffer:void 0,ai=ie?ie.isBuffer:void 0,oi=ai||ni,ui=9007199254740991,si=/^(?:0|[1-9]\d*)$/;function fi(r,a){var o=typeof r;return a=a??ui,!!a&&(o=="number"||o!="symbol"&&si.test(r))&&r>-1&&r%1==0&&r<a}var li="[object Arguments]",ci="[object Array]",hi="[object Boolean]",vi="[object Date]",pi="[object Error]",yi="[object Function]",gi="[object Map]",di="[object Number]",mi="[object Object]",_i="[object RegExp]",bi="[object Set]",wi="[object String]",ki="[object WeakMap]",Ai="[object ArrayBuffer]",Si="[object DataView]",Ci="[object Float32Array]",Ti="[object Float64Array]",ji="[object Int8Array]",Di="[object Int16Array]",Fi="[object Int32Array]",Ei="[object Uint8Array]",Ii="[object Uint8ClampedArray]",Bi="[object Uint16Array]",Li="[object Uint32Array]",$={};$[Ci]=$[Ti]=$[ji]=$[Di]=$[Fi]=$[Ei]=$[Ii]=$[Bi]=$[Li]=!0,$[li]=$[ci]=$[Ai]=$[hi]=$[Si]=$[vi]=$[pi]=$[yi]=$[gi]=$[di]=$[mi]=$[_i]=$[bi]=$[wi]=$[ki]=!1;function Oi(r){return Rr(r)&&Zt(r.length)&&!!$[Mr(r)]}function xi(r){return function(a){return r(a)}}var ae=typeof t=="object"&&t&&!t.nodeType&&t,Fr=ae&&!0&&n&&!n.nodeType&&n,zi=Fr&&Fr.exports===ae,wt=zi&&D.process,oe=function(){try{var r=Fr&&Fr.require&&Fr.require("util").types;return r||wt&&wt.binding&&wt.binding("util")}catch{}}(),ue=oe&&oe.isTypedArray,$i=ue?xi(ue):Oi,Pi=Object.prototype,Ui=Pi.hasOwnProperty;function Mi(r,a){var o=J(r),s=!o&&ei(r),f=!o&&!s&&oi(r),l=!o&&!s&&!f&&$i(r),v=o||s||f||l,d=v?Qn(r.length,String):[],w=d.length;for(var F in r)Ui.call(r,F)&&!(v&&(F=="length"||f&&(F=="offset"||F=="parent")||l&&(F=="buffer"||F=="byteLength"||F=="byteOffset")||fi(F,w)))&&d.push(F);return d}var Ri=Object.prototype;function Ni(r){var a=r&&r.constructor,o=typeof a=="function"&&a.prototype||Ri;return r===o}function Vi(r,a){return function(o){return r(a(o))}}var Gi=Vi(Object.keys,Object),qi=Object.prototype,Ki=qi.hasOwnProperty;function Wi(r){if(!Ni(r))return Gi(r);var a=[];for(var o in Object(r))Ki.call(r,o)&&o!="constructor"&&a.push(o);return a}function kt(r){return Dr(r)?Mi(r):Wi(r)}function Hi(r){var a=-1,o=r.length;return function(){return++a<o?{value:r[a],key:a}:null}}function Yi(r){var a=-1;return function(){var s=r.next();return s.done?null:(a++,{value:s.value,key:a})}}function Ji(r){var a=kt(r),o=-1,s=a.length;return function f(){var l=a[++o];return l==="__proto__"?f():o<s?{value:r[l],key:l}:null}}function Xi(r){if(Dr(r))return Hi(r);var a=Xn(r);return a?Yi(a):Ji(r)}function Z(r){return function(){if(r===null)throw new Error("Callback was already called.");var a=r;r=null,a.apply(this,arguments)}}function Nr(r){return function(a,o,s){if(s=sr(s||z),r<=0||!a)return s(null);var f=Xi(a),l=!1,v=0,d=!1;function w(k,L){if(v-=1,k)l=!0,s(k);else{if(L===_t||l&&v<=0)return l=!0,s(null);d||F()}}function F(){for(d=!0;v<r&&!l;){var k=f();if(k===null){l=!0,v<=0&&s(null);return}v+=1,o(k.value,k.key,Z(w))}d=!1}F()}}function hr(r,a,o,s){Nr(a)(r,y(o),s)}function G(r,a){return function(o,s,f){return r(o,a,s,f)}}function Qi(r,a,o){o=sr(o||z);var s=0,f=0,l=r.length;l===0&&o(null);function v(d,w){d?o(d):(++f===l||w===_t)&&o(null)}for(;s<l;s++)a(r[s],s,Z(v))}var Zi=G(hr,1/0),fr=function(r,a,o){var s=Dr(r)?Qi:Zi;s(r,y(a),o)};function yr(r){return function(a,o,s){return r(fr,a,y(o),s)}}function se(r,a,o,s){s=s||z,a=a||[];var f=[],l=0,v=y(o);r(a,function(d,w,F){var k=l++;v(d,function(L,P){f[k]=P,F(L)})},function(d){s(d,f)})}var Vr=yr(se),fe=j(Vr);function gr(r){return function(a,o,s,f){return r(Nr(o),a,y(s),f)}}var dr=gr(se),At=G(dr,1),le=j(At);function Gr(r,a){for(var o=-1,s=r==null?0:r.length;++o<s&&a(r[o],o,r)!==!1;);return r}function ra(r){return function(a,o,s){for(var f=-1,l=Object(a),v=s(a),d=v.length;d--;){var w=v[++f];if(o(l[w],w,l)===!1)break}return a}}var ta=ra();function Er(r,a){return r&&ta(r,a,kt)}function ea(r,a,o,s){for(var f=r.length,l=o+-1;++l<f;)if(a(r[l],l,r))return l;return-1}function na(r){return r!==r}function ia(r,a,o){for(var s=o-1,f=r.length;++s<f;)if(r[s]===a)return s;return-1}function qr(r,a,o){return a===a?ia(r,a,o):ea(r,na,o)}var St=function(r,a,o){typeof a=="function"&&(o=a,a=null),o=sr(o||z);var s=kt(r),f=s.length;if(!f)return o(null);a||(a=f);var l={},v=0,d=!1,w=Object.create(null),F=[],k=[],L={};Er(r,function(U,M){if(!J(U)){P(M,[U]),k.push(M);return}var V=U.slice(0,U.length-1),ir=V.length;if(ir===0){P(M,U),k.push(M);return}L[M]=ir,Gr(V,function(wr){if(!r[wr])throw new Error("async.auto task `"+M+"` has a non-existent dependency `"+wr+"` in "+V.join(", "));rr(wr,function(){ir--,ir===0&&P(M,U)})})}),Ja(),K();function P(U,M){F.push(function(){tr(U,M)})}function K(){if(F.length===0&&v===0)return o(null,l);for(;F.length&&v<a;){var U=F.shift();U()}}function rr(U,M){var V=w[U];V||(V=w[U]=[]),V.push(M)}function Y(U){var M=w[U]||[];Gr(M,function(V){V()}),K()}function tr(U,M){if(!d){var V=Z(function(wr,zt){if(v--,arguments.length>2&&(zt=i(arguments,1)),wr){var $t={};Er(l,function(Qa,Za){$t[Za]=Qa}),$t[U]=zt,d=!0,w=Object.create(null),o(wr,$t)}else l[U]=zt,Y(U)});v++;var ir=y(M[M.length-1]);M.length>1?ir(l,V):ir(V)}}function Ja(){for(var U,M=0;k.length;)U=k.pop(),M++,Gr(Xa(U),function(V){--L[V]===0&&k.push(V)});if(M!==f)throw new Error("async.auto cannot execute tasks due to a recursive dependency")}function Xa(U){var M=[];return Er(r,function(V,ir){J(V)&&qr(V,U,0)>=0&&M.push(ir)}),M}};function mr(r,a){for(var o=-1,s=r==null?0:r.length,f=Array(s);++o<s;)f[o]=a(r[o],o,r);return f}var aa="[object Symbol]";function oa(r){return typeof r=="symbol"||Rr(r)&&Mr(r)==aa}var ua=1/0,ce=m?m.prototype:void 0,he=ce?ce.toString:void 0;function Ct(r){if(typeof r=="string")return r;if(J(r))return mr(r,Ct)+"";if(oa(r))return he?he.call(r):"";var a=r+"";return a=="0"&&1/r==-ua?"-0":a}function sa(r,a,o){var s=-1,f=r.length;a<0&&(a=-a>f?0:f+a),o=o>f?f:o,o<0&&(o+=f),f=a>o?0:o-a>>>0,a>>>=0;for(var l=Array(f);++s<f;)l[s]=r[s+a];return l}function fa(r,a,o){var s=r.length;return o=o===void 0?s:o,!a&&o>=s?r:sa(r,a,o)}function la(r,a){for(var o=r.length;o--&&qr(a,r[o],0)>-1;);return o}function ca(r,a){for(var o=-1,s=r.length;++o<s&&qr(a,r[o],0)>-1;);return o}function ha(r){return r.split("")}var va="\\ud800-\\udfff",pa="\\u0300-\\u036f",ya="\\ufe20-\\ufe2f",ga="\\u20d0-\\u20ff",da=pa+ya+ga,ma="\\ufe0e\\ufe0f",_a="\\u200d",ba=RegExp("["+_a+va+da+ma+"]");function wa(r){return ba.test(r)}var ve="\\ud800-\\udfff",ka="\\u0300-\\u036f",Aa="\\ufe20-\\ufe2f",Sa="\\u20d0-\\u20ff",Ca=ka+Aa+Sa,Ta="\\ufe0e\\ufe0f",ja="["+ve+"]",Tt="["+Ca+"]",jt="\\ud83c[\\udffb-\\udfff]",Da="(?:"+Tt+"|"+jt+")",pe="[^"+ve+"]",ye="(?:\\ud83c[\\udde6-\\uddff]){2}",ge="[\\ud800-\\udbff][\\udc00-\\udfff]",Fa="\\u200d",de=Da+"?",me="["+Ta+"]?",Ea="(?:"+Fa+"(?:"+[pe,ye,ge].join("|")+")"+me+de+")*",Ia=me+de+Ea,Ba="(?:"+[pe+Tt+"?",Tt,ye,ge,ja].join("|")+")",La=RegExp(jt+"(?="+jt+")|"+Ba+Ia,"g");function Oa(r){return r.match(La)||[]}function _e(r){return wa(r)?Oa(r):ha(r)}function xa(r){return r==null?"":Ct(r)}var za=/^\s+|\s+$/g;function $a(r,a,o){if(r=xa(r),r&&a===void 0)return r.replace(za,"");if(!r||!(a=Ct(a)))return r;var s=_e(r),f=_e(a),l=ca(s,f),v=la(s,f)+1;return fa(s,l,v).join("")}var Pa=/^(?:async\s+)?(function)?\s*[^\(]*\(\s*([^\)]*)\)/m,Ua=/,/,Ma=/(=.+)?(\s*)$/,Ra=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/mg;function Na(r){return r=r.toString().replace(Ra,""),r=r.match(Pa)[2].replace(" ",""),r=r?r.split(Ua):[],r=r.map(function(a){return $a(a.replace(Ma,""))}),r}function be(r,a){var o={};Er(r,function(s,f){var l,v=Q(s),d=!v&&s.length===1||v&&s.length===0;if(J(s))l=s.slice(0,-1),s=s[s.length-1],o[f]=l.concat(l.length>0?w:s);else if(d)o[f]=s;else{if(l=Na(s),s.length===0&&!v&&l.length===0)throw new Error("autoInject task functions require explicit parameters.");v||l.pop(),o[f]=l.concat(w)}function w(F,k){var L=mr(l,function(P){return F[P]});L.push(k),y(s).apply(null,L)}}),St(o,a)}function X(){this.head=this.tail=null,this.length=0}function we(r,a){r.length=1,r.head=r.tail=a}X.prototype.removeLink=function(r){return r.prev?r.prev.next=r.next:this.head=r.next,r.next?r.next.prev=r.prev:this.tail=r.prev,r.prev=r.next=null,this.length-=1,r},X.prototype.empty=function(){for(;this.head;)this.shift();return this},X.prototype.insertAfter=function(r,a){a.prev=r,a.next=r.next,r.next?r.next.prev=a:this.tail=a,r.next=a,this.length+=1},X.prototype.insertBefore=function(r,a){a.prev=r.prev,a.next=r,r.prev?r.prev.next=a:this.head=a,r.prev=a,this.length+=1},X.prototype.unshift=function(r){this.head?this.insertBefore(this.head,r):we(this,r)},X.prototype.push=function(r){this.tail?this.insertAfter(this.tail,r):we(this,r)},X.prototype.shift=function(){return this.head&&this.removeLink(this.head)},X.prototype.pop=function(){return this.tail&&this.removeLink(this.tail)},X.prototype.toArray=function(){for(var r=Array(this.length),a=this.head,o=0;o<this.length;o++)r[o]=a.data,a=a.next;return r},X.prototype.remove=function(r){for(var a=this.head;a;){var o=a.next;r(a)&&this.removeLink(a),a=o}return this};function ke(r,a,o){if(a==null)a=1;else if(a===0)throw new Error("Concurrency must not be zero");var s=y(r),f=0,l=[],v=!1;function d(L,P,K){if(K!=null&&typeof K!="function")throw new Error("task callback must be a function");if(k.started=!0,J(L)||(L=[L]),L.length===0&&k.idle())return b(function(){k.drain()});for(var rr=0,Y=L.length;rr<Y;rr++){var tr={data:L[rr],callback:K||z};P?k._tasks.unshift(tr):k._tasks.push(tr)}v||(v=!0,b(function(){v=!1,k.process()}))}function w(L){return function(P){f-=1;for(var K=0,rr=L.length;K<rr;K++){var Y=L[K],tr=qr(l,Y,0);tr===0?l.shift():tr>0&&l.splice(tr,1),Y.callback.apply(Y,arguments),P!=null&&k.error(P,Y.data)}f<=k.concurrency-k.buffer&&k.unsaturated(),k.idle()&&k.drain(),k.process()}}var F=!1,k={_tasks:new X,concurrency:a,payload:o,saturated:z,unsaturated:z,buffer:a/4,empty:z,drain:z,error:z,started:!1,paused:!1,push:function(L,P){d(L,!1,P)},kill:function(){k.drain=z,k._tasks.empty()},unshift:function(L,P){d(L,!0,P)},remove:function(L){k._tasks.remove(L)},process:function(){if(!F){for(F=!0;!k.paused&&f<k.concurrency&&k._tasks.length;){var L=[],P=[],K=k._tasks.length;k.payload&&(K=Math.min(K,k.payload));for(var rr=0;rr<K;rr++){var Y=k._tasks.shift();L.push(Y),l.push(Y),P.push(Y.data)}f+=1,k._tasks.length===0&&k.empty(),f===k.concurrency&&k.saturated();var tr=Z(w(L));s(P,tr)}F=!1}},length:function(){return k._tasks.length},running:function(){return f},workersList:function(){return l},idle:function(){return k._tasks.length+f===0},pause:function(){k.paused=!0},resume:function(){k.paused!==!1&&(k.paused=!1,b(k.process))}};return k}function Ae(r,a){return ke(r,1,a)}var _r=G(hr,1);function lr(r,a,o,s){s=sr(s||z);var f=y(o);_r(r,function(l,v,d){f(a,l,function(w,F){a=F,d(w)})},function(l){s(l,a)})}function Dt(){var r=mr(arguments,y);return function(){var a=i(arguments),o=this,s=a[a.length-1];typeof s=="function"?a.pop():s=z,lr(r,a,function(f,l,v){l.apply(o,f.concat(function(d){var w=i(arguments,1);v(d,w)}))},function(f,l){s.apply(o,[f].concat(l))})}}var Se=function(){return Dt.apply(null,i(arguments).reverse())},Va=Array.prototype.concat,Kr=function(r,a,o,s){s=s||z;var f=y(o);dr(r,a,function(l,v){f(l,function(d){return d?v(d):v(null,i(arguments,1))})},function(l,v){for(var d=[],w=0;w<v.length;w++)v[w]&&(d=Va.apply(d,v[w]));return s(l,d)})},Ce=G(Kr,1/0),Te=G(Kr,1),je=function(){var r=i(arguments),a=[null].concat(r);return function(){var o=arguments[arguments.length-1];return o.apply(this,a)}};function Ir(r){return r}function br(r,a){return function(o,s,f,l){l=l||z;var v=!1,d;o(s,function(w,F,k){f(w,function(L,P){L?k(L):r(P)&&!d?(v=!0,d=a(!0,w),k(null,_t)):k()})},function(w){w?l(w):l(null,v?d:a(!1))})}}function De(r,a){return a}var Wr=yr(br(Ir,De)),Br=gr(br(Ir,De)),Hr=G(Br,1);function Fe(r){return function(a){var o=i(arguments,1);o.push(function(s){var f=i(arguments,1);typeof console=="object"&&(s?console.error&&console.error(s):console[r]&&Gr(f,function(l){console[r](l)}))}),y(a).apply(null,o)}}var Ee=Fe("dir");function Ie(r,a,o){o=Z(o||z);var s=y(r),f=y(a);function l(d){if(d)return o(d);var w=i(arguments,1);w.push(v),f.apply(this,w)}function v(d,w){if(d)return o(d);if(!w)return o(null);s(l)}v(null,!0)}function Ft(r,a,o){o=Z(o||z);var s=y(r),f=function(l){if(l)return o(l);var v=i(arguments,1);if(a.apply(this,v))return s(f);o.apply(null,[null].concat(v))};s(f)}function Be(r,a,o){Ft(r,function(){return!a.apply(this,arguments)},o)}function Le(r,a,o){o=Z(o||z);var s=y(a),f=y(r);function l(d){if(d)return o(d);f(v)}function v(d,w){if(d)return o(d);if(!w)return o(null);s(l)}f(v)}function Oe(r){return function(a,o,s){return r(a,s)}}function Yr(r,a,o){fr(r,Oe(y(a)),o)}function Lr(r,a,o,s){Nr(a)(r,Oe(y(o)),s)}var Or=G(Lr,1);function Et(r){return Q(r)?r:c(function(a,o){var s=!0;a.push(function(){var f=arguments;s?b(function(){o.apply(null,f)}):o.apply(null,f)}),r.apply(this,a),s=!1})}function Jr(r){return!r}var Xr=yr(br(Jr,Jr)),xr=gr(br(Jr,Jr)),Qr=G(xr,1);function xe(r){return function(a){return a==null?void 0:a[r]}}function Ga(r,a,o,s){var f=new Array(a.length);r(a,function(l,v,d){o(l,function(w,F){f[v]=!!F,d(w)})},function(l){if(l)return s(l);for(var v=[],d=0;d<a.length;d++)f[d]&&v.push(a[d]);s(null,v)})}function qa(r,a,o,s){var f=[];r(a,function(l,v,d){o(l,function(w,F){w?d(w):(F&&f.push({index:v,value:l}),d())})},function(l){l?s(l):s(null,mr(f.sort(function(v,d){return v.index-d.index}),xe("value")))})}function It(r,a,o,s){var f=Dr(a)?Ga:qa;f(r,a,y(o),s||z)}var Zr=yr(It),zr=gr(It),rt=G(zr,1);function ze(r,a){var o=Z(a||z),s=y(Et(r));function f(l){if(l)return o(l);s(f)}f()}var tt=function(r,a,o,s){s=s||z;var f=y(o);dr(r,a,function(l,v){f(l,function(d,w){return d?v(d):v(null,{key:w,val:l})})},function(l,v){for(var d={},w=Object.prototype.hasOwnProperty,F=0;F<v.length;F++)if(v[F]){var k=v[F].key,L=v[F].val;w.call(d,k)?d[k].push(L):d[k]=[L]}return s(l,d)})},$e=G(tt,1/0),Pe=G(tt,1),Ue=Fe("log");function et(r,a,o,s){s=sr(s||z);var f={},l=y(o);hr(r,a,function(v,d,w){l(v,d,function(F,k){if(F)return w(F);f[d]=k,w()})},function(v){s(v,f)})}var Me=G(et,1/0),Re=G(et,1);function Ne(r,a){return a in r}function Ve(r,a){var o=Object.create(null),s=Object.create(null);a=a||Ir;var f=y(r),l=c(function(d,w){var F=a.apply(null,d);Ne(o,F)?b(function(){w.apply(null,o[F])}):Ne(s,F)?s[F].push(w):(s[F]=[w],f.apply(null,d.concat(function(){var k=i(arguments);o[F]=k;var L=s[F];delete s[F];for(var P=0,K=L.length;P<K;P++)L[P].apply(null,k)})))});return l.memo=o,l.unmemoized=r,l}var nt;_?nt=process.nextTick:p?nt=setImmediate:nt=I;var Ge=E(nt);function Bt(r,a,o){o=o||z;var s=Dr(a)?[]:{};r(a,function(f,l,v){y(f)(function(d,w){arguments.length>2&&(w=i(arguments,1)),s[l]=w,v(d)})},function(f){o(f,s)})}function qe(r,a){Bt(fr,r,a)}function Ke(r,a,o){Bt(Nr(a),r,o)}var Lt=function(r,a){var o=y(r);return ke(function(s,f){o(s[0],f)},a,1)},We=function(r,a){var o=Lt(r,a);return o.push=function(s,f,l){if(l==null&&(l=z),typeof l!="function")throw new Error("task callback must be a function");if(o.started=!0,J(s)||(s=[s]),s.length===0)return b(function(){o.drain()});f=f||0;for(var v=o._tasks.head;v&&f>=v.priority;)v=v.next;for(var d=0,w=s.length;d<w;d++){var F={data:s[d],priority:f,callback:l};v?o._tasks.insertBefore(v,F):o._tasks.push(F)}b(o.process)},delete o.unshift,o};function He(r,a){if(a=sr(a||z),!J(r))return a(new TypeError("First argument to race must be an array of functions"));if(!r.length)return a();for(var o=0,s=r.length;o<s;o++)y(r[o])(a)}function it(r,a,o,s){var f=i(r).reverse();lr(f,a,o,s)}function at(r){var a=y(r);return c(function(s,f){return s.push(function(v,d){if(v)f(null,{error:v});else{var w;arguments.length<=2?w=d:w=i(arguments,1),f(null,{value:w})}}),a.apply(this,s)})}function Ye(r){var a;return J(r)?a=mr(r,at):(a={},Er(r,function(o,s){a[s]=at.call(this,o)})),a}function Je(r,a,o,s){It(r,a,function(f,l){o(f,function(v,d){l(v,!d)})},s)}var Xe=yr(Je),Ot=gr(Je),Qe=G(Ot,1);function Ze(r){return function(){return r}}function ot(r,a,o){var s=5,f=0,l={times:s,intervalFunc:Ze(f)};function v(k,L){if(typeof L=="object")k.times=+L.times||s,k.intervalFunc=typeof L.interval=="function"?L.interval:Ze(+L.interval||f),k.errorFilter=L.errorFilter;else if(typeof L=="number"||typeof L=="string")k.times=+L||s;else throw new Error("Invalid arguments for async.retry")}if(arguments.length<3&&typeof r=="function"?(o=a||z,a=r):(v(l,r),o=o||z),typeof a!="function")throw new Error("Invalid arguments for async.retry");var d=y(a),w=1;function F(){d(function(k){k&&w++<l.times&&(typeof l.errorFilter!="function"||l.errorFilter(k))?setTimeout(F,l.intervalFunc(w)):o.apply(null,arguments)})}F()}var rn=function(r,a){a||(a=r,r=null);var o=y(a);return c(function(s,f){function l(v){o.apply(null,s.concat(v))}r?ot(r,l,f):ot(l,f)})};function tn(r,a){Bt(_r,r,a)}var ut=yr(br(Boolean,Ir)),$r=gr(br(Boolean,Ir)),st=G($r,1);function en(r,a,o){var s=y(a);Vr(r,function(l,v){s(l,function(d,w){if(d)return v(d);v(null,{value:l,criteria:w})})},function(l,v){if(l)return o(l);o(null,mr(v.sort(f),xe("value")))});function f(l,v){var d=l.criteria,w=v.criteria;return d<w?-1:d>w?1:0}}function nn(r,a,o){var s=y(r);return c(function(f,l){var v=!1,d;function w(){var F=r.name||"anonymous",k=new Error('Callback function "'+F+'" timed out.');k.code="ETIMEDOUT",o&&(k.info=o),v=!0,l(k)}f.push(function(){v||(l.apply(null,arguments),clearTimeout(d))}),d=setTimeout(w,a),s.apply(null,f)})}var Ka=Math.ceil,Wa=Math.max;function Ha(r,a,o,s){for(var f=-1,l=Wa(Ka((a-r)/o),0),v=Array(l);l--;)v[++f]=r,r+=o;return v}function ft(r,a,o,s){var f=y(o);dr(Ha(0,r,1),a,f,s)}var an=G(ft,1/0),on=G(ft,1);function un(r,a,o,s){arguments.length<=3&&(s=o,o=a,a=J(r)?[]:{}),s=sr(s||z);var f=y(o);fr(r,function(l,v,d){f(a,l,v,d)},function(l){s(l,a)})}function sn(r,a){var o=null,s;a=a||z,Or(r,function(f,l){y(f)(function(v,d){arguments.length>2?s=i(arguments,1):s=d,o=v,l(!v)})},function(){a(o,s)})}function fn(r){return function(){return(r.unmemoized||r).apply(null,arguments)}}function xt(r,a,o){o=Z(o||z);var s=y(a);if(!r())return o(null);var f=function(l){if(l)return o(l);if(r())return s(f);var v=i(arguments,1);o.apply(null,[null].concat(v))};s(f)}function ln(r,a,o){xt(function(){return!r.apply(this,arguments)},a,o)}var cn=function(r,a){if(a=sr(a||z),!J(r))return a(new Error("First argument to waterfall must be an array of functions"));if(!r.length)return a();var o=0;function s(l){var v=y(r[o++]);l.push(Z(f)),v.apply(null,l)}function f(l){if(l||o===r.length)return a.apply(null,arguments);s(i(arguments,1))}s([])},Ya={apply:u,applyEach:fe,applyEachSeries:le,asyncify:x,auto:St,autoInject:be,cargo:Ae,compose:Se,concat:Ce,concatLimit:Kr,concatSeries:Te,constant:je,detect:Wr,detectLimit:Br,detectSeries:Hr,dir:Ee,doDuring:Ie,doUntil:Be,doWhilst:Ft,during:Le,each:Yr,eachLimit:Lr,eachOf:fr,eachOfLimit:hr,eachOfSeries:_r,eachSeries:Or,ensureAsync:Et,every:Xr,everyLimit:xr,everySeries:Qr,filter:Zr,filterLimit:zr,filterSeries:rt,forever:ze,groupBy:$e,groupByLimit:tt,groupBySeries:Pe,log:Ue,map:Vr,mapLimit:dr,mapSeries:At,mapValues:Me,mapValuesLimit:et,mapValuesSeries:Re,memoize:Ve,nextTick:Ge,parallel:qe,parallelLimit:Ke,priorityQueue:We,queue:Lt,race:He,reduce:lr,reduceRight:it,reflect:at,reflectAll:Ye,reject:Xe,rejectLimit:Ot,rejectSeries:Qe,retry:ot,retryable:rn,seq:Dt,series:tn,setImmediate:b,some:ut,someLimit:$r,someSeries:st,sortBy:en,timeout:nn,times:an,timesLimit:ft,timesSeries:on,transform:un,tryEach:sn,unmemoize:fn,until:ln,waterfall:cn,whilst:xt,all:Xr,allLimit:xr,allSeries:Qr,any:ut,anyLimit:$r,anySeries:st,find:Wr,findLimit:Br,findSeries:Hr,forEach:Yr,forEachSeries:Or,forEachLimit:Lr,forEachOf:fr,forEachOfSeries:_r,forEachOfLimit:hr,inject:lr,foldl:lr,foldr:it,select:Zr,selectLimit:zr,selectSeries:rt,wrapSync:x};t.default=Ya,t.apply=u,t.applyEach=fe,t.applyEachSeries=le,t.asyncify=x,t.auto=St,t.autoInject=be,t.cargo=Ae,t.compose=Se,t.concat=Ce,t.concatLimit=Kr,t.concatSeries=Te,t.constant=je,t.detect=Wr,t.detectLimit=Br,t.detectSeries=Hr,t.dir=Ee,t.doDuring=Ie,t.doUntil=Be,t.doWhilst=Ft,t.during=Le,t.each=Yr,t.eachLimit=Lr,t.eachOf=fr,t.eachOfLimit=hr,t.eachOfSeries=_r,t.eachSeries=Or,t.ensureAsync=Et,t.every=Xr,t.everyLimit=xr,t.everySeries=Qr,t.filter=Zr,t.filterLimit=zr,t.filterSeries=rt,t.forever=ze,t.groupBy=$e,t.groupByLimit=tt,t.groupBySeries=Pe,t.log=Ue,t.map=Vr,t.mapLimit=dr,t.mapSeries=At,t.mapValues=Me,t.mapValuesLimit=et,t.mapValuesSeries=Re,t.memoize=Ve,t.nextTick=Ge,t.parallel=qe,t.parallelLimit=Ke,t.priorityQueue=We,t.queue=Lt,t.race=He,t.reduce=lr,t.reduceRight=it,t.reflect=at,t.reflectAll=Ye,t.reject=Xe,t.rejectLimit=Ot,t.rejectSeries=Qe,t.retry=ot,t.retryable=rn,t.seq=Dt,t.series=tn,t.setImmediate=b,t.some=ut,t.someLimit=$r,t.someSeries=st,t.sortBy=en,t.timeout=nn,t.times=an,t.timesLimit=ft,t.timesSeries=on,t.transform=un,t.tryEach=sn,t.unmemoize=fn,t.until=ln,t.waterfall=cn,t.whilst=xt,t.all=Xr,t.allLimit=xr,t.allSeries=Qr,t.any=ut,t.anyLimit=$r,t.anySeries=st,t.find=Wr,t.findLimit=Br,t.findSeries=Hr,t.forEach=Yr,t.forEachSeries=Or,t.forEachLimit=Lr,t.forEachOf=fr,t.forEachOfSeries=_r,t.forEachOfLimit=hr,t.inject=lr,t.foldl=lr,t.foldr=it,t.select=Zr,t.selectLimit=zr,t.selectSeries=rt,t.wrapSync=x,Object.defineProperty(t,"__esModule",{value:!0})})})(yt,yt.exports);var yo=yt.exports,Dn={exports:{}};(function(n){(function(){var e="\0",t=0,i=0,u=-1,c=!0,h=!0,p=4,_=4,I=2,E=function(y){y==null&&(y=1024);var j=function(T,B,O){for(var R=B;R<O;R++)T[R]=-R+1;if(0<C.array[C.array.length-1]){for(var nr=C.array.length-2;0<C.array[nr];)nr--;T[B]=-nr}},D=function(T,B,O){for(var R=B;R<O;R++)T[R]=-R-1},S=function(T){var B=T*I,O=x(m.signed,m.bytes,B);j(O,m.array.length,B),O.set(m.array),m.array=null,m.array=O;var R=x(C.signed,C.bytes,B);D(R,C.array.length,B),R.set(C.array),C.array=null,C.array=R},A=i+1,m={signed:c,bytes:p,array:x(c,p,y)},C={signed:h,bytes:_,array:x(h,_,y)};return m.array[i]=1,C.array[i]=i,j(m.array,i+1,m.array.length),D(C.array,i+1,C.array.length),{getBaseBuffer:function(){return m.array},getCheckBuffer:function(){return C.array},loadBaseBuffer:function(T){return m.array=T,this},loadCheckBuffer:function(T){return C.array=T,this},size:function(){return Math.max(m.array.length,C.array.length)},getBase:function(T){return m.array.length-1<T?-T+1:m.array[T]},getCheck:function(T){return C.array.length-1<T?-T-1:C.array[T]},setBase:function(T,B){m.array.length-1<T&&S(T),m.array[T]=B},setCheck:function(T,B){C.array.length-1<T&&S(T),C.array[T]=B},setFirstUnusedNode:function(T){A=T},getFirstUnusedNode:function(){return A},shrink:function(){for(var T=this.size()-1;!(0<=C.array[T]);)T--;m.array=m.array.subarray(0,T+2),C.array=C.array.subarray(0,T+2)},calc:function(){for(var T=0,B=C.array.length,O=0;O<B;O++)C.array[O]<0&&T++;return{all:B,unused:T,efficiency:(B-T)/B}},dump:function(){var T="",B="",O;for(O=0;O<m.array.length;O++)T=T+" "+this.getBase(O);for(O=0;O<C.array.length;O++)B=B+" "+this.getCheck(O);return console.log("base:"+T),console.log("chck:"+B),"base:"+T+" chck:"+B}}};function g(y){this.bc=E(y),this.keys=[]}g.prototype.append=function(y,j){return this.keys.push({k:y,v:j}),this},g.prototype.build=function(y,j){if(y==null&&(y=this.keys),y==null)return new b(this.bc);j==null&&(j=!1);var D=y.map(function(S){return{k:q(S.k+e),v:S.v}});return j?this.keys=D:this.keys=D.sort(function(S,A){for(var m=S.k,C=A.k,T=Math.min(m.length,C.length),B=0;B<T;B++)if(m[B]!==C[B])return m[B]-C[B];return m.length-C.length}),D=null,this._build(i,0,0,this.keys.length),new b(this.bc)},g.prototype._build=function(y,j,D,S){var A=this.getChildrenInfo(j,D,S),m=this.findAllocatableBase(A);this.setBC(y,A,m);for(var C=0;C<A.length;C=C+3){var T=A[C];if(T!==t){var B=A[C+1],O=A[C+2],R=m+T;this._build(R,j+1,B,O)}}},g.prototype.getChildrenInfo=function(y,j,D){var S=this.keys[j].k[y],A=0,m=new Int32Array(D*3);m[A++]=S,m[A++]=j;for(var C=j,T=j;C<j+D;C++){var B=this.keys[C].k[y];S!==B&&(m[A++]=C-T,m[A++]=B,m[A++]=C,S=B,T=C)}return m[A++]=C-T,m=m.subarray(0,A),m},g.prototype.setBC=function(y,j,D){var S=this.bc;S.setBase(y,D);var A;for(A=0;A<j.length;A=A+3){var m=j[A],C=D+m,T=-S.getBase(C),B=-S.getCheck(C);C!==S.getFirstUnusedNode()?S.setCheck(T,-B):S.setFirstUnusedNode(B),S.setBase(B,-T);var O=y;if(S.setCheck(C,O),m===t){var R=j[A+1],nr=this.keys[R].v;nr==null&&(nr=0);var mt=-nr-1;S.setBase(C,mt)}}},g.prototype.findAllocatableBase=function(y){for(var j=this.bc,D,S=j.getFirstUnusedNode();;){if(D=S-y[0],D<0){S=-j.getCheck(S);continue}for(var A=!0,m=0;m<y.length;m=m+3){var C=y[m],T=D+C;if(!this.isUnusedNode(T)){S=-j.getCheck(S),A=!1;break}}if(A)return D}},g.prototype.isUnusedNode=function(y){var j=this.bc,D=j.getCheck(y);return y===i?!1:D<0};function b(y){this.bc=y,this.bc.shrink()}b.prototype.contain=function(y){var j=this.bc;y+=e;for(var D=q(y),S=i,A=u,m=0;m<D.length;m++){var C=D[m];if(A=this.traverse(S,C),A===u)return!1;if(j.getBase(A)<=0)return!0;S=A}return!1},b.prototype.lookup=function(y){y+=e;for(var j=q(y),D=i,S=u,A=0;A<j.length;A++){var m=j[A];if(S=this.traverse(D,m),S===u)return u;D=S}var C=this.bc.getBase(S);return C<=0?-C-1:u},b.prototype.commonPrefixSearch=function(y){for(var j=q(y),D=i,S=u,A=[],m=0;m<j.length;m++){var C=j[m];if(S=this.traverse(D,C),S!==u){D=S;var T=this.traverse(S,t);if(T!==u){var B=this.bc.getBase(T),O={};B<=0&&(O.v=-B-1),O.k=W(N(j,0,m+1)),A.push(O)}continue}else break}return A},b.prototype.traverse=function(y,j){var D=this.bc.getBase(y)+j;return this.bc.getCheck(D)===y?D:u},b.prototype.size=function(){return this.bc.size()},b.prototype.calc=function(){return this.bc.calc()},b.prototype.dump=function(){return this.bc.dump()};var x=function(y,j,D){switch(j){case 1:return new Int8Array(D);case 2:return new Int16Array(D);case 4:return new Int32Array(D);default:throw new RangeError("Invalid newArray parameter element_bytes:"+j)}},N=function(y,j,D){var S=new ArrayBuffer(D),A=new Uint8Array(S,0,D),m=y.subarray(j,D);return A.set(m),A},q=function(y){for(var j=new Uint8Array(new ArrayBuffer(y.length*4)),D=0,S=0;D<y.length;){var A,m=y.charCodeAt(D++);if(m>=55296&&m<=56319){var C=m,T=y.charCodeAt(D++);if(T>=56320&&T<=57343)A=(C-55296)*1024+65536+(T-56320);else return null}else A=m;A<128?j[S++]=A:A<2048?(j[S++]=A>>>6|192,j[S++]=A&63|128):A<65536?(j[S++]=A>>>12|224,j[S++]=A>>6&63|128,j[S++]=A&63|128):A<1<<21&&(j[S++]=A>>>18|240,j[S++]=A>>12&63|128,j[S++]=A>>6&63|128,j[S++]=A&63|128)}return j.subarray(0,S)},W=function(y){for(var j="",D,S,A,m,C,T,B,O=0;O<y.length;)S=y[O++],S<128?D=S:S>>5===6?(A=y[O++],D=(S&31)<<6|A&63):S>>4===14?(A=y[O++],m=y[O++],D=(S&15)<<12|(A&63)<<6|m&63):(A=y[O++],m=y[O++],C=y[O++],D=(S&7)<<18|(A&63)<<12|(m&63)<<6|C&63),D<65536?j+=String.fromCharCode(D):(D-=65536,T=55296|D>>10,B=56320|D&1023,j+=String.fromCharCode(T,B));return j},Q={builder:function(y){return new g(y)},load:function(y,j){var D=E(0);return D.loadBaseBuffer(y),D.loadCheckBuffer(j),new b(D)}};n.exports=Q})()})(Dn);var Fn=Dn.exports,go=function(n){for(var e=new Uint8Array(n.length*4),t=0,i=0;t<n.length;){var u,c=n.charCodeAt(t++);if(c>=55296&&c<=56319){var h=c,p=n.charCodeAt(t++);if(p>=56320&&p<=57343)u=(h-55296)*1024+65536+(p-56320);else return null}else u=c;u<128?e[i++]=u:u<2048?(e[i++]=u>>>6|192,e[i++]=u&63|128):u<65536?(e[i++]=u>>>12|224,e[i++]=u>>6&63|128,e[i++]=u&63|128):u<1<<21&&(e[i++]=u>>>18|240,e[i++]=u>>12&63|128,e[i++]=u>>6&63|128,e[i++]=u&63|128)}return e.subarray(0,i)},mo=function(n){for(var e="",t,i,u,c,h,p,_,I=0;I<n.length;)i=n[I++],i<128?t=i:i>>5===6?(u=n[I++],t=(i&31)<<6|u&63):i>>4===14?(u=n[I++],c=n[I++],t=(i&15)<<12|(u&63)<<6|c&63):(u=n[I++],c=n[I++],h=n[I++],t=(i&7)<<18|(u&63)<<12|(c&63)<<6|h&63),t<65536?e+=String.fromCharCode(t):(t-=65536,p=55296|t>>10,_=56320|t&1023,e+=String.fromCharCode(p,_));return e};function H(n){var e;if(n==null)e=1024*1024;else if(typeof n=="number")e=n;else if(n instanceof Uint8Array){this.buffer=n,this.position=0;return}else throw typeof n+" is invalid parameter type for ByteBuffer constructor";this.buffer=new Uint8Array(e),this.position=0}H.prototype.size=function(){return this.buffer.length};H.prototype.reallocate=function(){var n=new Uint8Array(this.buffer.length*2);n.set(this.buffer),this.buffer=n};H.prototype.shrink=function(){return this.buffer=this.buffer.subarray(0,this.position),this.buffer};H.prototype.put=function(n){this.buffer.length<this.position+1&&this.reallocate(),this.buffer[this.position++]=n};H.prototype.get=function(n){return n==null&&(n=this.position,this.position+=1),this.buffer.length<n+1?0:this.buffer[n]};H.prototype.putShort=function(n){if(65535<n)throw n+" is over short value";var e=255&n,t=(65280&n)>>8;this.put(e),this.put(t)};H.prototype.getShort=function(n){if(n==null&&(n=this.position,this.position+=2),this.buffer.length<n+2)return 0;var e=this.buffer[n],t=this.buffer[n+1],i=(t<<8)+e;return i&32768&&(i=-(i-1^65535)),i};H.prototype.putInt=function(n){if(4294967295<n)throw n+" is over integer value";var e=255&n,t=(65280&n)>>8,i=(16711680&n)>>16,u=(4278190080&n)>>24;this.put(e),this.put(t),this.put(i),this.put(u)};H.prototype.getInt=function(n){if(n==null&&(n=this.position,this.position+=4),this.buffer.length<n+4)return 0;var e=this.buffer[n],t=this.buffer[n+1],i=this.buffer[n+2],u=this.buffer[n+3];return(u<<24)+(i<<16)+(t<<8)+e};H.prototype.readInt=function(){var n=this.position;return this.position+=4,this.getInt(n)};H.prototype.putString=function(n){for(var e=go(n),t=0;t<e.length;t++)this.put(e[t]);this.put(0)};H.prototype.getString=function(n){var e=[],t;for(n==null&&(n=this.position);!(this.buffer.length<n+1||(t=this.get(n++),t===0));)e.push(t);return this.position=n,mo(e)};var Kt=H,Tr=Kt;function or(){this.dictionary=new Tr(10*1024*1024),this.target_map={},this.pos_buffer=new Tr(10*1024*1024)}or.prototype.buildDictionary=function(n){for(var e={},t=0;t<n.length;t++){var i=n[t];if(!(i.length<4)){var u=i[0],c=i[1],h=i[2],p=i[3],_=i.slice(4).join(",");(!isFinite(c)||!isFinite(h)||!isFinite(p))&&console.log(i);var I=this.put(c,h,p,u,_);e[I]=u}}return this.dictionary.shrink(),this.pos_buffer.shrink(),e};or.prototype.put=function(n,e,t,i,u){var c=this.dictionary.position,h=this.pos_buffer.position;return this.dictionary.putShort(n),this.dictionary.putShort(e),this.dictionary.putShort(t),this.dictionary.putInt(h),this.pos_buffer.putString(i+","+u),c};or.prototype.addMapping=function(n,e){var t=this.target_map[n];t==null&&(t=[]),t.push(e),this.target_map[n]=t};or.prototype.targetMapToBuffer=function(){var n=new Tr,e=Object.keys(this.target_map).length;n.putInt(e);for(var t in this.target_map){var i=this.target_map[t],u=i.length;n.putInt(parseInt(t)),n.putInt(u);for(var c=0;c<i.length;c++)n.putInt(i[c])}return n.shrink()};or.prototype.loadDictionary=function(n){return this.dictionary=new Tr(n),this};or.prototype.loadPosVector=function(n){return this.pos_buffer=new Tr(n),this};or.prototype.loadTargetMap=function(n){var e=new Tr(n);for(e.position=0,this.target_map={},e.readInt();!(e.buffer.length<e.position+1);)for(var t=e.readInt(),i=e.readInt(),u=0;u<i;u++){var c=e.readInt();this.addMapping(t,c)}return this};or.prototype.getFeatures=function(n){var e=parseInt(n);if(isNaN(e))return"";var t=this.dictionary.getInt(e+6);return this.pos_buffer.getString(t)};var Wt=or;function dt(n,e){this.forward_dimension=n,this.backward_dimension=e,this.buffer=new Int16Array(n*e+2),this.buffer[0]=n,this.buffer[1]=e}dt.prototype.put=function(n,e,t){var i=n*this.backward_dimension+e+2;if(this.buffer.length<i+1)throw"ConnectionCosts buffer overflow";this.buffer[i]=t};dt.prototype.get=function(n,e){var t=n*this.backward_dimension+e+2;if(this.buffer.length<t+1)throw"ConnectionCosts buffer overflow";return this.buffer[t]};dt.prototype.loadConnectionCosts=function(n){this.forward_dimension=n[0],this.backward_dimension=n[1],this.buffer=n};var En=dt;function _o(n,e,t,i,u){this.class_id=n,this.class_name=e,this.is_always_invoke=t,this.is_grouping=i,this.max_length=u}var In=_o,Bn=Kt,bo=In;function vr(){this.map=[],this.lookup_table={}}vr.load=function(n){for(var e=new vr,t=[],i=new Bn(n);i.position+1<i.size();){var u=t.length,c=i.get(),h=i.get(),p=i.getInt(),_=i.getString();t.push(new bo(u,_,c,h,p))}return e.init(t),e};vr.prototype.init=function(n){if(n!=null)for(var e=0;e<n.length;e++){var t=n[e];this.map[e]=t,this.lookup_table[t.class_name]=e}};vr.prototype.getCharacterClass=function(n){return this.map[n]};vr.prototype.lookup=function(n){var e=this.lookup_table[n];return e??null};vr.prototype.toBuffer=function(){for(var n=new Bn,e=0;e<this.map.length;e++){var t=this.map[e];n.put(t.is_always_invoke),n.put(t.is_grouping),n.putInt(t.max_length),n.putString(t.class_name)}return n.shrink(),n.buffer};var Ln=vr,wo=Ln,ko=In,Ao=Tn,Nt="DEFAULT";function ar(){this.character_category_map=new Uint8Array(65536),this.compatible_category_map=new Uint32Array(65536),this.invoke_definition_map=null}ar.load=function(n,e,t){var i=new ar;return i.character_category_map=n,i.compatible_category_map=e,i.invoke_definition_map=wo.load(t),i};ar.parseCharCategory=function(n,e){var t=e[1],i=parseInt(e[2]),u=parseInt(e[3]),c=parseInt(e[4]);if(!isFinite(i)||i!==0&&i!==1)return console.log("char.def parse error. INVOKE is 0 or 1 in:"+i),null;if(!isFinite(u)||u!==0&&u!==1)return console.log("char.def parse error. GROUP is 0 or 1 in:"+u),null;if(!isFinite(c)||c<0)return console.log("char.def parse error. LENGTH is 1 to n:"+c),null;var h=i===1,p=u===1;return new ko(n,t,h,p,c)};ar.parseCategoryMapping=function(n){var e=parseInt(n[1]),t=n[2],i=3<n.length?n.slice(3):[];return(!isFinite(e)||e<0||e>65535)&&console.log("char.def parse error. CODE is invalid:"+e),{start:e,default:t,compatible:i}};ar.parseRangeCategoryMapping=function(n){var e=parseInt(n[1]),t=parseInt(n[2]),i=n[3],u=4<n.length?n.slice(4):[];return(!isFinite(e)||e<0||e>65535)&&console.log("char.def parse error. CODE is invalid:"+e),(!isFinite(t)||t<0||t>65535)&&console.log("char.def parse error. CODE is invalid:"+t),{start:e,end:t,default:i,compatible:u}};ar.prototype.initCategoryMappings=function(n){var e;if(n!=null)for(var t=0;t<n.length;t++){var i=n[t],u=i.end||i.start;for(e=i.start;e<=u;e++){this.character_category_map[e]=this.invoke_definition_map.lookup(i.default);for(var c=0;c<i.compatible.length;c++){var h=this.compatible_category_map[e],p=i.compatible[c];if(p!=null){var _=this.invoke_definition_map.lookup(p);if(_!=null){var I=1<<_;h=h|I,this.compatible_category_map[e]=h}}}}}var E=this.invoke_definition_map.lookup(Nt);if(E!=null)for(e=0;e<this.character_category_map.length;e++)this.character_category_map[e]===0&&(this.character_category_map[e]=1<<E)};ar.prototype.lookupCompatibleCategory=function(n){var e=[],t=n.charCodeAt(0),i;if(t<this.compatible_category_map.length&&(i=this.compatible_category_map[t]),i==null||i===0)return e;for(var u=0;u<32;u++)if(i<<31-u>>>31===1){var c=this.invoke_definition_map.getCharacterClass(u);if(c==null)continue;e.push(c)}return e};ar.prototype.lookup=function(n){var e,t=n.charCodeAt(0);return Ao.isSurrogatePair(n)?e=this.invoke_definition_map.lookup(Nt):t<this.character_category_map.length&&(e=this.character_category_map[t]),e==null&&(e=this.invoke_definition_map.lookup(Nt)),this.invoke_definition_map.getCharacterClass(e)};var On=ar,So=Wt,Co=On,pn=Kt;function jr(){this.dictionary=new pn(10*1024*1024),this.target_map={},this.pos_buffer=new pn(10*1024*1024),this.character_definition=null}jr.prototype=Object.create(So.prototype);jr.prototype.characterDefinition=function(n){return this.character_definition=n,this};jr.prototype.lookup=function(n){return this.character_definition.lookup(n)};jr.prototype.lookupCompatibleCategory=function(n){return this.character_definition.lookupCompatibleCategory(n)};jr.prototype.loadUnknownDictionaries=function(n,e,t,i,u,c){this.loadDictionary(n),this.loadPosVector(e),this.loadTargetMap(t),this.character_definition=Co.load(i,u,c)};var xn=jr,zn=Fn,To=Wt,jo=En,Do=xn;function Ur(n,e,t,i){n!=null?this.trie=n:this.trie=zn.builder(0).build([{k:"",v:1}]),e!=null?this.token_info_dictionary=e:this.token_info_dictionary=new To,t!=null?this.connection_costs=t:this.connection_costs=new jo(0,0),i!=null?this.unknown_dictionary=i:this.unknown_dictionary=new Do}Ur.prototype.loadTrie=function(n,e){return this.trie=zn.load(n,e),this};Ur.prototype.loadTokenInfoDictionaries=function(n,e,t){return this.token_info_dictionary.loadDictionary(n),this.token_info_dictionary.loadPosVector(e),this.token_info_dictionary.loadTargetMap(t),this};Ur.prototype.loadConnectionCosts=function(n){return this.connection_costs.loadConnectionCosts(n),this};Ur.prototype.loadUnknownDictionaries=function(n,e,t,i,u,c){return this.unknown_dictionary.loadUnknownDictionaries(n,e,t,i,u,c),this};var $n=Ur,lt=An,ct=yo,Fo=$n;function Ht(n){this.dic=new Fo,this.dic_path=n}Ht.prototype.loadArrayBuffer=function(n,e){throw new Error("DictionaryLoader#loadArrayBuffer should be overwrite")};Ht.prototype.load=function(n){var e=this.dic,t=this.dic_path,i=this.loadArrayBuffer;ct.parallel([function(u){ct.map(["base.dat.gz","check.dat.gz"],function(c,h){i(lt.join(t,c),function(p,_){if(p)return h(p);h(null,_)})},function(c,h){if(c)return u(c);var p=new Int32Array(h[0]),_=new Int32Array(h[1]);e.loadTrie(p,_),u(null)})},function(u){ct.map(["tid.dat.gz","tid_pos.dat.gz","tid_map.dat.gz"],function(c,h){i(lt.join(t,c),function(p,_){if(p)return h(p);h(null,_)})},function(c,h){if(c)return u(c);var p=new Uint8Array(h[0]),_=new Uint8Array(h[1]),I=new Uint8Array(h[2]);e.loadTokenInfoDictionaries(p,_,I),u(null)})},function(u){i(lt.join(t,"cc.dat.gz"),function(c,h){if(c)return u(c);var p=new Int16Array(h);e.loadConnectionCosts(p),u(null)})},function(u){ct.map(["unk.dat.gz","unk_pos.dat.gz","unk_map.dat.gz","unk_char.dat.gz","unk_compat.dat.gz","unk_invoke.dat.gz"],function(c,h){i(lt.join(t,c),function(p,_){if(p)return h(p);h(null,_)})},function(c,h){if(c)return u(c);var p=new Uint8Array(h[0]),_=new Uint8Array(h[1]),I=new Uint8Array(h[2]),E=new Uint8Array(h[3]),g=new Uint32Array(h[4]),b=new Uint8Array(h[5]);e.loadUnknownDictionaries(p,_,I,E,g,b),u(null)})}],function(u){n(u,e)})};var Eo=Ht,Pn=Eo;function Yt(n){Pn.apply(this,[n])}Yt.prototype=Object.create(Pn.prototype);Yt.prototype.loadArrayBuffer=function(n,e){var t=new XMLHttpRequest;t.open("GET",n,!0),t.responseType="arraybuffer",t.onload=function(){if(this.status>0&&this.status!==200){e(t.statusText,null);return}var i=this.response;const u=new DecompressionStream("gzip"),h=new Blob([i]).stream().pipeThrough(u);new Response(h).arrayBuffer().then(p=>{e(null,p)})},t.onerror=function(i){e(i,null)},t.send()};var Io=Yt,Bo=po,Lo=Io;function Un(n){n.dicPath==null?this.dic_path="dict/":this.dic_path=n.dicPath}Un.prototype.build=function(n){var e=new Lo(this.dic_path);e.load(function(t,i){n(t,new Bo(i))})};var Oo=Un,xo=En;function Jt(){this.lines=0,this.connection_cost=null}Jt.prototype.putLine=function(n){if(this.lines===0){var e=n.split(" "),t=e[0],i=e[1];if(t<0||i<0)throw"Parse error of matrix.def";return this.connection_cost=new xo(t,i),this.lines++,this}var u=n.split(" ");if(u.length!==3)return this;var c=parseInt(u[0]),h=parseInt(u[1]),p=parseInt(u[2]);if(c<0||h<0||!isFinite(c)||!isFinite(h)||this.connection_cost.forward_dimension<=c||this.connection_cost.backward_dimension<=h)throw"Parse error of matrix.def";return this.connection_cost.put(c,h,p),this.lines++,this};Jt.prototype.build=function(){return this.connection_cost};var zo=Jt,pt=On,$o=Ln,Po=/^(\w+)\s+(\d)\s+(\d)\s+(\d)/,Uo=/^(0x[0-9A-F]{4})(?:\s+([^#\s]+))(?:\s+([^#\s]+))*/,Mo=/^(0x[0-9A-F]{4})\.\.(0x[0-9A-F]{4})(?:\s+([^#\s]+))(?:\s+([^#\s]+))*/;function Xt(){this.char_def=new pt,this.char_def.invoke_definition_map=new $o,this.character_category_definition=[],this.category_mapping=[]}Xt.prototype.putLine=function(n){var e=Po.exec(n);if(e!=null){var t=this.character_category_definition.length,i=pt.parseCharCategory(t,e);if(i==null)return;this.character_category_definition.push(i);return}var u=Uo.exec(n);if(u!=null){var c=pt.parseCategoryMapping(u);this.category_mapping.push(c)}var h=Mo.exec(n);if(h!=null){var p=pt.parseRangeCategoryMapping(h);this.category_mapping.push(p)}};Xt.prototype.build=function(){return this.char_def.invoke_definition_map.init(this.character_category_definition),this.char_def.initCategoryMappings(this.category_mapping),this.char_def};var Ro=Xt,No=Fn,Vo=$n,Go=Wt,qo=zo,Ko=Ro,Wo=xn;function ur(){this.tid_entries=[],this.unk_entries=[],this.cc_builder=new qo,this.cd_builder=new Ko}ur.prototype.addTokenInfoDictionary=function(n){var e=n.split(",");return this.tid_entries.push(e),this};ur.prototype.putCostMatrixLine=function(n){return this.cc_builder.putLine(n),this};ur.prototype.putCharDefLine=function(n){return this.cd_builder.putLine(n),this};ur.prototype.putUnkDefLine=function(n){return this.unk_entries.push(n.split(",")),this};ur.prototype.build=function(){var n=this.buildTokenInfoDictionary(),e=this.buildUnknownDictionary();return new Vo(n.trie,n.token_info_dictionary,this.cc_builder.build(),e)};ur.prototype.buildTokenInfoDictionary=function(){var n=new Go,e=n.buildDictionary(this.tid_entries),t=this.buildDoubleArray();for(var i in e){var u=e[i],c=t.lookup(u);n.addMapping(c,i)}return{trie:t,token_info_dictionary:n}};ur.prototype.buildUnknownDictionary=function(){var n=new Wo,e=n.buildDictionary(this.unk_entries),t=this.cd_builder.build();n.characterDefinition(t);for(var i in e){var u=e[i],c=t.invoke_definition_map.lookup(u);n.addMapping(c,i)}return n};ur.prototype.buildDoubleArray=function(){var n=0,e=this.tid_entries.map(function(i){var u=i[0];return{k:u,v:n++}}),t=No.builder(1024*1024);return t.build(e)};var Ho=ur,Yo=Oo,Jo=Ho,Xo={builder:function(n){return new Yo(n)},dictionaryBuilder:function(){return new Jo}},Qo=Xo,Ut={},Mn=cr&&cr.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Sr,"__esModule",{value:!0});Sr.tokenize=Sr.getTokenizer=void 0;var yn=Mn(An),Zo=eo,ru=Mn(Vt),tu=Qo,ht=new ru.default,eu=function(){if(typeof process<"u"&&typeof Ut=="object"&&Ut.KUROMOJIN_DIC_PATH)return Ut.KUROMOJIN_DIC_PATH;var n=typeof window<"u"?window:void 0;if(typeof n<"u"&&typeof n.kuromojin=="object"&&typeof n.kuromojin.dicPath=="string")return n.kuromojin.dicPath;var e=yn.default.dirname(require.resolve("kuromoji"));return yn.default.join(e,"..","dict")},Mt=null,gn=!1,dn=new Zo.LRUMap(1e4);function Rn(n){return n===void 0&&(n={dicPath:eu()}),Mt?Promise.resolve(Mt):(gn||(gn=!0,tu.builder(n).build(function(e,t){if(e)return ht.reject(e);Mt=t,ht.resolve(t)})),ht.promise)}Sr.getTokenizer=Rn;function nu(n,e){return Rn(e).then(function(t){if(e!=null&&e.noCacheTokenize)return t.tokenizeForSentence(n);var i=dn.get(n);if(i)return i;var u=t.tokenizeForSentence(n);return dn.set(n,u),u})}Sr.tokenize=nu;(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.tokenize=n.getTokenizer=void 0;var e=Sr;Object.defineProperty(n,"getTokenizer",{enumerable:!0,get:function(){return e.getTokenizer}}),Object.defineProperty(n,"tokenize",{enumerable:!0,get:function(){return e.tokenize}})})(kn);const lu={component:wn},iu={width:"400px",height:"400px"},au=({token:{pos:n,pos_detail_1:e,pos_detail_2:t,pos_detail_3:i,surface_form:u},children:c})=>{const h=Pr.useRef(null),[p,_]=Pr.useState(null),I=n==="名詞"?"rgba(255, 0, 0, 0.2)":n==="動詞"?"rgba(0, 255, 0, 0.2)":n==="形容詞"?"rgba(0, 0, 255, 0.2)":n==="副詞"?"rgba(255, 0, 255, 0.2)":n==="助詞"?"rgba(0, 255, 255, 0.2)":n==="助動詞"?"rgba(255, 255, 0, 0.2)":void 0;return kr.jsxs("span",{ref:h,style:{position:"relative",background:I,outline:"solid 1px lightgray"},onMouseOver:E=>{if(!h.current)return;const g=h.current.getBoundingClientRect();_({top:g.top-g.height*2,left:g.left,description:`${u}: ${n} | ${e} | ${t} | ${i}`})},onMouseOut:()=>_(null),children:[c,p&&ro.createPortal(kr.jsx("div",{style:{position:"fixed",top:p.top,left:p.left,background:"white",fontSize:16,padding:2,border:"solid 1px gray"},children:p.description}),document.body)]})},vt={render:()=>{const[n,e]=Pr.useState(`すもももももももものうち。

吾輩 （ わがはい ） は猫である。名前はまだ無い。

あのイーハトーヴォのすきとおった風、夏でも底に冷たさをもつ青いそら、うつくしい森で飾られたモリーオ市、郊外のぎらぎらひかる草の波。

山路を登りながら、こう考えた。智に働けば角が立つ。情に棹させば流される。意地を通せば窮屈だ。とかくに人の世は住みにくい。住みにくさが高じると、安い所へ引き越したくなる。どこへ越しても住みにくいと悟った時、詩が生れて、画が出来る。`),[t,i]=Pr.useState(null);return Pr.useEffect(()=>{(async()=>{const u=await kn.getTokenizer({dicPath:"/rich-textarea/dict"});i(u)})()},[]),kr.jsxs("div",{style:{marginTop:16},children:[!t&&kr.jsx("div",{children:"Loading dictionaries"}),kr.jsx(wn,{style:iu,onChange:u=>e(u.target.value),value:n,children:u=>t?t.tokenize(n).map(h=>kr.jsx(au,{token:h,children:h.surface_form},h.word_position)):u})]})}};var mn,_n,bn;vt.parameters={...vt.parameters,docs:{...(mn=vt.parameters)==null?void 0:mn.docs,source:{originalSource:`{
  render: () => {
    const [text, setText] = useState("すもももももももものうち。\\n\\n吾輩 （ わがはい ） は猫である。名前はまだ無い。\\n\\nあのイーハトーヴォのすきとおった風、夏でも底に冷たさをもつ青いそら、うつくしい森で飾られたモリーオ市、郊外のぎらぎらひかる草の波。\\n\\n山路を登りながら、こう考えた。智に働けば角が立つ。情に棹させば流される。意地を通せば窮屈だ。とかくに人の世は住みにくい。住みにくさが高じると、安い所へ引き越したくなる。どこへ越しても住みにくいと悟った時、詩が生れて、画が出来る。");
    const [tokenizer, setTokenizer] = useState<Tokenizer | null>(null);
    useEffect(() => {
      (async () => {
        const tokenizer = await getTokenizer({
          dicPath: (import.meta as any).env.STORYBOOK_DEPLOY ? "/rich-textarea/dict" : "/dict"
        });
        setTokenizer(tokenizer);
      })();
    }, []);
    return <div style={{
      marginTop: 16
    }}>
        {!tokenizer && <div>{"Loading dictionaries"}</div>}
        <RichTextarea style={style} onChange={e => setText(e.target.value)} value={text}>
          {v => {
          if (!tokenizer) return v;
          const tokens = tokenizer.tokenize(text);
          return tokens.map(token => {
            return <Mark key={token.word_position} token={token}>
                  {token.surface_form}
                </Mark>;
          });
        }}
        </RichTextarea>
      </div>;
  }
}`,...(bn=(_n=vt.parameters)==null?void 0:_n.docs)==null?void 0:bn.source}}};const cu=["Kuromoji"];export{vt as Kuromoji,cu as __namedExportsOrder,lu as default};
