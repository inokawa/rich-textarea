import"./index.46cfd363.js";import{d as w}from"./index.8e45f264.js";import{a as fr,j as z}from"./jsx-runtime.96752331.js";import{R as Ke}from"./textarea.e03cca18.js";import"./chunk-Y6TTZ4RO.672b857c.js";import"./iframe.047c3e6d.js";import"./index.68bde87c.js";import"./selection.f2e9739e.js";var re=e=>e.type==="checkbox",X=e=>e instanceof Date,R=e=>e==null;const Ge=e=>typeof e=="object";var C=e=>!R(e)&&!Array.isArray(e)&&Ge(e)&&!X(e),Je=e=>C(e)&&e.target?re(e.target)?e.target.checked:e.target.value:e,dr=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,ze=(e,t)=>e.has(dr(t)),te=e=>Array.isArray(e)?e.filter(Boolean):[],k=e=>e===void 0,c=(e,t,r)=>{if(!t||!C(e))return r;const i=te(t.split(/[,[\].]+?/)).reduce((o,a)=>R(o)?o:o[a],e);return k(i)||i===e?k(e[t])?r:e[t]:i};const ue={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},P={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},H={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},yr=w.createContext(null),De=()=>w.useContext(yr);var Qe=(e,t,r,i=!0)=>{const o={};for(const a in e)Object.defineProperty(o,a,{get:()=>{const y=a;return t[y]!==P.all&&(t[y]=!i||P.all),r&&(r[y]=!0),e[y]}});return o},T=e=>C(e)&&!Object.keys(e).length,Xe=(e,t,r)=>{const{name:i,...o}=e;return T(o)||Object.keys(o).length>=Object.keys(t).length||Object.keys(o).find(a=>t[a]===(!r||P.all))},le=e=>Array.isArray(e)?e:[e],Ye=(e,t,r)=>r&&t?e===t:!e||!t||e===t||le(e).some(i=>i&&(i.startsWith(t)||t.startsWith(i)));function Ee(e){const t=w.useRef(e);t.current=e,w.useEffect(()=>{const r=o=>{o&&o.unsubscribe()},i=!e.disabled&&t.current.subject.subscribe({next:t.current.callback});return()=>r(i)},[e.disabled])}function hr(e){const t=De(),{control:r=t.control,disabled:i,name:o,exact:a}=e||{},[y,h]=w.useState(r._formState),F=w.useRef({isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1}),m=w.useRef(o),A=w.useRef(!0);m.current=o;const _=w.useCallback(v=>A.current&&Ye(m.current,v.name,a)&&Xe(v,F.current)&&h({...r._formState,...v}),[r,a]);return Ee({disabled:i,callback:_,subject:r._subjects.state}),w.useEffect(()=>(A.current=!0,()=>{A.current=!1}),[]),Qe(y,r._proxyFormState,F.current,!1)}var N=e=>typeof e=="string",Ze=(e,t,r,i)=>{const o=Array.isArray(e);return N(e)?(i&&t.watch.add(e),c(r,e)):o?e.map(a=>(i&&t.watch.add(a),c(r,a))):(i&&(t.watchAll=!0),r)},he=e=>typeof e=="function",Ce=e=>{for(const t in e)if(he(e[t]))return!0;return!1};function gr(e){const t=De(),{control:r=t.control,name:i,defaultValue:o,disabled:a,exact:y}=e||{},h=w.useRef(i);h.current=i;const F=w.useCallback(_=>{if(Ye(h.current,_.name,y)){const v=Ze(h.current,r._names,_.values||r._formValues);A(k(h.current)||C(v)&&!Ce(v)?{...v}:Array.isArray(v)?[...v]:k(v)?o:v)}},[r,y,o]);Ee({disabled:a,subject:r._subjects.watch,callback:F});const[m,A]=w.useState(k(o)?r._getWatch(i):o);return w.useEffect(()=>{r._removeUnmounted()}),m}function vr(e){const t=De(),{name:r,control:i=t.control,shouldUnregister:o}=e,a=ze(i._names.array,r),y=gr({control:i,name:r,defaultValue:c(i._formValues,r,c(i._defaultValues,r,e.defaultValue)),exact:!0}),h=hr({control:i,name:r}),F=w.useRef(i.register(r,{...e.rules,value:y}));return w.useEffect(()=>{const m=(A,_)=>{const v=c(i._fields,A);v&&(v._f.mount=_)};return m(r,!0),()=>{const A=i._options.shouldUnregister||o;(a?A&&!i._stateFlags.action:A)?i.unregister(r):m(r,!1)}},[r,i,a,o]),{field:{name:r,value:y,onChange:w.useCallback(m=>{F.current.onChange({target:{value:Je(m),name:r},type:ue.CHANGE})},[r]),onBlur:w.useCallback(()=>{F.current.onBlur({target:{value:c(i._formValues,r),name:r},type:ue.BLUR})},[r,i]),ref:w.useCallback(m=>{const A=c(i._fields,r);m&&A&&m.focus&&(A._f.ref={focus:()=>m.focus(),select:()=>m.select(),setCustomValidity:_=>m.setCustomValidity(_),reportValidity:()=>m.reportValidity()})},[r,i._fields])},formState:h,fieldState:Object.defineProperties({},{invalid:{get:()=>!!c(h.errors,r)},isDirty:{get:()=>!!c(h.dirtyFields,r)},isTouched:{get:()=>!!c(h.touchedFields,r)},error:{get:()=>c(h.errors,r)}})}}const br=e=>e.render(vr(e));var _r=(e,t,r,i,o)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[i]:o||!0}}:{},Re=e=>/^\w*$/.test(e),er=e=>te(e.replace(/["|']|\]/g,"").split(/\.|\[/));function V(e,t,r){let i=-1;const o=Re(t)?[t]:er(t),a=o.length,y=a-1;for(;++i<a;){const h=o[i];let F=r;if(i!==y){const m=e[h];F=C(m)||Array.isArray(m)?m:isNaN(+o[i+1])?{}:[]}e[h]=F,e=e[h]}return e}const we=(e,t,r)=>{for(const i of r||Object.keys(e)){const o=c(e,i);if(o){const{_f:a,...y}=o;if(a&&t(a.name)){if(a.ref.focus&&k(a.ref.focus()))break;if(a.refs){a.refs[0].focus();break}}else C(y)&&we(y,t)}}};var Pe=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(i=>e.startsWith(i)&&/^\.\w+/.test(e.slice(i.length)))),mr=(e,t,r)=>{const i=te(c(e,r));return V(i,"root",t[r]),V(e,r,i),e},ce=e=>typeof e=="boolean",pe=e=>e.type==="file",ae=e=>N(e)||w.isValidElement(e),Le=e=>e.type==="radio",fe=e=>e instanceof RegExp;const Ne={value:!1,isValid:!1},qe={value:!0,isValid:!0};var rr=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!k(e[0].attributes.value)?k(e[0].value)||e[0].value===""?qe:{value:e[0].value,isValid:!0}:qe:Ne}return Ne};const Ie={isValid:!1,value:null};var tr=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,Ie):Ie;function He(e,t,r="validate"){if(ae(e)||Array.isArray(e)&&e.every(ae)||ce(e)&&!e)return{type:r,message:ae(e)?e:"",ref:t}}var Q=e=>C(e)&&!fe(e)?e:{value:e,message:""},We=async(e,t,r,i,o)=>{const{ref:a,refs:y,required:h,maxLength:F,minLength:m,min:A,max:_,pattern:v,validate:W,name:U,valueAsNumber:se,mount:ge,disabled:j}=e._f;if(!ge||j)return{};const q=y?y[0]:a,I=b=>{i&&q.reportValidity&&(q.setCustomValidity(ce(b)?"":b||" "),q.reportValidity())},D={},Z=Le(a),ie=re(a),$=Z||ie,J=(se||pe(a))&&!a.value||t===""||Array.isArray(t)&&!t.length,M=_r.bind(null,U,r,D),ne=(b,x,E,L=H.maxLength,B=H.minLength)=>{const K=b?x:E;D[U]={type:b?L:B,message:K,ref:a,...M(b?L:B,K)}};if(o?!Array.isArray(t)||!t.length:h&&(!$&&(J||R(t))||ce(t)&&!t||ie&&!rr(y).isValid||Z&&!tr(y).isValid)){const{value:b,message:x}=ae(h)?{value:!!h,message:h}:Q(h);if(b&&(D[U]={type:H.required,message:x,ref:q,...M(H.required,x)},!r))return I(x),D}if(!J&&(!R(A)||!R(_))){let b,x;const E=Q(_),L=Q(A);if(!R(t)&&!isNaN(t)){const B=a.valueAsNumber||+t;R(E.value)||(b=B>E.value),R(L.value)||(x=B<L.value)}else{const B=a.valueAsDate||new Date(t);N(E.value)&&(b=B>new Date(E.value)),N(L.value)&&(x=B<new Date(L.value))}if((b||x)&&(ne(!!b,E.message,L.message,H.max,H.min),!r))return I(D[U].message),D}if((F||m)&&!J&&(N(t)||o&&Array.isArray(t))){const b=Q(F),x=Q(m),E=!R(b.value)&&t.length>b.value,L=!R(x.value)&&t.length<x.value;if((E||L)&&(ne(E,b.message,x.message),!r))return I(D[U].message),D}if(v&&!J&&N(t)){const{value:b,message:x}=Q(v);if(fe(b)&&!t.match(b)&&(D[U]={type:H.pattern,message:x,ref:a,...M(H.pattern,x)},!r))return I(x),D}if(W){if(he(W)){const b=await W(t),x=He(b,q);if(x&&(D[U]={...x,...M(H.validate,x.message)},!r))return I(x.message),D}else if(C(W)){let b={};for(const x in W){if(!T(b)&&!r)break;const E=He(await W[x](t),q,x);E&&(b={...E,...M(x,E.message)},I(E.message),r&&(D[U]=b))}if(!T(b)&&(D[U]={ref:q,...b},!r))return D}}return I(!0),D},ke=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function G(e){let t;const r=Array.isArray(e);if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(!(ke&&(e instanceof Blob||e instanceof FileList))&&(r||C(e))){t=r?[]:{};for(const i in e){if(he(e[i])){t=e;break}t[i]=G(e[i])}}else return e;return t}var je=e=>({isOnSubmit:!e||e===P.onSubmit,isOnBlur:e===P.onBlur,isOnChange:e===P.onChange,isOnAll:e===P.all,isOnTouch:e===P.onTouched});function Fr(e,t){const r=t.slice(0,-1).length;let i=0;for(;i<r;)e=k(e)?i++:e[t[i++]];return e}function xr(e){for(const t in e)if(!k(e[t]))return!1;return!0}function p(e,t){const r=Re(t)?[t]:er(t),i=r.length==1?e:Fr(e,r),o=r[r.length-1];let a;i&&delete i[o];for(let y=0;y<r.slice(0,-1).length;y++){let h=-1,F;const m=r.slice(0,-(y+1)),A=m.length-1;for(y>0&&(a=e);++h<m.length;){const _=m[h];F=F?F[_]:e[_],A===h&&(C(F)&&T(F)||Array.isArray(F)&&xr(F))&&(a?delete a[_]:delete e[_]),a=F}}return e}function Fe(){let e=[];return{get observers(){return e},next:o=>{for(const a of e)a.next(o)},subscribe:o=>(e.push(o),{unsubscribe:()=>{e=e.filter(a=>a!==o)}}),unsubscribe:()=>{e=[]}}}var de=e=>R(e)||!Ge(e);function Y(e,t){if(de(e)||de(t))return e===t;if(X(e)&&X(t))return e.getTime()===t.getTime();const r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(const o of r){const a=e[o];if(!i.includes(o))return!1;if(o!=="ref"){const y=t[o];if(X(a)&&X(y)||C(a)&&C(y)||Array.isArray(a)&&Array.isArray(y)?!Y(a,y):a!==y)return!1}}return!0}var Se=e=>{const t=e?e.ownerDocument:0,r=t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement;return e instanceof r},sr=e=>e.type==="select-multiple",Ar=e=>Le(e)||re(e),xe=e=>Se(e)&&e.isConnected;function ye(e,t={}){const r=Array.isArray(e);if(C(e)||r)for(const i in e)Array.isArray(e[i])||C(e[i])&&!Ce(e[i])?(t[i]=Array.isArray(e[i])?[]:{},ye(e[i],t[i])):R(e[i])||(t[i]=!0);return t}function ir(e,t,r){const i=Array.isArray(e);if(C(e)||i)for(const o in e)Array.isArray(e[o])||C(e[o])&&!Ce(e[o])?k(t)||de(r[o])?r[o]=Array.isArray(e[o])?ye(e[o],[]):{...ye(e[o])}:ir(e[o],R(t)?{}:t[o],r[o]):r[o]=!Y(e[o],t[o]);return r}var Ae=(e,t)=>ir(e,t,ye(t)),nr=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:i})=>k(e)?e:t?e===""||R(e)?NaN:+e:r&&N(e)?new Date(e):i?i(e):e;function Ve(e){const t=e.ref;if(!(e.refs?e.refs.every(r=>r.disabled):t.disabled))return pe(t)?t.files:Le(t)?tr(e.refs).value:sr(t)?[...t.selectedOptions].map(({value:r})=>r):re(t)?rr(e.refs).value:nr(k(t.value)?e.ref.value:t.value,e)}var Vr=(e,t,r,i)=>{const o={};for(const a of e){const y=c(t,a);y&&V(o,a,y._f)}return{criteriaMode:r,names:[...e],fields:o,shouldUseNativeValidation:i}},ee=e=>k(e)?void 0:fe(e)?e.source:C(e)?fe(e.value)?e.value.source:e.value:e,wr=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function $e(e,t,r){const i=c(e,r);if(i||Re(r))return{error:i,name:r};const o=r.split(".");for(;o.length;){const a=o.join("."),y=c(t,a),h=c(e,a);if(y&&!Array.isArray(y)&&r!==a)return{name:r};if(h&&h.type)return{name:a,error:h};o.pop()}return{name:r}}var kr=(e,t,r,i,o)=>o.isOnAll?!1:!r&&o.isOnTouch?!(t||e):(r?i.isOnBlur:o.isOnBlur)?!e:(r?i.isOnChange:o.isOnChange)?e:!0,Sr=(e,t)=>!te(c(e,t)).length&&p(e,t);const Dr={mode:P.onSubmit,reValidateMode:P.onChange,shouldFocusError:!0};function Er(e={}){let t={...Dr,...e},r={isDirty:!1,isValidating:!1,dirtyFields:{},isSubmitted:!1,submitCount:0,touchedFields:{},isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,errors:{}},i={},o=G(t.defaultValues)||{},a=t.shouldUnregister?{}:G(o),y={action:!1,mount:!1,watch:!1},h={mount:new Set,unMount:new Set,array:new Set,watch:new Set},F,m=0,A={};const _={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},v={watch:Fe(),array:Fe(),state:Fe()},W=je(t.mode),U=je(t.reValidateMode),se=t.criteriaMode===P.all,ge=s=>n=>{clearTimeout(m),m=window.setTimeout(s,n)},j=async s=>{let n=!1;return _.isValid&&(n=t.resolver?T((await $()).errors):await M(i,!0),!s&&n!==r.isValid&&(r.isValid=n,v.state.next({isValid:n}))),n},q=(s,n=[],l,f,d=!0,u=!0)=>{if(f&&l){if(y.action=!0,u&&Array.isArray(c(i,s))){const g=l(c(i,s),f.argA,f.argB);d&&V(i,s,g)}if(_.errors&&u&&Array.isArray(c(r.errors,s))){const g=l(c(r.errors,s),f.argA,f.argB);d&&V(r.errors,s,g),Sr(r.errors,s)}if(_.touchedFields&&u&&Array.isArray(c(r.touchedFields,s))){const g=l(c(r.touchedFields,s),f.argA,f.argB);d&&V(r.touchedFields,s,g)}_.dirtyFields&&(r.dirtyFields=Ae(o,a)),v.state.next({isDirty:b(s,n),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else V(a,s,n)},I=(s,n)=>{V(r.errors,s,n),v.state.next({errors:r.errors})},D=(s,n,l,f)=>{const d=c(i,s);if(d){const u=c(a,s,k(l)?c(o,s):l);k(u)||f&&f.defaultChecked||n?V(a,s,n?u:Ve(d._f)):L(s,u),y.mount&&j()}},Z=(s,n,l,f,d)=>{let u=!1;const g={name:s},S=c(r.touchedFields,s);if(_.isDirty){const O=r.isDirty;r.isDirty=g.isDirty=b(),u=O!==g.isDirty}if(_.dirtyFields&&(!l||f)){const O=c(r.dirtyFields,s);Y(c(o,s),n)?p(r.dirtyFields,s):V(r.dirtyFields,s,!0),g.dirtyFields=r.dirtyFields,u=u||O!==c(r.dirtyFields,s)}return l&&!S&&(V(r.touchedFields,s,l),g.touchedFields=r.touchedFields,u=u||_.touchedFields&&S!==l),u&&d&&v.state.next(g),u?g:{}},ie=async(s,n,l,f)=>{const d=c(r.errors,s),u=_.isValid&&r.isValid!==n;if(e.delayError&&l?(F=ge(()=>I(s,l)),F(e.delayError)):(clearTimeout(m),F=null,l?V(r.errors,s,l):p(r.errors,s)),(l?!Y(d,l):d)||!T(f)||u){const g={...f,...u?{isValid:n}:{},errors:r.errors,name:s};r={...r,...g},v.state.next(g)}A[s]--,_.isValidating&&!Object.values(A).some(g=>g)&&(v.state.next({isValidating:!1}),A={})},$=async s=>t.resolver?await t.resolver({...a},t.context,Vr(s||h.mount,i,t.criteriaMode,t.shouldUseNativeValidation)):{},J=async s=>{const{errors:n}=await $();if(s)for(const l of s){const f=c(n,l);f?V(r.errors,l,f):p(r.errors,l)}else r.errors=n;return n},M=async(s,n,l={valid:!0})=>{for(const f in s){const d=s[f];if(d){const{_f:u,...g}=d;if(u){const S=h.array.has(u.name),O=await We(d,c(a,u.name),se,t.shouldUseNativeValidation,S);if(O[u.name]&&(l.valid=!1,n))break;!n&&(c(O,u.name)?S?mr(r.errors,O,u.name):V(r.errors,u.name,O[u.name]):p(r.errors,u.name))}g&&await M(g,n,l)}}return l.valid},ne=()=>{for(const s of h.unMount){const n=c(i,s);n&&(n._f.refs?n._f.refs.every(l=>!xe(l)):!xe(n._f.ref))&&be(s)}h.unMount=new Set},b=(s,n)=>(s&&n&&V(a,s,n),!Y(Te(),o)),x=(s,n,l)=>{const f={...y.mount?a:k(n)?o:N(s)?{[s]:n}:n};return Ze(s,h,f,l)},E=s=>te(c(y.mount?a:o,s,e.shouldUnregister?c(o,s,[]):[])),L=(s,n,l={})=>{const f=c(i,s);let d=n;if(f){const u=f._f;u&&(!u.disabled&&V(a,s,nr(n,u)),d=ke&&Se(u.ref)&&R(n)?"":n,sr(u.ref)?[...u.ref.options].forEach(g=>g.selected=d.includes(g.value)):u.refs?re(u.ref)?u.refs.length>1?u.refs.forEach(g=>!g.disabled&&(g.checked=Array.isArray(d)?!!d.find(S=>S===g.value):d===g.value)):u.refs[0]&&(u.refs[0].checked=!!d):u.refs.forEach(g=>g.checked=g.value===d):pe(u.ref)?u.ref.value="":(u.ref.value=d,u.ref.type||v.watch.next({name:s})))}(l.shouldDirty||l.shouldTouch)&&Z(s,d,l.shouldTouch,l.shouldDirty,!0),l.shouldValidate&&ve(s)},B=(s,n,l)=>{for(const f in n){const d=n[f],u=`${s}.${f}`,g=c(i,u);(h.array.has(s)||!de(d)||g&&!g._f)&&!X(d)?B(u,d,l):L(u,d,l)}},K=(s,n,l={})=>{const f=c(i,s),d=h.array.has(s),u=G(n);V(a,s,u),d?(v.array.next({name:s,values:a}),(_.isDirty||_.dirtyFields)&&l.shouldDirty&&(r.dirtyFields=Ae(o,a),v.state.next({name:s,dirtyFields:r.dirtyFields,isDirty:b(s,u)}))):f&&!f._f&&!R(u)?B(s,u,l):L(s,u,l),Pe(s,h)&&v.state.next({}),v.watch.next({name:s})},Oe=async s=>{const n=s.target;let l=n.name;const f=c(i,l);if(f){let d,u;const g=n.type?Ve(f._f):Je(s),S=s.type===ue.BLUR||s.type===ue.FOCUS_OUT,O=!wr(f._f)&&!t.resolver&&!c(r.errors,l)&&!f._f.deps||kr(S,c(r.touchedFields,l),r.isSubmitted,U,W),oe=Pe(l,h,S);V(a,l,g),S?(f._f.onBlur&&f._f.onBlur(s),F&&F(0)):f._f.onChange&&f._f.onChange(s);const me=Z(l,g,S,!1),ur=!T(me)||oe;if(!S&&v.watch.next({name:l,type:s.type}),O)return ur&&v.state.next({name:l,...oe?{}:me});if(!S&&oe&&v.state.next({}),A[l]=(A[l],1),v.state.next({isValidating:!0}),t.resolver){const{errors:Me}=await $([l]),cr=$e(r.errors,i,l),Be=$e(Me,i,cr.name||l);d=Be.error,l=Be.name,u=T(Me)}else d=(await We(f,c(a,l),se,t.shouldUseNativeValidation))[l],u=await j(!0);f._f.deps&&ve(f._f.deps),ie(l,u,d,me)}},ve=async(s,n={})=>{let l,f;const d=le(s);if(v.state.next({isValidating:!0}),t.resolver){const u=await J(k(s)?s:d);l=T(u),f=s?!d.some(g=>c(u,g)):l}else s?(f=(await Promise.all(d.map(async u=>{const g=c(i,u);return await M(g&&g._f?{[u]:g}:g)}))).every(Boolean),!(!f&&!r.isValid)&&j()):f=l=await M(i);return v.state.next({...!N(s)||_.isValid&&l!==r.isValid?{}:{name:s},...t.resolver?{isValid:l}:{},errors:r.errors,isValidating:!1}),n.shouldFocus&&!f&&we(i,u=>c(r.errors,u),s?d:h.mount),f},Te=s=>{const n={...o,...y.mount?a:{}};return k(s)?n:N(s)?c(n,s):s.map(l=>c(n,l))},Ue=(s,n)=>({invalid:!!c((n||r).errors,s),isDirty:!!c((n||r).dirtyFields,s),isTouched:!!c((n||r).touchedFields,s),error:c((n||r).errors,s)}),or=s=>{s?le(s).forEach(n=>p(r.errors,n)):r.errors={},v.state.next({errors:r.errors})},lr=(s,n,l)=>{const f=(c(i,s,{_f:{}})._f||{}).ref;V(r.errors,s,{...n,ref:f}),v.state.next({name:s,errors:r.errors,isValid:!1}),l&&l.shouldFocus&&f&&f.focus&&f.focus()},ar=(s,n)=>he(s)?v.watch.subscribe({next:l=>s(x(void 0,n),l)}):x(s,n,!0),be=(s,n={})=>{for(const l of s?le(s):h.mount)h.mount.delete(l),h.array.delete(l),c(i,l)&&(n.keepValue||(p(i,l),p(a,l)),!n.keepError&&p(r.errors,l),!n.keepDirty&&p(r.dirtyFields,l),!n.keepTouched&&p(r.touchedFields,l),!t.shouldUnregister&&!n.keepDefaultValue&&p(o,l));v.watch.next({}),v.state.next({...r,...n.keepDirty?{isDirty:b()}:{}}),!n.keepIsValid&&j()},_e=(s,n={})=>{let l=c(i,s);const f=ce(n.disabled);return V(i,s,{_f:{...l&&l._f?l._f:{ref:{name:s}},name:s,mount:!0,...n}}),h.mount.add(s),l?f&&V(a,s,n.disabled?void 0:c(a,s,Ve(l._f))):D(s,!0,n.value),{...f?{disabled:n.disabled}:{},...t.shouldUseNativeValidation?{required:!!n.required,min:ee(n.min),max:ee(n.max),minLength:ee(n.minLength),maxLength:ee(n.maxLength),pattern:ee(n.pattern)}:{},name:s,onChange:Oe,onBlur:Oe,ref:d=>{if(d){_e(s,n),l=c(i,s);const u=k(d.value)&&d.querySelectorAll&&d.querySelectorAll("input,select,textarea")[0]||d,g=Ar(u),S=l._f.refs||[];if(g?S.find(O=>O===u):u===l._f.ref)return;V(i,s,{_f:{...l._f,...g?{refs:[...S.filter(xe),u,...Array.isArray(c(o,s))?[{}]:[]],ref:{type:u.type,name:s}}:{ref:u}}}),D(s,!1,void 0,u)}else l=c(i,s,{}),l._f&&(l._f.mount=!1),(t.shouldUnregister||n.shouldUnregister)&&!(ze(h.array,s)&&y.action)&&h.unMount.add(s)}}};return{control:{register:_e,unregister:be,getFieldState:Ue,_executeSchema:$,_getWatch:x,_getDirty:b,_updateValid:j,_removeUnmounted:ne,_updateFieldArray:q,_getFieldArray:E,_subjects:v,_proxyFormState:_,get _fields(){return i},get _formValues(){return a},get _stateFlags(){return y},set _stateFlags(s){y=s},get _defaultValues(){return o},get _names(){return h},set _names(s){h=s},get _formState(){return r},set _formState(s){r=s},get _options(){return t},set _options(s){t={...t,...s}}},trigger:ve,register:_e,handleSubmit:(s,n)=>async l=>{l&&(l.preventDefault&&l.preventDefault(),l.persist&&l.persist());let f=!0,d=G(a);v.state.next({isSubmitting:!0});try{if(t.resolver){const{errors:u,values:g}=await $();r.errors=u,d=g}else await M(i);T(r.errors)?(v.state.next({errors:{},isSubmitting:!0}),await s(d,l)):(n&&await n({...r.errors},l),t.shouldFocusError&&we(i,u=>c(r.errors,u),h.mount))}catch(u){throw f=!1,u}finally{r.isSubmitted=!0,v.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:T(r.errors)&&f,submitCount:r.submitCount+1,errors:r.errors})}},watch:ar,setValue:K,getValues:Te,reset:(s,n={})=>{const l=s||o,f=G(l),d=s&&!T(s)?f:o;if(n.keepDefaultValues||(o=l),!n.keepValues){if(n.keepDirtyValues)for(const u of h.mount)c(r.dirtyFields,u)?V(d,u,c(a,u)):K(u,c(d,u));else{if(ke&&k(s))for(const u of h.mount){const g=c(i,u);if(g&&g._f){const S=Array.isArray(g._f.refs)?g._f.refs[0]:g._f.ref;try{if(Se(S)){S.closest("form").reset();break}}catch{}}}i={}}a=e.shouldUnregister?n.keepDefaultValues?G(o):{}:f,v.array.next({values:d}),v.watch.next({values:d})}h={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},y.mount=!_.isValid||!!n.keepIsValid,y.watch=!!e.shouldUnregister,v.state.next({submitCount:n.keepSubmitCount?r.submitCount:0,isDirty:n.keepDirty||n.keepDirtyValues?r.isDirty:!!(n.keepDefaultValues&&!Y(s,o)),isSubmitted:n.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:n.keepDirty||n.keepDirtyValues?r.dirtyFields:n.keepDefaultValues&&s?Ae(o,s):{},touchedFields:n.keepTouched?r.touchedFields:{},errors:n.keepErrors?r.errors:{},isSubmitting:!1,isSubmitSuccessful:!1})},resetField:(s,n={})=>{c(i,s)&&(k(n.defaultValue)?K(s,c(o,s)):(K(s,n.defaultValue),V(o,s,n.defaultValue)),n.keepTouched||p(r.touchedFields,s),n.keepDirty||(p(r.dirtyFields,s),r.isDirty=n.defaultValue?b(s,c(o,s)):b()),n.keepError||(p(r.errors,s),_.isValid&&j()),v.state.next({...r}))},clearErrors:or,unregister:be,setError:lr,setFocus:(s,n={})=>{const l=c(i,s)._f,f=l.refs?l.refs[0]:l.ref;f.focus(),n.shouldSelect&&f.select()},getFieldState:Ue}}function Cr(e={}){const t=w.useRef(),[r,i]=w.useState({isDirty:!1,isValidating:!1,dirtyFields:{},isSubmitted:!1,submitCount:0,touchedFields:{},isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,errors:{}});t.current?t.current.control._options=e:t.current={...Er(e),formState:r};const o=t.current.control,a=w.useCallback(y=>{Xe(y,o._proxyFormState,!0)&&(o._formState={...o._formState,...y},i({...o._formState}))},[o]);return Ee({subject:o._subjects.state,callback:a}),w.useEffect(()=>{o._stateFlags.mount||(o._proxyFormState.isValid&&o._updateValid(),o._stateFlags.mount=!0),o._stateFlags.watch&&(o._stateFlags.watch=!1,o._subjects.state.next({})),o._removeUnmounted()}),t.current.formState=Qe(r,o._proxyFormState),t.current}const Wr={component:Ke},Rr={width:"600px",height:"400px"},jr={render:()=>{var i,o;const{handleSubmit:e,control:t,formState:{errors:r}}=Cr();return fr("form",{onSubmit:e(a=>alert(JSON.stringify(a))),children:[z(br,{defaultValue:"Hello react-hook-form",control:t,name:"text",rules:{required:!0,validate:a=>a.toLowerCase().includes("hook")},render:({field:{ref:a,onChange:y,onBlur:h,value:F}})=>z(Ke,{ref:a,value:F,style:Rr,onChange:y,onBlur:h,children:m=>m.split("").map((A,_)=>z("span",{style:{color:"hook".includes(A.toLowerCase())?"violet":void 0},children:A},_))})}),((i=r.text)==null?void 0:i.type)==="required"&&z("span",{style:{color:"red"},children:"This field is required"}),((o=r.text)==null?void 0:o.type)==="validate"&&z("span",{style:{color:"red"},children:"Text must include hook"}),z("button",{type:"submit",children:"submit"})]})}},$r=["WithReactHookForm"];export{jr as WithReactHookForm,$r as __namedExportsOrder,Wr as default};
//# sourceMappingURL=WithReactHookForm.stories.56f8ed9a.js.map
